{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{IconButton,InputLabel,FormControl,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Select,Paper}from'@material-ui/core';import DoneIcon from'@material-ui/icons/Done';import adminService from'../services/admin';import{LoadingSpinnerComponent}from'../utils/LoadingSpinnerComponent';import{trackPromise}from'react-promise-tracker';import{usePromiseTracker}from'react-promise-tracker';// import { useHistory } from 'react-router-dom';\nexport default function VerifyWorkshops(props){//   const history = useHistory();\nvar workshops=props.workshops,handleNotAuth=props.handleNotAuth;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),workshopVerify=_useState2[0],setWorkshopVerify=_useState2[1];var verifyWorkshop=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(studentId){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return trackPromise(adminService.verifyWorkshop(studentId,workshopVerify.name));case 2:res=_context.sent;// console.log(auth);\nif(res.status===401){handleNotAuth(false);}else if(res.status===400){alert(res.data.error);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function verifyWorkshop(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(event){var workshop=workshops.find(function(workshop){return workshop.name===event.target.value;});setWorkshopVerify(workshop);};var _usePromiseTracker=usePromiseTracker(),promiseInProgress=_usePromiseTracker.promiseInProgress;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(LoadingSpinnerComponent,null),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,null,\"Workshop\"),/*#__PURE__*/React.createElement(Select,{native:true,value:workshopVerify&&workshopVerify.name,onChange:handleChange},/*#__PURE__*/React.createElement(\"option\",{\"aria-label\":\"None\",value:\"\"}),workshops&&workshops.map(function(workshop){return/*#__PURE__*/React.createElement(\"option\",{key:workshop._id,value:workshop.name},workshop.name);}))),/*#__PURE__*/React.createElement(TableContainer,{component:Paper},/*#__PURE__*/React.createElement(Table,{\"aria-label\":\"table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Name\"),/*#__PURE__*/React.createElement(TableCell,null,\"Email Address\"))),/*#__PURE__*/React.createElement(TableBody,null,workshopVerify&&workshopVerify.registeredParticipants&&workshopVerify.registeredParticipants.map(function(participant,index){if(participant.studentPoints.length>0){var points=participant.studentPoints[0];var pointCategory=null;if(points.length>0){pointCategory=points.find(function(point){return point.category===workshopVerify.name;});}if(!pointCategory){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(TableRow,{key:index},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},participant.name),/*#__PURE__*/React.createElement(TableCell,null,participant.emailAddress),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IconButton,{edge:\"end\",\"aria-label\":\"download\",disabled:promiseInProgress},/*#__PURE__*/React.createElement(DoneIcon,{onClick:function onClick(){return verifyWorkshop(participant.studentId);}})))));}}})))));}","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/AdminInterface/VerifyWorkshops.js"],"names":["React","useState","IconButton","InputLabel","FormControl","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Select","Paper","DoneIcon","adminService","LoadingSpinnerComponent","trackPromise","usePromiseTracker","VerifyWorkshops","props","workshops","handleNotAuth","workshopVerify","setWorkshopVerify","verifyWorkshop","studentId","name","res","status","alert","data","error","handleChange","event","workshop","find","target","value","promiseInProgress","map","_id","registeredParticipants","participant","index","studentPoints","length","points","pointCategory","point","category","emailAddress"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {\n  IconButton,\n  InputLabel,\n  FormControl,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Select,\n  Paper,\n} from '@material-ui/core';\nimport DoneIcon from '@material-ui/icons/Done';\nimport adminService from '../services/admin';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { trackPromise } from 'react-promise-tracker';\nimport { usePromiseTracker } from 'react-promise-tracker';\n// import { useHistory } from 'react-router-dom';\n\nexport default function VerifyWorkshops(props) {\n  //   const history = useHistory();\n  const { workshops, handleNotAuth } = props;\n  const [workshopVerify, setWorkshopVerify] = useState(null);\n\n  const verifyWorkshop = async (studentId) => {\n    const res = await trackPromise(\n      adminService.verifyWorkshop(studentId, workshopVerify.name)\n    );\n    // console.log(auth);\n    if (res.status === 401) {\n      handleNotAuth(false);\n    } else if (res.status === 400) {\n      alert(res.data.error);\n    }\n  };\n\n  const handleChange = (event) => {\n    const workshop = workshops.find(\n      (workshop) => workshop.name === event.target.value\n    );\n    setWorkshopVerify(workshop);\n  };\n\n  const { promiseInProgress } = usePromiseTracker();\n  return (\n    <>\n      <LoadingSpinnerComponent />\n      <FormControl>\n        <InputLabel>Workshop</InputLabel>\n        <Select\n          native\n          value={workshopVerify && workshopVerify.name}\n          onChange={handleChange}\n        >\n          <option aria-label=\"None\" value=\"\" />\n          {workshops &&\n            workshops.map((workshop) => (\n              <option key={workshop._id} value={workshop.name}>\n                {workshop.name}\n              </option>\n            ))}\n        </Select>\n      </FormControl>\n      <TableContainer component={Paper}>\n        <Table aria-label=\"table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell>Email Address</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {workshopVerify &&\n              workshopVerify.registeredParticipants &&\n              workshopVerify.registeredParticipants.map(\n                (participant, index) => {\n                  if (participant.studentPoints.length > 0) {\n                    const points = participant.studentPoints[0];\n                    let pointCategory = null;\n                    if (points.length > 0) {\n                      pointCategory = points.find(\n                        (point) => point.category === workshopVerify.name\n                      );\n                    }\n                    if (!pointCategory) {\n                      return (\n                        <>\n                          <TableRow key={index}>\n                            <TableCell component=\"th\" scope=\"row\">\n                              {participant.name}\n                            </TableCell>\n                            <TableCell>{participant.emailAddress}</TableCell>\n                            {\n                              <>\n                                <IconButton\n                                  edge=\"end\"\n                                  aria-label=\"download\"\n                                  disabled={promiseInProgress}\n                                >\n                                  <DoneIcon\n                                    onClick={() =>\n                                      verifyWorkshop(participant.studentId)\n                                    }\n                                  />\n                                </IconButton>\n                              </>\n                            }\n                          </TableRow>\n                        </>\n                      );\n                    }\n                  }\n                }\n              )}\n            {/* {workshopVerify &&\n              workshopVerify.waitlistedParticipants &&\n              workshopVerify.waitlistedParticipants.map(\n                (participant, index) => {\n                  if (participant.studentPoints.length > 0) {\n                    const points = participant.studentPoints[0];\n                    let pointCategory = null;\n                    if (points.length > 0) {\n                      pointCategory = points.find(\n                        (point) => point.category === workshopVerify.name\n                      );\n                    }\n                    if (!pointCategory) {\n                      return (\n                        <>\n                          <TableRow key={index}>\n                            <TableCell component=\"th\" scope=\"row\">\n                              {participant.name}\n                            </TableCell>\n                            <TableCell>{participant.emailAddress}</TableCell>\n                            {\n                              <>\n                                <IconButton\n                                  edge=\"end\"\n                                  aria-label=\"download\"\n                                  disabled={promiseInProgress}\n                                >\n                                  <DoneIcon\n                                    onClick={() =>\n                                      verifyWorkshop(participant.studentId)\n                                    }\n                                  />\n                                </IconButton>\n                              </>\n                            }\n                          </TableRow>\n                        </>\n                      );\n                    }\n                  }\n                }\n              )} */}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}