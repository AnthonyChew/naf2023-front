{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\src\\\\ProgrammesPage\\\\SignupPopup.js\";\nimport React, { useState } from 'react';\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport { DialogActions } from '@material-ui/core';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Grid from '@material-ui/core/Grid';\nimport UserLogin from '../Authentication/UserLogin';\nimport workshopService from '../services/workshops';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { trackPromise } from 'react-promise-tracker';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { usePromiseTracker } from 'react-promise-tracker';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'relative',\n    margin: theme.spacing(3),\n    padding: theme.spacing(3)\n  },\n  bottomSeparator: {\n    marginBottom: theme.spacing(3)\n  },\n  actionButton: {\n    display: 'inline-block',\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(2)\n  },\n  acknowledgement: {\n    fontSize: '0.8rem'\n  }\n}));\nconst DialogContent = withStyles(theme => ({\n  root: {\n    position: 'relative',\n    margin: theme.spacing(3),\n    padding: theme.spacing(3),\n    border: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    // maxHeight: '60vh',\n    overflowY: 'auto'\n  },\n  [theme.breakpoints.down('md')]: {\n    root: {\n      // backgroundColor: 'pink',\n      flexDirection: 'row',\n      flexWrap: 'wrap'\n    }\n  },\n  [theme.breakpoints.down('xs')]: {\n    root: {\n      // backgroundColor: 'orange',\n      maxWidth: 'lg'\n    }\n  }\n}))(MuiDialogContent);\nexport default function SignupPopup(props) {\n  const {\n    workshop,\n    parentCallback\n  } = props;\n  const classes = useStyles();\n  const [state, setState] = useState({\n    name: '',\n    contactNumber: '',\n    emailAddress: '',\n    matricNumber: ''\n  });\n  const [auth, setAuth] = useState(true);\n  const [acknowledgement, setAcknowledgment] = useState(false);\n  const [helperText, setHelperText] = useState('');\n  const {\n    promiseInProgress\n  } = usePromiseTracker(); //DIALOG ACTIONS\n\n  const handleClose = isSuccess => {\n    parentCallback(isSuccess);\n  };\n\n  const handleChange = prop => event => {\n    setState({ ...state,\n      [prop]: event.target.value\n    });\n  };\n\n  const handleLoginClose = () => {\n    setAuth(true);\n  };\n\n  const signUpWorkshop = async event => {\n    event.preventDefault();\n\n    if (acknowledgement === false) {\n      setHelperText('Please indicate acknowledgement of terms and conditions.');\n    } else {\n      const res = await trackPromise(workshopService.signUpWorkshop(workshop._id, state));\n\n      if (res.status === 200) {\n        handleClose(true);\n      } else if (res.status === 401) {\n        setAuth(false);\n      } else if (res.status === 400) {\n        // console.log(res.data);\n        alert(res.data.error);\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !auth && /*#__PURE__*/React.createElement(UserLogin, {\n    parentCallback: handleLoginClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Dialog, {\n    onClose: () => handleClose(false),\n    \"aria-labelledby\": \"signup popup\",\n    open: true,\n    className: classes.root,\n    fullWidth: true,\n    maxWidth: \"md\" //or \"lg\"\n    ,\n    scroll: \"body\",\n    marginBottom: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DialogContent, {\n    dividers: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    autoComplete: \"off\",\n    onSubmit: signUpWorkshop,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.bottomSeparator,\n    variant: \"h5\",\n    component: \"h1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, workshop && workshop.name), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    autoFocus: true,\n    fullWidth: true,\n    color: \"secondary\",\n    required: true,\n    id: \"standard-required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    shrink: true,\n    htmlFor: \"component-simple\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, \"Full Name\"), /*#__PURE__*/React.createElement(Input, {\n    id: \"component-simple\",\n    color: \"secondary\",\n    value: state.name,\n    onChange: handleChange('name'),\n    inputProps: {\n      maxLength: 64\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    autoFocus: true,\n    fullWidth: true,\n    color: \"secondary\",\n    required: true,\n    id: \"standard-required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    shrink: true,\n    htmlFor: \"component-simple\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }, \"Contact No.\"), /*#__PURE__*/React.createElement(Input, {\n    id: \"component-simple\",\n    type: \"tel\",\n    inputProps: {\n      pattern: '^[0-9]+$',\n      // accepts digits only\n      maxLength: 15\n    } // max possible length of a phone number including the country code\n    ,\n    value: state.contactNumber,\n    onChange: handleChange('contactNumber'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    autoFocus: true,\n    fullWidth: true,\n    color: \"secondary\",\n    required: true,\n    id: \"standard-required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    shrink: true,\n    htmlFor: \"component-simple\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }, \"Email Address\"), /*#__PURE__*/React.createElement(Input, {\n    id: \"component-simple\",\n    type: \"email\" //inputProps={{ pattern: '^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$' }} // this pattern would allow some invalid gmails e.g. \"abc\"@gmail.com\n    ,\n    inputProps: {\n      maxLength: 64\n    },\n    value: state.emailAddress,\n    onChange: handleChange('emailAddress'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    autoFocus: true,\n    fullWidth: true,\n    color: \"secondary\",\n    required: true,\n    id: \"standard-required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    shrink: true,\n    htmlFor: \"component-simple\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 19\n    }\n  }, \"Matriculation Number/Staff ID\"), /*#__PURE__*/React.createElement(Input, {\n    id: \"component-simple\" //inputProps={{ pattern: '^U[0-9]{7}[A-Z]$' }} // accepts 'U' as the first character, then 7 [0-9] characters, then a character\n    ,\n    inputProps: {\n      pattern: '^[a-zA-Z0-9]+$',\n      // alphanumeric characters only\n      maxLength: 15\n    } // how long is a staff id lmao\n    ,\n    value: state.matricNumber,\n    onChange: handleChange('matricNumber'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    paragraph: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }\n  }, \"*This workshop is only available for NTU students/staff. Your identity will be confirmed on the day of the workshop.\"))), /*#__PURE__*/React.createElement(FormControl, {\n    component: \"fieldset\",\n    required: true,\n    style: {\n      marginTop: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    component: \"legend\",\n    color: \"secondary\",\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      checked: acknowledgement,\n      onChange: () => setAcknowledgment(!acknowledgement),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 19\n      }\n    }),\n    label: /*#__PURE__*/React.createElement(Typography, {\n      paragraph: true,\n      className: classes.acknowledgement,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 19\n      }\n    }, \"By submitting this form, I hereby agree that NTU Arts Festival may collect, obtain, store, process and share (with relevant third party) my personal data, that I provide in this form, for the purpose of their event.\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(FormHelperText, {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }, helperText), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: classes.actionButton,\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"secondary\",\n    disabled: promiseInProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 15\n    }\n  }, \"Sign Up\"), /*#__PURE__*/React.createElement(LoadingSpinnerComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: classes.actionButton,\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => handleClose(false),\n    disabled: promiseInProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }\n  }, \"Cancel\")))));\n}","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/ProgrammesPage/SignupPopup.js"],"names":["React","useState","withStyles","makeStyles","Button","Dialog","MuiDialogContent","Typography","DialogActions","FormControl","FormControlLabel","FormHelperText","Input","InputLabel","Grid","UserLogin","workshopService","Checkbox","trackPromise","LoadingSpinnerComponent","usePromiseTracker","useStyles","theme","root","position","margin","spacing","padding","bottomSeparator","marginBottom","actionButton","display","marginTop","marginRight","acknowledgement","fontSize","DialogContent","border","alignItems","overflowY","breakpoints","down","flexDirection","flexWrap","maxWidth","SignupPopup","props","workshop","parentCallback","classes","state","setState","name","contactNumber","emailAddress","matricNumber","auth","setAuth","setAcknowledgment","helperText","setHelperText","promiseInProgress","handleClose","isSuccess","handleChange","prop","event","target","value","handleLoginClose","signUpWorkshop","preventDefault","res","_id","status","alert","data","error","maxLength","pattern","color"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport { DialogActions } from '@material-ui/core';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Grid from '@material-ui/core/Grid';\nimport UserLogin from '../Authentication/UserLogin';\nimport workshopService from '../services/workshops';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { trackPromise } from 'react-promise-tracker';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { usePromiseTracker } from 'react-promise-tracker';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'relative',\n    margin: theme.spacing(3),\n    padding: theme.spacing(3),\n  },\n  bottomSeparator: {\n    marginBottom: theme.spacing(3),\n  },\n  actionButton: {\n    display: 'inline-block',\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(2),\n  },\n  acknowledgement: {\n    fontSize: '0.8rem',\n  },\n}));\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    position: 'relative',\n    margin: theme.spacing(3),\n    padding: theme.spacing(3),\n    border: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    // maxHeight: '60vh',\n    overflowY: 'auto',\n  },\n  [theme.breakpoints.down('md')]: {\n    root: {\n      // backgroundColor: 'pink',\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n    },\n  },\n  [theme.breakpoints.down('xs')]: {\n    root: {\n      // backgroundColor: 'orange',\n      maxWidth: 'lg',\n    },\n  },\n}))(MuiDialogContent);\n\nexport default function SignupPopup(props) {\n  const { workshop, parentCallback } = props;\n  const classes = useStyles();\n  const [state, setState] = useState({\n    name: '',\n    contactNumber: '',\n    emailAddress: '',\n    matricNumber: '',\n  });\n  const [auth, setAuth] = useState(true);\n  const [acknowledgement, setAcknowledgment] = useState(false);\n  const [helperText, setHelperText] = useState('');\n  const { promiseInProgress } = usePromiseTracker();\n\n  //DIALOG ACTIONS\n  const handleClose = (isSuccess) => {\n    parentCallback(isSuccess);\n  };\n\n  const handleChange = (prop) => (event) => {\n    setState({ ...state, [prop]: event.target.value });\n  };\n\n  const handleLoginClose = () => {\n    setAuth(true);\n  };\n\n  const signUpWorkshop = async (event) => {\n    event.preventDefault();\n    if (acknowledgement === false) {\n      setHelperText('Please indicate acknowledgement of terms and conditions.');\n    } else {\n      const res = await trackPromise(\n        workshopService.signUpWorkshop(workshop._id, state)\n      );\n      if (res.status === 200) {\n        handleClose(true);\n      } else if (res.status === 401) {\n        setAuth(false);\n      } else if (res.status === 400) {\n        // console.log(res.data);\n        alert(res.data.error);\n      }\n    }\n  };\n\n  return (\n    <>\n      {!auth && <UserLogin parentCallback={handleLoginClose} />}\n      <Dialog\n        onClose={() => handleClose(false)}\n        aria-labelledby=\"signup popup\"\n        open={true}\n        className={classes.root}\n        fullWidth={true}\n        maxWidth=\"md\" //or \"lg\"\n        scroll=\"body\"\n        marginBottom=\"5\"\n      >\n        <DialogContent dividers>\n          <form autoComplete=\"off\" onSubmit={signUpWorkshop}>\n            <Typography\n              className={classes.bottomSeparator}\n              variant=\"h5\"\n              component=\"h1\"\n            >\n              {workshop && workshop.name}\n            </Typography>\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <FormControl\n                  autoFocus\n                  fullWidth\n                  color=\"secondary\"\n                  required\n                  id=\"standard-required\"\n                >\n                  <InputLabel\n                    shrink\n                    htmlFor=\"component-simple\"\n                    color=\"secondary\"\n                  >\n                    Full Name\n                  </InputLabel>\n                  <Input\n                    id=\"component-simple\"\n                    color=\"secondary\"\n                    value={state.name}\n                    onChange={handleChange('name')}\n                    inputProps={{ maxLength: 64 }}\n                  />\n                </FormControl>\n              </Grid>\n              <Grid item xs={12}>\n                <FormControl\n                  autoFocus\n                  fullWidth\n                  color=\"secondary\"\n                  required\n                  id=\"standard-required\"\n                >\n                  <InputLabel shrink htmlFor=\"component-simple\">\n                    Contact No.\n                  </InputLabel>\n                  <Input\n                    id=\"component-simple\"\n                    type=\"tel\"\n                    inputProps={{\n                      pattern: '^[0-9]+$', // accepts digits only\n                      maxLength: 15,\n                    }} // max possible length of a phone number including the country code\n                    value={state.contactNumber}\n                    onChange={handleChange('contactNumber')}\n                  />\n                </FormControl>\n              </Grid>\n              <Grid item xs={12}>\n                <FormControl\n                  autoFocus\n                  fullWidth\n                  color=\"secondary\"\n                  required\n                  id=\"standard-required\"\n                >\n                  <InputLabel shrink htmlFor=\"component-simple\">\n                    Email Address\n                  </InputLabel>\n                  <Input\n                    id=\"component-simple\"\n                    type=\"email\"\n                    //inputProps={{ pattern: '^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$' }} // this pattern would allow some invalid gmails e.g. \"abc\"@gmail.com\n                    inputProps={{ maxLength: 64 }}\n                    value={state.emailAddress}\n                    onChange={handleChange('emailAddress')}\n                  />\n                </FormControl>\n              </Grid>\n              <Grid item xs={12}>\n                <FormControl\n                  autoFocus\n                  fullWidth\n                  color=\"secondary\"\n                  required\n                  id=\"standard-required\"\n                >\n                  <InputLabel shrink htmlFor=\"component-simple\">\n                    Matriculation Number/Staff ID\n                  </InputLabel>\n                  <Input\n                    id=\"component-simple\"\n                    //inputProps={{ pattern: '^U[0-9]{7}[A-Z]$' }} // accepts 'U' as the first character, then 7 [0-9] characters, then a character\n                    inputProps={{\n                      pattern: '^[a-zA-Z0-9]+$', // alphanumeric characters only\n                      maxLength: 15,\n                    }} // how long is a staff id lmao\n                    value={state.matricNumber}\n                    onChange={handleChange('matricNumber')}\n                  />\n                </FormControl>\n              </Grid>\n              <Grid item xs={12}>\n                <Typography paragraph>\n                  *This workshop is only available for NTU students/staff. Your\n                  identity will be confirmed on the day of the workshop.\n                </Typography>\n              </Grid>\n            </Grid>\n            <FormControl\n              component=\"fieldset\"\n              required\n              style={{ marginTop: 15 }}\n            >\n              <FormControlLabel\n                component=\"legend\"\n                color=\"secondary\"\n                control={\n                  <Checkbox\n                    checked={acknowledgement}\n                    onChange={() => setAcknowledgment(!acknowledgement)}\n                  />\n                }\n                label={\n                  <Typography paragraph className={classes.acknowledgement}>\n                    By submitting this form, I hereby agree that NTU Arts\n                    Festival may collect, obtain, store, process and share (with\n                    relevant third party) my personal data, that I provide in\n                    this form, for the purpose of their event.\n                  </Typography>\n                }\n              />\n            </FormControl>\n            <FormHelperText style={{ color: 'red' }}>\n              {helperText}\n            </FormHelperText>\n            <div>\n              <Button\n                className={classes.actionButton}\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"secondary\"\n                disabled={promiseInProgress}\n              >\n                Sign Up\n              </Button>\n              <LoadingSpinnerComponent />\n            </div>\n          </form>\n        </DialogContent>\n        <DialogActions>\n          <div>\n            <Button\n              className={classes.actionButton}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => handleClose(false)}\n              disabled={promiseInProgress}\n            >\n              Cancel\n            </Button>\n          </div>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}