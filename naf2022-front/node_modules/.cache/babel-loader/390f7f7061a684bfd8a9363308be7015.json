{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\src\\\\ProfilePage\\\\UserWorkshop.js\";\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useState } from 'react';\nimport ContestCard from './ContestCard';\nimport Button from '@material-ui/core/Button';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport workshopService from '../services/workshops';\nimport WaitlistedWorkshops from './WaitlistedWorkshops';\nimport { useHistory, Link } from 'react-router-dom';\nimport ConfirmationDialog from '../Components/ConfirmationDialog'; // import { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\n\nimport { trackPromise } from 'react-promise-tracker';\nimport { usePromiseTracker } from 'react-promise-tracker'; // create animations https://www.youtube.com/watch?v=JcHLxzrsRS4\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n    paddingTop: theme.spacing(3),\n    maxWidth: '80%',\n    margin: 'auto'\n  },\n  paddedItem: {\n    padding: theme.spacing(3)\n  }\n}));\n\nfunction UserWorkshop(props) {\n  const classes = useStyles();\n  const history = useHistory();\n  const {\n    waitlistedWorkshops,\n    registeredWorkshops\n  } = props;\n  const [open, setOpen] = useState(false);\n  const [regWorkshop, setWorkshopCancel] = useState(null);\n\n  const handleClickOpen = workshopId => {\n    setWorkshopCancel(workshopId);\n    setOpen(true);\n  }; //FIXME rename to workshop card\n\n\n  const handleClose = workshopIdBump => {\n    setOpen(false);\n    cancelRegisteredWorkshop(regWorkshop, workshopIdBump);\n  };\n\n  const cancelWaitlistedWorkshop = async workshopId => {\n    const res = await trackPromise(workshopService.unregisterWaitlistWorkshop(workshopId));\n\n    if (res.status === 200) {\n      history.go(0);\n    }\n  };\n\n  const cancelRegisteredWorkshop = async (regWorkshop, workshopToBump) => {\n    const res = await trackPromise(workshopService.unregisterRegisterWorkshop(regWorkshop, workshopToBump));\n\n    if (res.status === 200) {\n      history.go(0);\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const [confirmCancel, setConfirmCancel] = useState(false);\n\n  const handleConfirmCancel = () => {\n    setConfirmCancel(true);\n  };\n\n  const [selectedWorkshop, setSelectedWorkshop] = useState(false);\n\n  const handleSelectWorkshop = workshop => {\n    setSelectedWorkshop(workshop);\n  };\n\n  const [registered, setRegistered] = useState(false);\n  const {\n    promiseInProgress\n  } = usePromiseTracker();\n\n  const handleRegistered = type => {\n    setRegistered(type);\n  };\n\n  const handleDialogResult = continueAction => {\n    setConfirmCancel(false);\n\n    if (continueAction) {\n      if (registered) {\n        if (waitlistedWorkshops.length === 0 || selectedWorkshop.name.substring(0, 24) === 'Arts Community Open Talk' || !waitlistedWorkshops.find(workshop => workshop.numRegistered < workshop.maxParticipants)) {\n          cancelRegisteredWorkshop(selectedWorkshop._id, null);\n        } else {\n          handleClickOpen(selectedWorkshop._id);\n        }\n      } else {\n        cancelWaitlistedWorkshop(selectedWorkshop._id);\n      }\n    }\n  };\n\n  function onClickCancelReg(workshop) {\n    handleConfirmCancel();\n    handleSelectWorkshop(workshop);\n    handleRegistered(true);\n  }\n\n  function onClickCancelWait(workshop) {\n    handleConfirmCancel();\n    handleSelectWorkshop(workshop);\n    handleRegistered(false);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, open && /*#__PURE__*/React.createElement(WaitlistedWorkshops, {\n    parentCallback: handleClose,\n    workshops: waitlistedWorkshops,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }), confirmCancel && /*#__PURE__*/React.createElement(ConfirmationDialog //callback\n  , {\n    title: \"Cancel Workshop?\",\n    content: \"You will be removed from this workshop. This action cannot be undone.\",\n    parentCallback: handleDialogResult,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.paddedItem,\n    variant: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, \"CONFIRMED WORKSHOPS\"), registeredWorkshops && registeredWorkshops.length === 0 ? /*#__PURE__*/React.createElement(Typography, {\n    paragraph: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, \"You have not registered for any workshops. \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 54\n    }\n  }), \"Take a look at our available workshops\", ' ', /*#__PURE__*/React.createElement(Link, {\n    to: \"/Oasis\",\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, \"here\"), \"!\") : registeredWorkshops && registeredWorkshops.map((workshop, index) => {\n    let imageFile;\n\n    if (workshop.images.length > 0) {\n      imageFile = workshop.images[0];\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ContestCard, {\n      key: index,\n      name: workshop.name,\n      image: imageFile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      className: classes.button,\n      startIcon: /*#__PURE__*/React.createElement(DeleteIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 28\n        }\n      }),\n      onClick: () => onClickCancelReg(workshop),\n      disabled: promiseInProgress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }\n    }, \"Cancel\"));\n  }), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.paddedItem,\n    variant: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }, \"WAITLISTED WORKSHOPS\"), waitlistedWorkshops && waitlistedWorkshops.length === 0 ? /*#__PURE__*/React.createElement(Typography, {\n    paragraph: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, \"You are not waitlisted for any workshops.\") : waitlistedWorkshops && waitlistedWorkshops.map((workshop, index) => {\n    let imageFile;\n\n    if (workshop.images.length > 0) {\n      imageFile = workshop.images[0];\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ContestCard, {\n      key: index,\n      name: workshop.name,\n      image: imageFile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      className: classes.button,\n      startIcon: /*#__PURE__*/React.createElement(DeleteIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 28\n        }\n      }),\n      onClick: () => onClickCancelWait(workshop),\n      disabled: promiseInProgress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 15\n      }\n    }, \"Cancel\"));\n  }));\n}\n\nexport default UserWorkshop;","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/ProfilePage/UserWorkshop.js"],"names":["Typography","makeStyles","React","useState","ContestCard","Button","DeleteIcon","workshopService","WaitlistedWorkshops","useHistory","Link","ConfirmationDialog","trackPromise","usePromiseTracker","useStyles","theme","root","textAlign","paddingTop","spacing","maxWidth","margin","paddedItem","padding","UserWorkshop","props","classes","history","waitlistedWorkshops","registeredWorkshops","open","setOpen","regWorkshop","setWorkshopCancel","handleClickOpen","workshopId","handleClose","workshopIdBump","cancelRegisteredWorkshop","cancelWaitlistedWorkshop","res","unregisterWaitlistWorkshop","status","go","workshopToBump","unregisterRegisterWorkshop","alert","data","error","confirmCancel","setConfirmCancel","handleConfirmCancel","selectedWorkshop","setSelectedWorkshop","handleSelectWorkshop","workshop","registered","setRegistered","promiseInProgress","handleRegistered","type","handleDialogResult","continueAction","length","name","substring","find","numRegistered","maxParticipants","_id","onClickCancelReg","onClickCancelWait","map","index","imageFile","images","button"],"mappings":"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","sourcesContent":["import Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useState } from 'react';\nimport ContestCard from './ContestCard';\nimport Button from '@material-ui/core/Button';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport workshopService from '../services/workshops';\nimport WaitlistedWorkshops from './WaitlistedWorkshops';\nimport { useHistory, Link } from 'react-router-dom';\nimport ConfirmationDialog from '../Components/ConfirmationDialog';\n// import { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { trackPromise } from 'react-promise-tracker';\nimport { usePromiseTracker } from 'react-promise-tracker';\n\n// create animations https://www.youtube.com/watch?v=JcHLxzrsRS4\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    textAlign: 'center',\n    paddingTop: theme.spacing(3),\n    maxWidth: '80%',\n    margin: 'auto',\n  },\n  paddedItem: {\n    padding: theme.spacing(3),\n  },\n}));\n\nfunction UserWorkshop(props) {\n  const classes = useStyles();\n  const history = useHistory();\n  const { waitlistedWorkshops, registeredWorkshops } = props;\n  const [open, setOpen] = useState(false);\n  const [regWorkshop, setWorkshopCancel] = useState(null);\n\n  const handleClickOpen = (workshopId) => {\n    setWorkshopCancel(workshopId);\n    setOpen(true);\n  };\n  //FIXME rename to workshop card\n  const handleClose = (workshopIdBump) => {\n    setOpen(false);\n    cancelRegisteredWorkshop(regWorkshop, workshopIdBump);\n  };\n\n  const cancelWaitlistedWorkshop = async (workshopId) => {\n    const res = await trackPromise(\n      workshopService.unregisterWaitlistWorkshop(workshopId)\n    );\n    if (res.status === 200) {\n      history.go(0);\n    }\n  };\n\n  const cancelRegisteredWorkshop = async (regWorkshop, workshopToBump) => {\n    const res = await trackPromise(\n      workshopService.unregisterRegisterWorkshop(regWorkshop, workshopToBump)\n    );\n    if (res.status === 200) {\n      history.go(0);\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const [confirmCancel, setConfirmCancel] = useState(false);\n\n  const handleConfirmCancel = () => {\n    setConfirmCancel(true);\n  };\n\n  const [selectedWorkshop, setSelectedWorkshop] = useState(false);\n\n  const handleSelectWorkshop = (workshop) => {\n    setSelectedWorkshop(workshop);\n  };\n\n  const [registered, setRegistered] = useState(false);\n\n  const { promiseInProgress } = usePromiseTracker();\n\n  const handleRegistered = (type) => {\n    setRegistered(type);\n  };\n\n  const handleDialogResult = (continueAction) => {\n    setConfirmCancel(false);\n    if (continueAction) {\n      if (registered) {\n        if (\n          waitlistedWorkshops.length === 0 ||\n          selectedWorkshop.name.substring(0, 24) ===\n            'Arts Community Open Talk' ||\n          !waitlistedWorkshops.find(\n            (workshop) => workshop.numRegistered < workshop.maxParticipants\n          )\n        ) {\n          cancelRegisteredWorkshop(selectedWorkshop._id, null);\n        } else {\n          handleClickOpen(selectedWorkshop._id);\n        }\n      } else {\n        cancelWaitlistedWorkshop(selectedWorkshop._id);\n      }\n    }\n  };\n\n  function onClickCancelReg(workshop) {\n    handleConfirmCancel();\n    handleSelectWorkshop(workshop);\n    handleRegistered(true);\n  }\n\n  function onClickCancelWait(workshop) {\n    handleConfirmCancel();\n    handleSelectWorkshop(workshop);\n    handleRegistered(false);\n  }\n\n  return (\n    <div className={classes.root}>\n      {open && (\n        <WaitlistedWorkshops\n          parentCallback={handleClose}\n          workshops={waitlistedWorkshops}\n        />\n      )}\n      {confirmCancel && (\n        <ConfirmationDialog\n          //callback\n          title=\"Cancel Workshop?\"\n          content=\"You will be removed from this workshop. This action cannot be undone.\"\n          parentCallback={handleDialogResult}\n        />\n      )}\n      <Typography className={classes.paddedItem} variant=\"h4\">\n        CONFIRMED WORKSHOPS\n      </Typography>\n      {registeredWorkshops && registeredWorkshops.length === 0 ? (\n        <Typography paragraph>\n          You have not registered for any workshops. <br></br>Take a look at our\n          available workshops{' '}\n          <Link to=\"/Oasis\" variant=\"contained\">\n            here\n          </Link>\n          !\n        </Typography>\n      ) : (\n        registeredWorkshops &&\n        registeredWorkshops.map((workshop, index) => {\n          let imageFile;\n          if (workshop.images.length > 0) {\n            imageFile = workshop.images[0];\n          }\n          return (\n            <>\n              <ContestCard key={index} name={workshop.name} image={imageFile} />\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                className={classes.button}\n                startIcon={<DeleteIcon />}\n                onClick={() => onClickCancelReg(workshop)}\n                disabled={promiseInProgress}\n              >\n                Cancel\n              </Button>\n            </>\n          );\n        })\n      )}\n      <Typography className={classes.paddedItem} variant=\"h4\">\n        WAITLISTED WORKSHOPS\n      </Typography>\n      {waitlistedWorkshops && waitlistedWorkshops.length === 0 ? (\n        <Typography paragraph>\n          You are not waitlisted for any workshops.\n        </Typography>\n      ) : (\n        waitlistedWorkshops &&\n        waitlistedWorkshops.map((workshop, index) => {\n          let imageFile;\n          if (workshop.images.length > 0) {\n            imageFile = workshop.images[0];\n          }\n          return (\n            <>\n              <ContestCard key={index} name={workshop.name} image={imageFile} />\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                className={classes.button}\n                startIcon={<DeleteIcon />}\n                onClick={() => onClickCancelWait(workshop)}\n                disabled={promiseInProgress}\n              >\n                Cancel\n              </Button>\n            </>\n          );\n        })\n      )}\n    </div>\n  );\n}\n\nexport default UserWorkshop;\n"]},"metadata":{},"sourceType":"module"}