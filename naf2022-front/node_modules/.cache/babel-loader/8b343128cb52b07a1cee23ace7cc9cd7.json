{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\src\\\\HomePage\\\\DonationTracker.js\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport donationService from '../services/donations';\nimport { useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n    position: 'relative',\n    paddingBottom: 100\n  },\n  bar: {\n    width: '95vw',\n    display: 'inline-flex',\n    borderRadius: '50px',\n    overflow: 'hidden' // alignItems: 'center',\n    // justifyContent: 'center',\n\n  },\n  section: {\n    '&:hover': {\n      filter: 'brightness(105%)'\n    },\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center'\n  },\n  [theme.breakpoints.down('sm')]: {\n    bar: {\n      flexDirection: 'column',\n      height: '140vh',\n      width: '50vw'\n    }\n  },\n  [theme.breakpoints.up('lg')]: {\n    bar: {\n      width: '80vw'\n    }\n  }\n}));\nexport default function DonationTracker(props) {\n  const classes = useStyles();\n  const [sections, setSections] = useState([]);\n  let colours = ['#FED92F', '#F8B03E', '#F2874C', '#D2536A', '#B11F87', '#5F497D', '#0C7373', '#228080'];\n  useEffect(() => {\n    async function fetchData() {\n      const res = await donationService.getDonations();\n\n      if (res.status === 200) {\n        setSections(res.data);\n      } //  else {\n      //   alert('Error loading donations :(');\n      // }\n\n    }\n\n    fetchData();\n  }, []);\n  const total = sections.reduce(function (accumulator, currentValue) {\n    return accumulator + currentValue.amount;\n  }, 0);\n  const theme = useTheme();\n  const isSmScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n  function dynamicStyling(section, index) {\n    return isSmScreen ? {\n      height: `${section.amount / total * 200}%`,\n      backgroundColor: colours[index],\n      textAlign: 'center'\n    } : {\n      width: `${section.amount / total * 100}%`,\n      backgroundColor: colours[index],\n      textAlign: 'center'\n    };\n  } // https://stackoverflow.com/questions/36577205/what-is-the-elegant-way-to-get-the-latest-date-from-array-of-objects-in-client-s\n\n\n  const lastUpdated = new Date(Math.max(...sections.map(section => new Date(section.last_updated))));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    style: {\n      paddingTop: \"120px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    variant: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, \"Total Donations Collected:\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, \"$\", total.toFixed(2)), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.bar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, sections.map((section, index) => /*#__PURE__*/React.createElement(React.Fragment, null, section.amount > 0 && /*#__PURE__*/React.createElement(Tooltip, {\n    title: section.description,\n    \"aria-label\": section.description,\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.section,\n    style: dynamicStyling(section, index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }, section.name), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, \"$\", section.amount.toFixed(2))))))), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, \"Updated as of: \", lastUpdated.toLocaleString('en-GB')));\n}","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/HomePage/DonationTracker.js"],"names":["React","useState","useEffect","makeStyles","Typography","Tooltip","donationService","useTheme","useMediaQuery","useStyles","theme","root","textAlign","position","paddingBottom","bar","width","display","borderRadius","overflow","section","filter","flexDirection","justifyContent","breakpoints","down","height","up","DonationTracker","props","classes","sections","setSections","colours","fetchData","res","getDonations","status","data","total","reduce","accumulator","currentValue","amount","isSmScreen","dynamicStyling","index","backgroundColor","lastUpdated","Date","Math","max","map","last_updated","paddingTop","toFixed","description","fontWeight","name","toLocaleString"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,eAAP,MAA4B,uBAA5B;AACA,SAASC,QAAT,QAAyB,0BAAzB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AAEA,MAAMC,SAAS,GAAGN,UAAU,CAAEO,KAAD,KAAY;AACvCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,SAAS,EAAE,QADP;AAEJC,IAAAA,QAAQ,EAAE,UAFN;AAGJC,IAAAA,aAAa,EAAE;AAHX,GADiC;AAMvCC,EAAAA,GAAG,EAAE;AACHC,IAAAA,KAAK,EAAE,MADJ;AAEHC,IAAAA,OAAO,EAAE,aAFN;AAGHC,IAAAA,YAAY,EAAE,MAHX;AAIHC,IAAAA,QAAQ,EAAE,QAJP,CAKH;AACA;;AANG,GANkC;AAcvCC,EAAAA,OAAO,EAAE;AACP,eAAW;AACTC,MAAAA,MAAM,EAAE;AADC,KADJ;AAIPJ,IAAAA,OAAO,EAAE,MAJF;AAKPK,IAAAA,aAAa,EAAE,QALR;AAMPC,IAAAA,cAAc,EAAE;AANT,GAd8B;AAsBvC,GAACb,KAAK,CAACc,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,GAAgC;AAC9BV,IAAAA,GAAG,EAAE;AACHO,MAAAA,aAAa,EAAE,QADZ;AAEHI,MAAAA,MAAM,EAAE,OAFL;AAGHV,MAAAA,KAAK,EAAE;AAHJ;AADyB,GAtBO;AA6BvC,GAACN,KAAK,CAACc,WAAN,CAAkBG,EAAlB,CAAqB,IAArB,CAAD,GAA8B;AAC5BZ,IAAAA,GAAG,EAAE;AACHC,MAAAA,KAAK,EAAE;AADJ;AADuB;AA7BS,CAAZ,CAAD,CAA5B;AAoCA,eAAe,SAASY,eAAT,CAAyBC,KAAzB,EAAgC;AAC7C,QAAMC,OAAO,GAAGrB,SAAS,EAAzB;AACA,QAAM,CAACsB,QAAD,EAAWC,WAAX,IAA0B/B,QAAQ,CAAC,EAAD,CAAxC;AACA,MAAIgC,OAAO,GAAG,CACZ,SADY,EAEZ,SAFY,EAGZ,SAHY,EAIZ,SAJY,EAKZ,SALY,EAMZ,SANY,EAOZ,SAPY,EAQZ,SARY,CAAd;AAWA/B,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAegC,SAAf,GAA2B;AACzB,YAAMC,GAAG,GAAG,MAAM7B,eAAe,CAAC8B,YAAhB,EAAlB;;AACA,UAAID,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;AACtBL,QAAAA,WAAW,CAACG,GAAG,CAACG,IAAL,CAAX;AACD,OAJwB,CAKzB;AACA;AACA;;AACD;;AACDJ,IAAAA,SAAS;AACV,GAXQ,EAWN,EAXM,CAAT;AAaA,QAAMK,KAAK,GAAGR,QAAQ,CAACS,MAAT,CAAgB,UAAUC,WAAV,EAAuBC,YAAvB,EAAqC;AACjE,WAAOD,WAAW,GAAGC,YAAY,CAACC,MAAlC;AACD,GAFa,EAEX,CAFW,CAAd;AAIA,QAAMjC,KAAK,GAAGH,QAAQ,EAAtB;AACA,QAAMqC,UAAU,GAAGpC,aAAa,CAACE,KAAK,CAACc,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,CAAhC;;AAEA,WAASoB,cAAT,CAAwBzB,OAAxB,EAAiC0B,KAAjC,EAAwC;AACtC,WAAOF,UAAU,GACb;AACElB,MAAAA,MAAM,EAAG,GAAGN,OAAO,CAACuB,MAAR,GAAiBJ,KAAlB,GAA2B,GAAI,GAD5C;AAEEQ,MAAAA,eAAe,EAAEd,OAAO,CAACa,KAAD,CAF1B;AAGElC,MAAAA,SAAS,EAAE;AAHb,KADa,GAMb;AACEI,MAAAA,KAAK,EAAG,GAAGI,OAAO,CAACuB,MAAR,GAAiBJ,KAAlB,GAA2B,GAAI,GAD3C;AAEEQ,MAAAA,eAAe,EAAEd,OAAO,CAACa,KAAD,CAF1B;AAGElC,MAAAA,SAAS,EAAE;AAHb,KANJ;AAWD,GA9C4C,CAgD7C;;;AACA,QAAMoC,WAAW,GAAG,IAAIC,IAAJ,CAClBC,IAAI,CAACC,GAAL,CAAS,GAAGpB,QAAQ,CAACqB,GAAT,CAAchC,OAAD,IAAa,IAAI6B,IAAJ,CAAS7B,OAAO,CAACiC,YAAjB,CAA1B,CAAZ,CADkB,CAApB;AAIA,sBACE;AAAK,IAAA,SAAS,EAAEvB,OAAO,CAACnB,IAAxB;AAA8B,IAAA,KAAK,EAAE;AAAC2C,MAAAA,UAAU,EAAC;AAAZ,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAC,QAAlB;AAA2B,IAAA,OAAO,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,eAIE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA2Bf,KAAK,CAACgB,OAAN,CAAc,CAAd,CAA3B,CAJF,eAKE;AAAK,IAAA,SAAS,EAAEzB,OAAO,CAACf,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGgB,QAAQ,CAACqB,GAAT,CAAa,CAAChC,OAAD,EAAU0B,KAAV,kBACZ,0CACG1B,OAAO,CAACuB,MAAR,GAAiB,CAAjB,iBACC,oBAAC,OAAD;AACE,IAAA,KAAK,EAAEvB,OAAO,CAACoC,WADjB;AAEE,kBAAYpC,OAAO,CAACoC,WAFtB;AAGE,IAAA,GAAG,EAAEV,KAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE;AACE,IAAA,SAAS,EAAEhB,OAAO,CAACV,OADrB;AAEE,IAAA,KAAK,EAAEyB,cAAc,CAACzB,OAAD,EAAU0B,KAAV,CAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE,oBAAC,UAAD;AACE,IAAA,OAAO,EAAC,WADV;AAEE,IAAA,KAAK,EAAE;AAAEW,MAAAA,UAAU,EAAE;AAAd,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIGrC,OAAO,CAACsC,IAJX,CAJF,eAUE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UACItC,OAAO,CAACuB,MAAR,CAAeY,OAAf,CAAuB,CAAvB,CADJ,CAVF,CALF,CAFJ,CADD,CADH,CALF,eAiCE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACkBP,WAAW,CAACW,cAAZ,CAA2B,OAA3B,CADlB,CAjCF,CADF;AAuCD","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport donationService from '../services/donations';\nimport { useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    textAlign: 'center',\n    position: 'relative',\n    paddingBottom: 100,\n  },\n  bar: {\n    width: '95vw',\n    display: 'inline-flex',\n    borderRadius: '50px',\n    overflow: 'hidden',\n    // alignItems: 'center',\n    // justifyContent: 'center',\n  },\n  section: {\n    '&:hover': {\n      filter: 'brightness(105%)',\n    },\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n  },\n  [theme.breakpoints.down('sm')]: {\n    bar: {\n      flexDirection: 'column',\n      height: '140vh',\n      width: '50vw',\n    },\n  },\n  [theme.breakpoints.up('lg')]: {\n    bar: {\n      width: '80vw',\n    },\n  },\n}));\n\nexport default function DonationTracker(props) {\n  const classes = useStyles();\n  const [sections, setSections] = useState([]);\n  let colours = [\n    '#FED92F',\n    '#F8B03E',\n    '#F2874C',\n    '#D2536A',\n    '#B11F87',\n    '#5F497D',\n    '#0C7373',\n    '#228080',\n  ];\n\n  useEffect(() => {\n    async function fetchData() {\n      const res = await donationService.getDonations();\n      if (res.status === 200) {\n        setSections(res.data);\n      }\n      //  else {\n      //   alert('Error loading donations :(');\n      // }\n    }\n    fetchData();\n  }, []);\n\n  const total = sections.reduce(function (accumulator, currentValue) {\n    return accumulator + currentValue.amount;\n  }, 0);\n\n  const theme = useTheme();\n  const isSmScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n  function dynamicStyling(section, index) {\n    return isSmScreen\n      ? {\n          height: `${(section.amount / total) * 200}%`,\n          backgroundColor: colours[index],\n          textAlign: 'center',\n        }\n      : {\n          width: `${(section.amount / total) * 100}%`,\n          backgroundColor: colours[index],\n          textAlign: 'center',\n        };\n  }\n\n  // https://stackoverflow.com/questions/36577205/what-is-the-elegant-way-to-get-the-latest-date-from-array-of-objects-in-client-s\n  const lastUpdated = new Date(\n    Math.max(...sections.map((section) => new Date(section.last_updated)))\n  );\n\n  return (\n    <div className={classes.root} style={{paddingTop:\"120px\"}}>\n      <Typography align=\"center\" variant=\"h4\">\n        Total Donations Collected:\n      </Typography>\n      <Typography variant=\"h5\">${total.toFixed(2)}</Typography>\n      <div className={classes.bar}>\n        {sections.map((section, index) => (\n          <>\n            {section.amount > 0 && (\n              <Tooltip\n                title={section.description}\n                aria-label={section.description}\n                key={index}\n              >\n                <div\n                  className={classes.section}\n                  style={dynamicStyling(section, index)}\n                >\n                  <Typography\n                    variant=\"subtitle1\"\n                    style={{ fontWeight: 'bold' }}\n                  >\n                    {section.name}\n                  </Typography>\n                  <Typography variant=\"subtitle2\">\n                    ${section.amount.toFixed(2)}\n                  </Typography>\n                </div>\n              </Tooltip>\n            )}\n          </>\n        ))}\n      </div>\n      <Typography variant=\"subtitle1\">\n        Updated as of: {lastUpdated.toLocaleString('en-GB')}\n      </Typography>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}