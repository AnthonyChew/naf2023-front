{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _defineProperty from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import React,{useState}from'react';import{withStyles,makeStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import MuiDialogContent from'@material-ui/core/DialogContent';import Typography from'@material-ui/core/Typography';import{DialogActions}from'@material-ui/core';import FormControl from'@material-ui/core/FormControl';import FormControlLabel from'@material-ui/core/FormControlLabel';import FormHelperText from'@material-ui/core/FormHelperText';import Input from'@material-ui/core/Input';import InputLabel from'@material-ui/core/InputLabel';import Grid from'@material-ui/core/Grid';import UserLogin from'../Authentication/UserLogin';import workshopService from'../services/workshops';import Checkbox from'@material-ui/core/Checkbox';import{trackPromise}from'react-promise-tracker';import{LoadingSpinnerComponent}from'../utils/LoadingSpinnerComponent';import{usePromiseTracker}from'react-promise-tracker';var useStyles=makeStyles(function(theme){return{root:{position:'relative',margin:theme.spacing(3),padding:theme.spacing(3)},bottomSeparator:{marginBottom:theme.spacing(3)},actionButton:{display:'inline-block',marginTop:theme.spacing(1),marginRight:theme.spacing(2)},acknowledgement:{fontSize:'0.8rem'}};});var DialogContent=withStyles(function(theme){var _ref;return _ref={root:{position:'relative',margin:theme.spacing(3),padding:theme.spacing(3),border:'none',display:'flex',alignItems:'center',// maxHeight: '60vh',\noverflowY:'auto'}},_defineProperty(_ref,theme.breakpoints.down('md'),{root:{// backgroundColor: 'pink',\nflexDirection:'row',flexWrap:'wrap'}}),_defineProperty(_ref,theme.breakpoints.down('xs'),{root:{// backgroundColor: 'orange',\nmaxWidth:'lg'}}),_ref;})(MuiDialogContent);export default function SignupPopup(props){var workshop=props.workshop,parentCallback=props.parentCallback;var classes=useStyles();var _useState=useState({name:'',contactNumber:'',emailAddress:'',matricNumber:''}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),auth=_useState4[0],setAuth=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),acknowledgement=_useState6[0],setAcknowledgment=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),helperText=_useState8[0],setHelperText=_useState8[1];var _usePromiseTracker=usePromiseTracker(),promiseInProgress=_usePromiseTracker.promiseInProgress;//DIALOG ACTIONS\nvar handleClose=function handleClose(isSuccess){parentCallback(isSuccess);};var handleChange=function handleChange(prop){return function(event){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},prop,event.target.value)));};};var handleLoginClose=function handleLoginClose(){setAuth(true);};var signUpWorkshop=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(acknowledgement===false)){_context.next=5;break;}setHelperText('Please indicate acknowledgement of terms and conditions.');_context.next=9;break;case 5:_context.next=7;return trackPromise(workshopService.signUpWorkshop(workshop._id,state));case 7:res=_context.sent;if(res.status===200){handleClose(true);}else if(res.status===401){setAuth(false);}else if(res.status===400){// console.log(res.data);\nalert(res.data.error);}case 9:case\"end\":return _context.stop();}}},_callee);}));return function signUpWorkshop(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,!auth&&/*#__PURE__*/React.createElement(UserLogin,{parentCallback:handleLoginClose}),/*#__PURE__*/React.createElement(Dialog,{onClose:function onClose(){return handleClose(false);},\"aria-labelledby\":\"signup popup\",open:true,className:classes.root,fullWidth:true,maxWidth:\"md\"//or \"lg\"\n,scroll:\"body\",marginBottom:\"5\"},/*#__PURE__*/React.createElement(DialogContent,{dividers:true},/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",onSubmit:signUpWorkshop},/*#__PURE__*/React.createElement(Typography,{className:classes.bottomSeparator,variant:\"h5\",component:\"h1\"},workshop&&workshop.name),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(FormControl,{autoFocus:true,fullWidth:true,color:\"secondary\",required:true,id:\"standard-required\"},/*#__PURE__*/React.createElement(InputLabel,{shrink:true,htmlFor:\"component-simple\",color:\"secondary\"},\"Full Name\"),/*#__PURE__*/React.createElement(Input,{id:\"component-simple\",color:\"secondary\",value:state.name,onChange:handleChange('name'),inputProps:{maxLength:64}}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(FormControl,{autoFocus:true,fullWidth:true,color:\"secondary\",required:true,id:\"standard-required\"},/*#__PURE__*/React.createElement(InputLabel,{shrink:true,htmlFor:\"component-simple\"},\"Contact No.\"),/*#__PURE__*/React.createElement(Input,{id:\"component-simple\",type:\"tel\",inputProps:{pattern:'^[0-9]+$',// accepts digits only\nmaxLength:15}// max possible length of a phone number including the country code\n,value:state.contactNumber,onChange:handleChange('contactNumber')}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(FormControl,{autoFocus:true,fullWidth:true,color:\"secondary\",required:true,id:\"standard-required\"},/*#__PURE__*/React.createElement(InputLabel,{shrink:true,htmlFor:\"component-simple\"},\"Email Address\"),/*#__PURE__*/React.createElement(Input,{id:\"component-simple\",type:\"email\"//inputProps={{ pattern: '^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$' }} // this pattern would allow some invalid gmails e.g. \"abc\"@gmail.com\n,inputProps:{maxLength:64},value:state.emailAddress,onChange:handleChange('emailAddress')}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(FormControl,{autoFocus:true,fullWidth:true,color:\"secondary\",required:true,id:\"standard-required\"},/*#__PURE__*/React.createElement(InputLabel,{shrink:true,htmlFor:\"component-simple\"},\"Matriculation Number/Staff ID\"),/*#__PURE__*/React.createElement(Input,{id:\"component-simple\"//inputProps={{ pattern: '^U[0-9]{7}[A-Z]$' }} // accepts 'U' as the first character, then 7 [0-9] characters, then a character\n,inputProps:{pattern:'^[a-zA-Z0-9]+$',// alphanumeric characters only\nmaxLength:15}// how long is a staff id lmao\n,value:state.matricNumber,onChange:handleChange('matricNumber')}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Typography,{paragraph:true},\"*This workshop is only available for NTU students/staff. Your identity will be confirmed on the day of the workshop.\"))),/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\",required:true,style:{marginTop:15}},/*#__PURE__*/React.createElement(FormControlLabel,{component:\"legend\",color:\"secondary\",control:/*#__PURE__*/React.createElement(Checkbox,{checked:acknowledgement,onChange:function onChange(){return setAcknowledgment(!acknowledgement);}}),label:/*#__PURE__*/React.createElement(Typography,{paragraph:true,className:classes.acknowledgement},\"By submitting this form, I hereby agree that NTU Arts Festival may collect, obtain, store, process and share (with relevant third party) my personal data, that I provide in this form, for the purpose of their event.\")})),/*#__PURE__*/React.createElement(FormHelperText,{style:{color:'red'}},helperText),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{className:classes.actionButton,type:\"submit\",variant:\"contained\",color:\"secondary\",disabled:promiseInProgress},\"Sign Up\"),/*#__PURE__*/React.createElement(LoadingSpinnerComponent,null)))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{className:classes.actionButton,variant:\"contained\",color:\"primary\",onClick:function onClick(){return handleClose(false);},disabled:promiseInProgress},\"Cancel\")))));}","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/ProgrammesPage/SignupPopup.js"],"names":["React","useState","withStyles","makeStyles","Button","Dialog","MuiDialogContent","Typography","DialogActions","FormControl","FormControlLabel","FormHelperText","Input","InputLabel","Grid","UserLogin","workshopService","Checkbox","trackPromise","LoadingSpinnerComponent","usePromiseTracker","useStyles","theme","root","position","margin","spacing","padding","bottomSeparator","marginBottom","actionButton","display","marginTop","marginRight","acknowledgement","fontSize","DialogContent","border","alignItems","overflowY","breakpoints","down","flexDirection","flexWrap","maxWidth","SignupPopup","props","workshop","parentCallback","classes","name","contactNumber","emailAddress","matricNumber","state","setState","auth","setAuth","setAcknowledgment","helperText","setHelperText","promiseInProgress","handleClose","isSuccess","handleChange","prop","event","target","value","handleLoginClose","signUpWorkshop","preventDefault","_id","res","status","alert","data","error","maxLength","pattern","color"],"mappings":"o2BAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,0BAAvC,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,iCAA7B,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,OAASC,aAAT,KAA8B,mBAA9B,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oCAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,kCAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,eAAP,KAA4B,uBAA5B,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,OAASC,YAAT,KAA6B,uBAA7B,CACA,OAASC,uBAAT,KAAwC,kCAAxC,CACA,OAASC,iBAAT,KAAkC,uBAAlC,CAEA,GAAMC,CAAAA,SAAS,CAAGlB,UAAU,CAAC,SAACmB,KAAD,QAAY,CACvCC,IAAI,CAAE,CACJC,QAAQ,CAAE,UADN,CAEJC,MAAM,CAAEH,KAAK,CAACI,OAAN,CAAc,CAAd,CAFJ,CAGJC,OAAO,CAAEL,KAAK,CAACI,OAAN,CAAc,CAAd,CAHL,CADiC,CAMvCE,eAAe,CAAE,CACfC,YAAY,CAAEP,KAAK,CAACI,OAAN,CAAc,CAAd,CADC,CANsB,CASvCI,YAAY,CAAE,CACZC,OAAO,CAAE,cADG,CAEZC,SAAS,CAAEV,KAAK,CAACI,OAAN,CAAc,CAAd,CAFC,CAGZO,WAAW,CAAEX,KAAK,CAACI,OAAN,CAAc,CAAd,CAHD,CATyB,CAcvCQ,eAAe,CAAE,CACfC,QAAQ,CAAE,QADK,CAdsB,CAAZ,EAAD,CAA5B,CAmBA,GAAMC,CAAAA,aAAa,CAAGlC,UAAU,CAAC,SAACoB,KAAD,wBAC/BC,IAAI,CAAE,CACJC,QAAQ,CAAE,UADN,CAEJC,MAAM,CAAEH,KAAK,CAACI,OAAN,CAAc,CAAd,CAFJ,CAGJC,OAAO,CAAEL,KAAK,CAACI,OAAN,CAAc,CAAd,CAHL,CAIJW,MAAM,CAAE,MAJJ,CAKJN,OAAO,CAAE,MALL,CAMJO,UAAU,CAAE,QANR,CAOJ;AACAC,SAAS,CAAE,MARP,CADyB,uBAW9BjB,KAAK,CAACkB,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAX8B,CAWC,CAC9BlB,IAAI,CAAE,CACJ;AACAmB,aAAa,CAAE,KAFX,CAGJC,QAAQ,CAAE,MAHN,CADwB,CAXD,uBAkB9BrB,KAAK,CAACkB,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAlB8B,CAkBC,CAC9BlB,IAAI,CAAE,CACJ;AACAqB,QAAQ,CAAE,IAFN,CADwB,CAlBD,QAAD,CAAV,CAwBlBtC,gBAxBkB,CAAtB,CA0BA,cAAe,SAASuC,CAAAA,WAAT,CAAqBC,KAArB,CAA4B,IACjCC,CAAAA,QADiC,CACJD,KADI,CACjCC,QADiC,CACvBC,cADuB,CACJF,KADI,CACvBE,cADuB,CAEzC,GAAMC,CAAAA,OAAO,CAAG5B,SAAS,EAAzB,CAFyC,cAGfpB,QAAQ,CAAC,CACjCiD,IAAI,CAAE,EAD2B,CAEjCC,aAAa,CAAE,EAFkB,CAGjCC,YAAY,CAAE,EAHmB,CAIjCC,YAAY,CAAE,EAJmB,CAAD,CAHO,wCAGlCC,KAHkC,eAG3BC,QAH2B,8BASjBtD,QAAQ,CAAC,IAAD,CATS,yCASlCuD,IATkC,eAS5BC,OAT4B,8BAUIxD,QAAQ,CAAC,KAAD,CAVZ,yCAUlCiC,eAVkC,eAUjBwB,iBAViB,8BAWLzD,QAAQ,CAAC,EAAD,CAXH,yCAWlC0D,UAXkC,eAWtBC,aAXsB,sCAYXxC,iBAAiB,EAZN,CAYjCyC,iBAZiC,oBAYjCA,iBAZiC,CAczC;AACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,SAAD,CAAe,CACjCf,cAAc,CAACe,SAAD,CAAd,CACD,CAFD,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,IAAD,QAAU,UAACC,KAAD,CAAW,CACxCX,QAAQ,gCAAMD,KAAN,wBAAcW,IAAd,CAAqBC,KAAK,CAACC,MAAN,CAAaC,KAAlC,GAAR,CACD,CAFoB,EAArB,CAIA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7BZ,OAAO,CAAC,IAAD,CAAP,CACD,CAFD,CAIA,GAAMa,CAAAA,cAAc,2FAAG,iBAAOJ,KAAP,0HACrBA,KAAK,CAACK,cAAN,GADqB,KAEjBrC,eAAe,GAAK,KAFH,0BAGnB0B,aAAa,CAAC,0DAAD,CAAb,CAHmB,mDAKD1C,CAAAA,YAAY,CAC5BF,eAAe,CAACsD,cAAhB,CAA+BvB,QAAQ,CAACyB,GAAxC,CAA6ClB,KAA7C,CAD4B,CALX,QAKbmB,GALa,eAQnB,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACtBZ,WAAW,CAAC,IAAD,CAAX,CACD,CAFD,IAEO,IAAIW,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CAC7BjB,OAAO,CAAC,KAAD,CAAP,CACD,CAFM,IAEA,IAAIgB,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CAC7B;AACAC,KAAK,CAACF,GAAG,CAACG,IAAJ,CAASC,KAAV,CAAL,CACD,CAfkB,sDAAH,kBAAdP,CAAAA,cAAc,6CAApB,CAmBA,mBACE,wCACG,CAACd,IAAD,eAAS,oBAAC,SAAD,EAAW,cAAc,CAAEa,gBAA3B,EADZ,cAEE,oBAAC,MAAD,EACE,OAAO,CAAE,yBAAMP,CAAAA,WAAW,CAAC,KAAD,CAAjB,EADX,CAEE,kBAAgB,cAFlB,CAGE,IAAI,CAAE,IAHR,CAIE,SAAS,CAAEb,OAAO,CAAC1B,IAJrB,CAKE,SAAS,CAAE,IALb,CAME,QAAQ,CAAC,IAAK;AANhB,CAOE,MAAM,CAAC,MAPT,CAQE,YAAY,CAAC,GARf,eAUE,oBAAC,aAAD,EAAe,QAAQ,KAAvB,eACE,4BAAM,YAAY,CAAC,KAAnB,CAAyB,QAAQ,CAAE+C,cAAnC,eACE,oBAAC,UAAD,EACE,SAAS,CAAErB,OAAO,CAACrB,eADrB,CAEE,OAAO,CAAC,IAFV,CAGE,SAAS,CAAC,IAHZ,EAKGmB,QAAQ,EAAIA,QAAQ,CAACG,IALxB,CADF,cAQE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,eACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,eACE,oBAAC,WAAD,EACE,SAAS,KADX,CAEE,SAAS,KAFX,CAGE,KAAK,CAAC,WAHR,CAIE,QAAQ,KAJV,CAKE,EAAE,CAAC,mBALL,eAOE,oBAAC,UAAD,EACE,MAAM,KADR,CAEE,OAAO,CAAC,kBAFV,CAGE,KAAK,CAAC,WAHR,cAPF,cAcE,oBAAC,KAAD,EACE,EAAE,CAAC,kBADL,CAEE,KAAK,CAAC,WAFR,CAGE,KAAK,CAAEI,KAAK,CAACJ,IAHf,CAIE,QAAQ,CAAEc,YAAY,CAAC,MAAD,CAJxB,CAKE,UAAU,CAAE,CAAEc,SAAS,CAAE,EAAb,CALd,EAdF,CADF,CADF,cAyBE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,eACE,oBAAC,WAAD,EACE,SAAS,KADX,CAEE,SAAS,KAFX,CAGE,KAAK,CAAC,WAHR,CAIE,QAAQ,KAJV,CAKE,EAAE,CAAC,mBALL,eAOE,oBAAC,UAAD,EAAY,MAAM,KAAlB,CAAmB,OAAO,CAAC,kBAA3B,gBAPF,cAUE,oBAAC,KAAD,EACE,EAAE,CAAC,kBADL,CAEE,IAAI,CAAC,KAFP,CAGE,UAAU,CAAE,CACVC,OAAO,CAAE,UADC,CACW;AACrBD,SAAS,CAAE,EAFD,CAGT;AANL,CAOE,KAAK,CAAExB,KAAK,CAACH,aAPf,CAQE,QAAQ,CAAEa,YAAY,CAAC,eAAD,CARxB,EAVF,CADF,CAzBF,cAgDE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,eACE,oBAAC,WAAD,EACE,SAAS,KADX,CAEE,SAAS,KAFX,CAGE,KAAK,CAAC,WAHR,CAIE,QAAQ,KAJV,CAKE,EAAE,CAAC,mBALL,eAOE,oBAAC,UAAD,EAAY,MAAM,KAAlB,CAAmB,OAAO,CAAC,kBAA3B,kBAPF,cAUE,oBAAC,KAAD,EACE,EAAE,CAAC,kBADL,CAEE,IAAI,CAAC,OACL;AAHF,CAIE,UAAU,CAAE,CAAEc,SAAS,CAAE,EAAb,CAJd,CAKE,KAAK,CAAExB,KAAK,CAACF,YALf,CAME,QAAQ,CAAEY,YAAY,CAAC,cAAD,CANxB,EAVF,CADF,CAhDF,cAqEE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,eACE,oBAAC,WAAD,EACE,SAAS,KADX,CAEE,SAAS,KAFX,CAGE,KAAK,CAAC,WAHR,CAIE,QAAQ,KAJV,CAKE,EAAE,CAAC,mBALL,eAOE,oBAAC,UAAD,EAAY,MAAM,KAAlB,CAAmB,OAAO,CAAC,kBAA3B,kCAPF,cAUE,oBAAC,KAAD,EACE,EAAE,CAAC,kBACH;AAFF,CAGE,UAAU,CAAE,CACVe,OAAO,CAAE,gBADC,CACiB;AAC3BD,SAAS,CAAE,EAFD,CAGT;AANL,CAOE,KAAK,CAAExB,KAAK,CAACD,YAPf,CAQE,QAAQ,CAAEW,YAAY,CAAC,cAAD,CARxB,EAVF,CADF,CArEF,cA4FE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,eACE,oBAAC,UAAD,EAAY,SAAS,KAArB,yHADF,CA5FF,CARF,cA2GE,oBAAC,WAAD,EACE,SAAS,CAAC,UADZ,CAEE,QAAQ,KAFV,CAGE,KAAK,CAAE,CAAEhC,SAAS,CAAE,EAAb,CAHT,eAKE,oBAAC,gBAAD,EACE,SAAS,CAAC,QADZ,CAEE,KAAK,CAAC,WAFR,CAGE,OAAO,cACL,oBAAC,QAAD,EACE,OAAO,CAAEE,eADX,CAEE,QAAQ,CAAE,0BAAMwB,CAAAA,iBAAiB,CAAC,CAACxB,eAAF,CAAvB,EAFZ,EAJJ,CASE,KAAK,cACH,oBAAC,UAAD,EAAY,SAAS,KAArB,CAAsB,SAAS,CAAEe,OAAO,CAACf,eAAzC,4NAVJ,EALF,CA3GF,cAmIE,oBAAC,cAAD,EAAgB,KAAK,CAAE,CAAE8C,KAAK,CAAE,KAAT,CAAvB,EACGrB,UADH,CAnIF,cAsIE,4CACE,oBAAC,MAAD,EACE,SAAS,CAAEV,OAAO,CAACnB,YADrB,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAC,WAHV,CAIE,KAAK,CAAC,WAJR,CAKE,QAAQ,CAAE+B,iBALZ,YADF,cAUE,oBAAC,uBAAD,MAVF,CAtIF,CADF,CAVF,cA+JE,oBAAC,aAAD,mBACE,4CACE,oBAAC,MAAD,EACE,SAAS,CAAEZ,OAAO,CAACnB,YADrB,CAEE,OAAO,CAAC,WAFV,CAGE,KAAK,CAAC,SAHR,CAIE,OAAO,CAAE,yBAAMgC,CAAAA,WAAW,CAAC,KAAD,CAAjB,EAJX,CAKE,QAAQ,CAAED,iBALZ,WADF,CADF,CA/JF,CAFF,CADF,CAkLD","sourcesContent":["import React, { useState } from 'react';\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport { DialogActions } from '@material-ui/core';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Grid from '@material-ui/core/Grid';\nimport UserLogin from '../Authentication/UserLogin';\nimport workshopService from '../services/workshops';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { trackPromise } from 'react-promise-tracker';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { usePromiseTracker } from 'react-promise-tracker';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'relative',\n    margin: theme.spacing(3),\n    padding: theme.spacing(3),\n  },\n  bottomSeparator: {\n    marginBottom: theme.spacing(3),\n  },\n  actionButton: {\n    display: 'inline-block',\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(2),\n  },\n  acknowledgement: {\n    fontSize: '0.8rem',\n  },\n}));\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    position: 'relative',\n    margin: theme.spacing(3),\n    padding: theme.spacing(3),\n    border: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    // maxHeight: '60vh',\n    overflowY: 'auto',\n  },\n  [theme.breakpoints.down('md')]: {\n    root: {\n      // backgroundColor: 'pink',\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n    },\n  },\n  [theme.breakpoints.down('xs')]: {\n    root: {\n      // backgroundColor: 'orange',\n      maxWidth: 'lg',\n    },\n  },\n}))(MuiDialogContent);\n\nexport default function SignupPopup(props) {\n  const { workshop, parentCallback } = props;\n  const classes = useStyles();\n  const [state, setState] = useState({\n    name: '',\n    contactNumber: '',\n    emailAddress: '',\n    matricNumber: '',\n  });\n  const [auth, setAuth] = useState(true);\n  const [acknowledgement, setAcknowledgment] = useState(false);\n  const [helperText, setHelperText] = useState('');\n  const { promiseInProgress } = usePromiseTracker();\n\n  //DIALOG ACTIONS\n  const handleClose = (isSuccess) => {\n    parentCallback(isSuccess);\n  };\n\n  const handleChange = (prop) => (event) => {\n    setState({ ...state, [prop]: event.target.value });\n  };\n\n  const handleLoginClose = () => {\n    setAuth(true);\n  };\n\n  const signUpWorkshop = async (event) => {\n    event.preventDefault();\n    if (acknowledgement === false) {\n      setHelperText('Please indicate acknowledgement of terms and conditions.');\n    } else {\n      const res = await trackPromise(\n        workshopService.signUpWorkshop(workshop._id, state)\n      );\n      if (res.status === 200) {\n        handleClose(true);\n      } else if (res.status === 401) {\n        setAuth(false);\n      } else if (res.status === 400) {\n        // console.log(res.data);\n        alert(res.data.error);\n      }\n    }\n  };\n\n  return (\n    <>\n      {!auth && <UserLogin parentCallback={handleLoginClose} />}\n      <Dialog\n        onClose={() => handleClose(false)}\n        aria-labelledby=\"signup popup\"\n        open={true}\n        className={classes.root}\n        fullWidth={true}\n        maxWidth=\"md\" //or \"lg\"\n        scroll=\"body\"\n        marginBottom=\"5\"\n      >\n        <DialogContent dividers>\n          <form autoComplete=\"off\" onSubmit={signUpWorkshop}>\n            <Typography\n              className={classes.bottomSeparator}\n              variant=\"h5\"\n              component=\"h1\"\n            >\n              {workshop && workshop.name}\n            </Typography>\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <FormControl\n                  autoFocus\n                  fullWidth\n                  color=\"secondary\"\n                  required\n                  id=\"standard-required\"\n                >\n                  <InputLabel\n                    shrink\n                    htmlFor=\"component-simple\"\n                    color=\"secondary\"\n                  >\n                    Full Name\n                  </InputLabel>\n                  <Input\n                    id=\"component-simple\"\n                    color=\"secondary\"\n                    value={state.name}\n                    onChange={handleChange('name')}\n                    inputProps={{ maxLength: 64 }}\n                  />\n                </FormControl>\n              </Grid>\n              <Grid item xs={12}>\n                <FormControl\n                  autoFocus\n                  fullWidth\n                  color=\"secondary\"\n                  required\n                  id=\"standard-required\"\n                >\n                  <InputLabel shrink htmlFor=\"component-simple\">\n                    Contact No.\n                  </InputLabel>\n                  <Input\n                    id=\"component-simple\"\n                    type=\"tel\"\n                    inputProps={{\n                      pattern: '^[0-9]+$', // accepts digits only\n                      maxLength: 15,\n                    }} // max possible length of a phone number including the country code\n                    value={state.contactNumber}\n                    onChange={handleChange('contactNumber')}\n                  />\n                </FormControl>\n              </Grid>\n              <Grid item xs={12}>\n                <FormControl\n                  autoFocus\n                  fullWidth\n                  color=\"secondary\"\n                  required\n                  id=\"standard-required\"\n                >\n                  <InputLabel shrink htmlFor=\"component-simple\">\n                    Email Address\n                  </InputLabel>\n                  <Input\n                    id=\"component-simple\"\n                    type=\"email\"\n                    //inputProps={{ pattern: '^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$' }} // this pattern would allow some invalid gmails e.g. \"abc\"@gmail.com\n                    inputProps={{ maxLength: 64 }}\n                    value={state.emailAddress}\n                    onChange={handleChange('emailAddress')}\n                  />\n                </FormControl>\n              </Grid>\n              <Grid item xs={12}>\n                <FormControl\n                  autoFocus\n                  fullWidth\n                  color=\"secondary\"\n                  required\n                  id=\"standard-required\"\n                >\n                  <InputLabel shrink htmlFor=\"component-simple\">\n                    Matriculation Number/Staff ID\n                  </InputLabel>\n                  <Input\n                    id=\"component-simple\"\n                    //inputProps={{ pattern: '^U[0-9]{7}[A-Z]$' }} // accepts 'U' as the first character, then 7 [0-9] characters, then a character\n                    inputProps={{\n                      pattern: '^[a-zA-Z0-9]+$', // alphanumeric characters only\n                      maxLength: 15,\n                    }} // how long is a staff id lmao\n                    value={state.matricNumber}\n                    onChange={handleChange('matricNumber')}\n                  />\n                </FormControl>\n              </Grid>\n              <Grid item xs={12}>\n                <Typography paragraph>\n                  *This workshop is only available for NTU students/staff. Your\n                  identity will be confirmed on the day of the workshop.\n                </Typography>\n              </Grid>\n            </Grid>\n            <FormControl\n              component=\"fieldset\"\n              required\n              style={{ marginTop: 15 }}\n            >\n              <FormControlLabel\n                component=\"legend\"\n                color=\"secondary\"\n                control={\n                  <Checkbox\n                    checked={acknowledgement}\n                    onChange={() => setAcknowledgment(!acknowledgement)}\n                  />\n                }\n                label={\n                  <Typography paragraph className={classes.acknowledgement}>\n                    By submitting this form, I hereby agree that NTU Arts\n                    Festival may collect, obtain, store, process and share (with\n                    relevant third party) my personal data, that I provide in\n                    this form, for the purpose of their event.\n                  </Typography>\n                }\n              />\n            </FormControl>\n            <FormHelperText style={{ color: 'red' }}>\n              {helperText}\n            </FormHelperText>\n            <div>\n              <Button\n                className={classes.actionButton}\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"secondary\"\n                disabled={promiseInProgress}\n              >\n                Sign Up\n              </Button>\n              <LoadingSpinnerComponent />\n            </div>\n          </form>\n        </DialogContent>\n        <DialogActions>\n          <div>\n            <Button\n              className={classes.actionButton}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => handleClose(false)}\n              disabled={promiseInProgress}\n            >\n              Cancel\n            </Button>\n          </div>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}