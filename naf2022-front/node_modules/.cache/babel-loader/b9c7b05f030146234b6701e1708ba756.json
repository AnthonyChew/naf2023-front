{"ast":null,"code":"import _createForOfIteratorHelper from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _objectSpread from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _defineProperty from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import React,{useEffect,useState}from'react';import{useSelector}from'react-redux';import{withStyles,makeStyles,useTheme}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import MuiDialogContent from'@material-ui/core/DialogContent';import Typography from'@material-ui/core/Typography';import ToggleButton from'@material-ui/lab/ToggleButton';import ToggleButtonGroup from'@material-ui/lab/ToggleButtonGroup';import{useDispatch}from'react-redux';import{addProductToCart}from'../reducers/CartReducer';import useMediaQuery from'@material-ui/core/useMediaQuery';import Quantity from'../utils/Quantity';import Slider from'react-slick';import LinkButton from'../utils/LinkButton';import ConfirmationDialog from'../Components/ConfirmationDialog';import Snackbar from'@material-ui/core/Snackbar';import IconButton from'@material-ui/core/IconButton';import CloseIcon from'@material-ui/icons/Close';import Grid from'@material-ui/core/Grid';import Hidden from'@material-ui/core/Hidden';import{ReactComponent as Vector303}from\"@svgr/webpack?-svgo,+titleProp,+ref!./2022SVG/Vector 303.svg\";import{ReactComponent as Vector304}from\"@svgr/webpack?-svgo,+titleProp,+ref!./2022SVG/Vector 304.svg\";import{ReactComponent as Vector305}from\"@svgr/webpack?-svgo,+titleProp,+ref!./2022SVG/Vector 305.svg\";import{ReactComponent as Vector306}from\"@svgr/webpack?-svgo,+titleProp,+ref!./2022SVG/Vector 306.svg\";import{ReactComponent as Vector307}from\"@svgr/webpack?-svgo,+titleProp,+ref!./2022SVG/Vector 307.svg\";import{ReactComponent as Vector308}from\"@svgr/webpack?-svgo,+titleProp,+ref!./2022SVG/Vector 308.svg\";import{alpha}from'@material-ui/core/styles/colorManipulator';import{isValid}from'date-fns';var useStyles=makeStyles(function(theme){return _defineProperty({root:{position:'relative'},bottomSeparator:{marginBottom:theme.spacing(3)},pdtOptions:{textTransform:'uppercase',fontWeight:'bold',marginTop:theme.spacing(1)},actionButton:{display:'inline-block',marginTop:theme.spacing(1),marginRight:theme.spacing(2)},carousel:{flexBasis:0,flexShrink:1,flexGrow:1,minHeight:0,minWidth:0,paddingRight:theme.spacing(3)// alignSelf: 'flex-start',\n},pdtDetails:{flexBasis:0,flexShrink:1,flexGrow:1},img:{// display: 'block',\npaddingLeft:theme.spacing(1),paddingRight:theme.spacing(1),objectFit:'cover',width:'100%'},dots:{position:'static'}},theme.breakpoints.down('xs'),{carousel:{flexBasis:'auto',paddingRight:0,paddingBottom:theme.spacing(3)},pdtDetails:{flexBasis:'auto'}});});var DialogContent=withStyles(function(theme){var _ref2;return _ref2={root:{position:'relative',display:'flex',alignItems:'center',// maxHeight: '60vh',\noverflowY:'auto'}},_defineProperty(_ref2,theme.breakpoints.down('md'),{root:{// backgroundColor: 'pink',\nflexDirection:'row',flexWrap:'wrap'}}),_defineProperty(_ref2,theme.breakpoints.down('xs'),{root:{// backgroundColor: 'orange',\nmaxWidth:'lg',margin:theme.spacing(1),padding:theme.spacing(2)}}),_ref2;})(MuiDialogContent);export default function ProductPopup(props){var product=props.product,parentCallback=props.parentCallback,images=props.images;var _id=product._id,name=product.name,alt=product.alt,price=product.price,description=product.description,quantity=product.quantity,attribute1=product.attribute1,attribute2=product.attribute2,canCollect=product.canCollect,canDeliver=product.canDeliver,sizes=product.sizes,colours=product.colours,vendorId=product.vendorId,vendorName=product.vendorName,additionalPurchases=product.additionalPurchases,leadTime=product.leadTime;var classes=useStyles();var dispatch=useDispatch();// TODO: Test if having No size/no colour will produce error\n//DIALOG ACTIONS\nvar handleClose=function handleClose(){parentCallback();};//PRODUCT OPTIONS STATES\nvar _useState=useState(colours.length>0?colours[0]:null),_useState2=_slicedToArray(_useState,2),colour=_useState2[0],setColour=_useState2[1];var _useState3=useState(sizes.length>0?sizes[0]:null),_useState4=_slicedToArray(_useState3,2),size=_useState4[0],setSize=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),quantityBought=_useState6[0],setQuantity=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),indivQuantity=_useState8[0],setIndivQuantity=_useState8[1];var allProductsInCart=useSelector(function(state){return state.addedProducts;});var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),varNumInCart=_useState10[0],setVarInCart=_useState10[1];useEffect(function(){if(allProductsInCart===undefined)return;else{var relevantPdt=allProductsInCart.find(function(product){return product._id===_id;});// console.log(relevantPdt);\nif(relevantPdt){var varExists=relevantPdt.variations.find(function(pdt){return pdt.colour===colour&&pdt.size===size;});// console.log(varExists);\nif(varExists){setVarInCart(varExists.quantity);}else{setVarInCart(0);}}else{setVarInCart(0);}}},[allProductsInCart,_id,colour,size]);var addToCart=function addToCart(){// console.log('ADD TO CART');\nvar newProduct=_objectSpread(_objectSpread({},product),{},{_id:_id,image:images.length>0?images[0]:null,quantity:quantityBought,stock:quantity,size:size,colour:colour});delete newProduct['images'];delete newProduct['description'];delete newProduct['quantitySold'];// console.log(newProduct);\ndispatch(addProductToCart(newProduct));};//confirmation dialog for add to cart\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),open=_useState12[0],setOpen=_useState12[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleDialogResult=function handleDialogResult(continueAction){setOpen(false);if(continueAction){addToCart();handleOpenSnackbar();}};var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),snackbarOpen=_useState14[0],setSnackbarOpen=_useState14[1];var handleOpenSnackbar=function handleOpenSnackbar(){setSnackbarOpen(true);};var handleCloseSnackbar=function handleCloseSnackbar(){setSnackbarOpen(false);};useEffect(function(){var indivQuantity=null;var i=0;var j=0;if(colour!==null){var row=colours.indexOf(colour);i=row;if(size!==null){var col=sizes.indexOf(size);indivQuantity=quantity[row][col];j=col;}else if(sizes.length===0){//no sizes, only colours (1st element of the array)\nindivQuantity=quantity[row][0];j=0;}}else if(size!==null){var _col=sizes.indexOf(size);i=0;if(colours.length===0){//no colours, only sizes\nindivQuantity=quantity[0][_col];j=_col;}}else{indivQuantity=quantity[0][0];j=0;}if(additionalPurchases!=null){var _iterator=_createForOfIteratorHelper(additionalPurchases),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var additionalPurchase=_step.value;indivQuantity-=additionalPurchase[i][j];}}catch(err){_iterator.e(err);}finally{_iterator.f();}}setIndivQuantity(indivQuantity);},[colour,colours,quantity,size,sizes,additionalPurchases]);var setColourHandler=function setColourHandler(event,newColour){if(newColour!==null){setColour(newColour);}};var setSizeHandler=function setSizeHandler(event,newSize){if(newSize!==null){setSize(newSize);}};// const theme = useTheme();\n// const dialogSize = useMediaQuery(theme.breakpoints.down('xs'));\nvar settings={dots:true,//dialogSize ? false : true,\ndotsClass:\"slick-dots \".concat(classes.dots),infinite:true,arrows:false,autoplay:true,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:true};// const date1 = '14 February 2022';\n// const date2 = '23 February 2022';\nvar date1='23 February 2022';var date2='09 March 2022';var isValidPurchase=function isValidPurchase(date,leadTime){var dateObj=new Date();dateObj.setDate(dateObj.getDate()+leadTime);if(dateObj>new Date(date)){return false;}return true;};return/*#__PURE__*/React.createElement(Dialog,{onClose:handleClose,\"aria-labelledby\":\"product popup\",open:true,className:classes.root,fullWidth:true,maxWidth:\"md\"//or \"lg\"\n// fullScreen={dialogSize}\n,scroll:\"body\"},/*#__PURE__*/React.createElement(DialogContent,{dividers:true,style:{backgroundColor:'#FDFBE2'}},/*#__PURE__*/React.createElement(Hidden,{smUp:true},/*#__PURE__*/React.createElement(Grid,{xs:12},/*#__PURE__*/React.createElement(Typography,null,/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(IconButton,{onClick:handleClose,style:{position:'absolute',top:'0px',right:'0px'}},/*#__PURE__*/React.createElement(CloseIcon,null)))),/*#__PURE__*/React.createElement(\"div\",{className:classes.carousel},/*#__PURE__*/React.createElement(Slider,settings,images.map(function(image,index){return/*#__PURE__*/React.createElement(\"img\",{key:index,className:classes.img,src:image,alt:alt,style:{zIndex:1}});}))),/*#__PURE__*/React.createElement(\"div\",{className:classes.pdtDetails,style:{zIndex:'1',color:'#033F63'}},/*#__PURE__*/React.createElement(Hidden,{xsDown:true},/*#__PURE__*/React.createElement(Grid,{xs:12},/*#__PURE__*/React.createElement(IconButton,{onClick:handleClose,style:{position:'absolute',top:'0px',right:'0px'}},/*#__PURE__*/React.createElement(CloseIcon,null)))),/*#__PURE__*/React.createElement(Grid,{xs:11,style:{zIndex:0}},/*#__PURE__*/React.createElement(Typography// className={classes.bottomSeparator}\n,{variant:\"h4\",component:\"h1\"},name),/*#__PURE__*/React.createElement(Typography,{paragraph:true},description),/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h5\",component:\"h2\"},\"$\",Number.isInteger(price)?price:price.toFixed(2)),/*#__PURE__*/React.createElement(\"div\",{className:classes.bottomSeparator},colours.length>0&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{variant:\"body1\",component:\"h2\",className:classes.pdtOptions},attribute1),/*#__PURE__*/React.createElement(ToggleButtonGroup,{value:colour,exclusive:true,onChange:setColourHandler,\"aria-label\":\"select attribute1 option\",size:\"small\"},colours.map(function(colour,index){return/*#__PURE__*/React.createElement(ToggleButton,{key:index,value:colour},colour);}))),sizes.length>0&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{variant:\"body1\",component:\"h2\",className:classes.pdtOptions},attribute2),/*#__PURE__*/React.createElement(ToggleButtonGroup,{value:size,exclusive:true,onChange:setSizeHandler,\"aria-label\":\"select attribute2 option\",size:\"small\"},sizes.map(function(size,index){return/*#__PURE__*/React.createElement(ToggleButton,{key:index,value:size},size);})))),/*#__PURE__*/React.createElement(Quantity,{quantity:quantityBought,changeState:function changeState(quantity){return setQuantity(quantity);}}),/*#__PURE__*/React.createElement(Typography,{variant:\"body1\",style:{fontWeight:'bold'}},canCollect&&canDeliver?'You can receive this product via self-collection or delivery.':canCollect?'This product must be self-collected.':'This product must be delivered.'),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Typography,{variant:\"body1\"},\"Lead Time: \",leadTime,\" days (For self-collection) \",/*#__PURE__*/React.createElement(\"br\",null)),isValidPurchase(date1,leadTime)?/*#__PURE__*/React.createElement(Typography,{style:{color:'#00FF00'}},\"This product is available for collection on 23 Feb.\"):/*#__PURE__*/React.createElement(Typography,{style:{color:'#FF0000'}},\"This product is not available for collection on 23 Feb.\"),isValidPurchase(date2,leadTime)?/*#__PURE__*/React.createElement(Typography,{style:{color:'#00FF00'}},\"This product is available for collection on 09 Mar.\"):/*#__PURE__*/React.createElement(Typography,{style:{color:'#FF0000'}},\"This product is not available for collection on 09 Mar.\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true,xs:12,style:{paddingBottom:'10px'}},/*#__PURE__*/React.createElement(Typography,{xs:6},/*#__PURE__*/React.createElement(LinkButton,{to:\"/vendorpage/\".concat(vendorId),className:classes.actionButton,variant:\"contained\",style:{backgroundColor:'#28666E',color:'#FDFBE2'}},\"View Vendor\")),/*#__PURE__*/React.createElement(Grid,{xs:6,style:{minWidth:'180px'}},/*#__PURE__*/React.createElement(Button,{className:classes.actionButton,variant:\"contained\",color:\"secondary\",onClick:handleClickOpen//confirmation before adding to cart\n,disabled:quantityBought+varNumInCart>indivQuantity// disabled\n},\"Add to Cart\"))),open&&/*#__PURE__*/React.createElement(ConfirmationDialog//callback\n,{title:\"Add this product to cart?\",content:\"\".concat(quantityBought,\"x \").concat(name,\" \").concat(attribute1.length!==0?\"with \".concat(attribute1,\": \").concat(colour):'',\" \").concat(attribute2.length!==0?\"and \".concat(attribute2,\": \").concat(size):''),parentCallback:handleDialogResult}),/*#__PURE__*/React.createElement(Snackbar,{anchorOrigin:{vertical:'bottom',horizontal:'left'},open:snackbarOpen,autoHideDuration:6000,onClose:handleCloseSnackbar,message:\"\".concat(quantityBought,\"x \").concat(name,\" \").concat(attribute1.length!==0?\"with \".concat(attribute1,\": \").concat(colour):'',\" \").concat(attribute2.length!==0?\"and \".concat(attribute2,\": \").concat(size):'',\" has been added to your cart.\"),action:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IconButton,{size:\"small\",\"aria-label\":\"close\",color:\"inherit\",onClick:handleCloseSnackbar},/*#__PURE__*/React.createElement(CloseIcon,{fontSize:\"small\"})))})),/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle2\",component:\"p\"},\"There \",indivQuantity===1?'is':'are',\" currently\",' ',indivQuantity>100?'many':indivQuantity,\" in stock.\"),/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle2\",component:\"p\"},\"There \",varNumInCart===1?'is':'are',\" currently \",varNumInCart,' ',\"in your cart.\")))));}","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/MarketPlacePage/ProductPopup.js"],"names":["React","useEffect","useState","useSelector","withStyles","makeStyles","useTheme","Button","Dialog","MuiDialogContent","Typography","ToggleButton","ToggleButtonGroup","useDispatch","addProductToCart","useMediaQuery","Quantity","Slider","LinkButton","ConfirmationDialog","Snackbar","IconButton","CloseIcon","Grid","Hidden","alpha","isValid","useStyles","theme","root","position","bottomSeparator","marginBottom","spacing","pdtOptions","textTransform","fontWeight","marginTop","actionButton","display","marginRight","carousel","flexBasis","flexShrink","flexGrow","minHeight","minWidth","paddingRight","pdtDetails","img","paddingLeft","objectFit","width","dots","breakpoints","down","paddingBottom","DialogContent","alignItems","overflowY","flexDirection","flexWrap","maxWidth","margin","padding","ProductPopup","props","product","parentCallback","images","_id","name","alt","price","description","quantity","attribute1","attribute2","canCollect","canDeliver","sizes","colours","vendorId","vendorName","additionalPurchases","leadTime","classes","dispatch","handleClose","length","colour","setColour","size","setSize","quantityBought","setQuantity","indivQuantity","setIndivQuantity","allProductsInCart","state","addedProducts","varNumInCart","setVarInCart","undefined","relevantPdt","find","varExists","variations","pdt","addToCart","newProduct","image","stock","open","setOpen","handleClickOpen","handleDialogResult","continueAction","handleOpenSnackbar","snackbarOpen","setSnackbarOpen","handleCloseSnackbar","i","j","row","indexOf","col","additionalPurchase","setColourHandler","event","newColour","setSizeHandler","newSize","settings","dotsClass","infinite","arrows","autoplay","speed","slidesToShow","slidesToScroll","adaptiveHeight","date1","date2","isValidPurchase","date","dateObj","Date","setDate","getDate","backgroundColor","top","right","map","index","zIndex","color","Number","isInteger","toFixed","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { withStyles, makeStyles, useTheme } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport { useDispatch } from 'react-redux';\nimport { addProductToCart } from '../reducers/CartReducer';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Quantity from '../utils/Quantity';\nimport Slider from 'react-slick';\nimport LinkButton from '../utils/LinkButton';\nimport ConfirmationDialog from '../Components/ConfirmationDialog';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Grid from '@material-ui/core/Grid';\nimport Hidden from '@material-ui/core/Hidden';\nimport { ReactComponent as Vector303 } from './2022SVG/Vector 303.svg';\nimport { ReactComponent as Vector304 } from './2022SVG/Vector 304.svg';\nimport { ReactComponent as Vector305 } from './2022SVG/Vector 305.svg';\nimport { ReactComponent as Vector306 } from './2022SVG/Vector 306.svg';\nimport { ReactComponent as Vector307 } from './2022SVG/Vector 307.svg';\nimport { ReactComponent as Vector308 } from './2022SVG/Vector 308.svg';\nimport { alpha } from '@material-ui/core/styles/colorManipulator';\nimport { isValid } from 'date-fns';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'relative',\n  },\n\n  bottomSeparator: {\n    marginBottom: theme.spacing(3),\n  },\n  pdtOptions: {\n    textTransform: 'uppercase',\n    fontWeight: 'bold',\n    marginTop: theme.spacing(1),\n  },\n  actionButton: {\n    display: 'inline-block',\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(2),\n  },\n  carousel: {\n    flexBasis: 0,\n    flexShrink: 1,\n    flexGrow: 1,\n    minHeight: 0,\n    minWidth: 0,\n    paddingRight: theme.spacing(3),\n    // alignSelf: 'flex-start',\n  },\n  pdtDetails: {\n    flexBasis: 0,\n    flexShrink: 1,\n    flexGrow: 1,\n  },\n  img: {\n    // display: 'block',\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    objectFit: 'cover',\n    width: '100%',\n  },\n  dots: {\n    position: 'static',\n  },\n  [theme.breakpoints.down('xs')]: {\n    carousel: {\n      flexBasis: 'auto',\n      paddingRight: 0,\n      paddingBottom: theme.spacing(3),\n    },\n    pdtDetails: {\n      flexBasis: 'auto',\n    },\n  },\n}));\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    // maxHeight: '60vh',\n    overflowY: 'auto',\n  },\n  [theme.breakpoints.down('md')]: {\n    root: {\n      // backgroundColor: 'pink',\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n    },\n  },\n  [theme.breakpoints.down('xs')]: {\n    root: {\n      // backgroundColor: 'orange',\n      maxWidth: 'lg',\n      margin: theme.spacing(1),\n      padding: theme.spacing(2),\n    },\n  },\n}))(MuiDialogContent);\n\nexport default function ProductPopup(props) {\n  const { product, parentCallback, images } = props;\n  const {\n    _id,\n    name,\n    alt,\n    price,\n    description,\n    quantity,\n    attribute1,\n    attribute2,\n    canCollect,\n    canDeliver,\n    sizes,\n    colours,\n    vendorId,\n    vendorName,\n    additionalPurchases,\n    leadTime,\n  } = product;\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  // TODO: Test if having No size/no colour will produce error\n  //DIALOG ACTIONS\n  const handleClose = () => {\n    parentCallback();\n  };\n  //PRODUCT OPTIONS STATES\n  const [colour, setColour] = useState(colours.length > 0 ? colours[0] : null);\n  const [size, setSize] = useState(sizes.length > 0 ? sizes[0] : null);\n  const [quantityBought, setQuantity] = useState(1);\n  const [indivQuantity, setIndivQuantity] = useState(null);\n  const allProductsInCart = useSelector((state) => {\n    return state.addedProducts;\n  });\n  const [varNumInCart, setVarInCart] = useState(0);\n\n  useEffect(() => {\n    if (allProductsInCart === undefined) return;\n    else {\n      const relevantPdt = allProductsInCart.find(\n        (product) => product._id === _id\n      );\n      // console.log(relevantPdt);\n      if (relevantPdt) {\n        const varExists = relevantPdt.variations.find(\n          (pdt) => pdt.colour === colour && pdt.size === size\n        );\n        // console.log(varExists);\n        if (varExists) {\n          setVarInCart(varExists.quantity);\n        } else {\n          setVarInCart(0);\n        }\n      } else {\n        setVarInCart(0);\n      }\n    }\n  }, [allProductsInCart, _id, colour, size]);\n\n  const addToCart = () => {\n    // console.log('ADD TO CART');\n    const newProduct = {\n      ...product,\n      _id: _id,\n      image: images.length > 0 ? images[0] : null,\n      quantity: quantityBought,\n      stock: quantity,\n      size: size,\n      colour: colour,\n    };\n    delete newProduct['images'];\n    delete newProduct['description'];\n    delete newProduct['quantitySold'];\n    // console.log(newProduct);\n    dispatch(addProductToCart(newProduct));\n  };\n\n  //confirmation dialog for add to cart\n  const [open, setOpen] = useState(false);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleDialogResult = (continueAction) => {\n    setOpen(false);\n    if (continueAction) {\n      addToCart();\n      handleOpenSnackbar();\n    }\n  };\n\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const handleOpenSnackbar = () => {\n    setSnackbarOpen(true);\n  };\n\n  const handleCloseSnackbar = () => {\n    setSnackbarOpen(false);\n  };\n\n  useEffect(() => {\n    let indivQuantity = null;\n    let i = 0;\n    let j = 0;\n    if (colour !== null) {\n      const row = colours.indexOf(colour);\n      i = row;\n      if (size !== null) {\n        const col = sizes.indexOf(size);\n        indivQuantity = quantity[row][col];\n        j = col;\n      } else if (sizes.length === 0) {\n        //no sizes, only colours (1st element of the array)\n        indivQuantity = quantity[row][0];\n        j = 0;\n      }\n    } else if (size !== null) {\n      const col = sizes.indexOf(size);\n      i = 0;\n      if (colours.length === 0) {\n        //no colours, only sizes\n        indivQuantity = quantity[0][col];\n        j = col;\n      }\n    } else {\n      indivQuantity = quantity[0][0];\n      j = 0;\n    }\n    if (additionalPurchases != null) {\n      for (let additionalPurchase of additionalPurchases) {\n        indivQuantity -= additionalPurchase[i][j];\n      }\n    }\n    setIndivQuantity(indivQuantity);\n  }, [colour, colours, quantity, size, sizes, additionalPurchases]);\n\n  const setColourHandler = (event, newColour) => {\n    if (newColour !== null) {\n      setColour(newColour);\n    }\n  };\n\n  const setSizeHandler = (event, newSize) => {\n    if (newSize !== null) {\n      setSize(newSize);\n    }\n  };\n\n  // const theme = useTheme();\n  // const dialogSize = useMediaQuery(theme.breakpoints.down('xs'));\n\n  const settings = {\n    dots: true, //dialogSize ? false : true,\n    dotsClass: `slick-dots ${classes.dots}`,\n    infinite: true,\n    arrows: false,\n    autoplay: true,\n    speed: 500,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n    adaptiveHeight: true,\n  };\n\n  // const date1 = '14 February 2022';\n  // const date2 = '23 February 2022';\n  const date1 = '23 February 2022';\n  const date2 = '09 March 2022';\n\n  const isValidPurchase = (date, leadTime) => {\n    const dateObj = new Date();\n    dateObj.setDate(dateObj.getDate() + leadTime);\n    if (dateObj > new Date(date)) {\n      return false;\n    }\n    return true;\n  };\n\n  return (\n    <Dialog\n      onClose={handleClose}\n      aria-labelledby=\"product popup\"\n      open={true}\n      className={classes.root}\n      fullWidth={true}\n      maxWidth=\"md\" //or \"lg\"\n      // fullScreen={dialogSize}\n      scroll=\"body\"\n    >\n      <DialogContent dividers style={{ backgroundColor: '#FDFBE2' }}>\n        {/* {dialogSize && (\n          <Toolbar style={{ width: '100%', justifyContent: 'flex-end' }}>\n            <IconButton\n              edge=\"end\"\n              color=\"secondary\"\n              onClick={handleClose}\n              aria-label=\"close\"\n            >\n              <CloseIcon />\n            </IconButton>\n          </Toolbar>\n        )} */}\n\n        {/*\n        <Vector306 style={{ zIndex:0, position:'absolute', left:\"0px\", bottom:\"0px\"}} />\n        <Vector307 style={{ zIndex:0, position:'absolute', left:\"0px\", bottom:\"0px\"}} />\n        <Vector308 style={{ zIndex:0, position:'absolute', left:\"0px\", bottom:\"0px\"}} />\n        <Vector303 style={{ zIndex:0, position:'absolute', right:\"0px\", bottom:\"0px\"}} />\n        <Vector304 style={{ zIndex:0, position:'absolute', right:\"0px\", bottom:\"0px\"}} />\n        <Vector305 style={{ zIndex:0, position:'absolute', right:\"0px\", bottom:\"0px\"}} /> */}\n\n        <Hidden smUp>\n          <Grid xs={12}>\n            <Typography>\n              <br />\n            </Typography>\n            <IconButton\n              onClick={handleClose}\n              style={{ position: 'absolute', top: '0px', right: '0px' }}\n            >\n              <CloseIcon />\n            </IconButton>\n          </Grid>\n        </Hidden>\n\n        <div className={classes.carousel}>\n          <Slider {...settings}>\n            {images.map((image, index) => (\n              <img\n                key={index}\n                className={classes.img}\n                src={image}\n                alt={alt}\n                style={{ zIndex: 1 }}\n              />\n            ))}\n          </Slider>\n        </div>\n        <div\n          className={classes.pdtDetails}\n          style={{ zIndex: '1', color: '#033F63' }}\n        >\n          <Hidden xsDown>\n            <Grid xs={12}>\n              <IconButton\n                onClick={handleClose}\n                style={{ position: 'absolute', top: '0px', right: '0px' }}\n              >\n                <CloseIcon />\n              </IconButton>\n            </Grid>\n          </Hidden>\n          <Grid xs={11} style={{ zIndex: 0 }}>\n            <Typography\n              // className={classes.bottomSeparator}\n              variant=\"h4\"\n              component=\"h1\"\n            >\n              {name}\n            </Typography>\n            <Typography paragraph>{description}</Typography>\n\n            <Typography gutterBottom variant=\"h5\" component=\"h2\">\n              ${Number.isInteger(price) ? price : price.toFixed(2)}\n            </Typography>\n            <div className={classes.bottomSeparator}>\n              {colours.length > 0 && (\n                <>\n                  <Typography\n                    variant=\"body1\"\n                    component=\"h2\"\n                    className={classes.pdtOptions}\n                  >\n                    {attribute1}\n                  </Typography>\n                  <ToggleButtonGroup\n                    value={colour}\n                    exclusive\n                    onChange={setColourHandler}\n                    aria-label=\"select attribute1 option\"\n                    size=\"small\"\n                  >\n                    {colours.map((colour, index) => (\n                      <ToggleButton key={index} value={colour}>\n                        {colour}\n                      </ToggleButton>\n                    ))}\n                  </ToggleButtonGroup>\n                </>\n              )}\n              {sizes.length > 0 && (\n                <>\n                  <Typography\n                    variant=\"body1\"\n                    component=\"h2\"\n                    className={classes.pdtOptions}\n                  >\n                    {attribute2}\n                  </Typography>\n                  <ToggleButtonGroup\n                    value={size}\n                    exclusive\n                    onChange={setSizeHandler}\n                    aria-label=\"select attribute2 option\"\n                    size=\"small\"\n                  >\n                    {sizes.map((size, index) => (\n                      <ToggleButton key={index} value={size}>\n                        {size}\n                      </ToggleButton>\n                    ))}\n                  </ToggleButtonGroup>\n                </>\n              )}\n            </div>\n            <Quantity\n              quantity={quantityBought}\n              changeState={(quantity) => setQuantity(quantity)}\n            />\n            <Typography variant=\"body1\" style={{ fontWeight: 'bold' }}>\n              {canCollect && canDeliver\n                ? 'You can receive this product via self-collection or delivery.'\n                : canCollect\n                ? 'This product must be self-collected.'\n                : 'This product must be delivered.'}\n            </Typography>\n            <br></br>\n\n            <Typography variant=\"body1\">\n              Lead Time: {leadTime} days (For self-collection) <br></br>\n              {/* {isValidPurchase(date1,leadTime) ? 'This product is available for collection on 14 Feb.' : 'This product is not available for collection on 14 Feb.'}\n              <br></br>\n              {isValidPurchase(date2,leadTime) ? 'This product is available for collection on 23 Feb.' : 'This product is not available for collection on 23 Feb.'} */}\n              {/* Lead time refers to the amount of days the vendor needs to prepare the product. <br></br>\n              Thus, the latest possible date of purchase will be the number of days before your indicated self-collection date.  */}\n            </Typography>\n\n            {isValidPurchase(date1, leadTime) ? (\n              <Typography style={{ color: '#00FF00' }}>\n                This product is available for collection on 23 Feb.\n              </Typography>\n            ) : (\n              <Typography style={{ color: '#FF0000' }}>\n                This product is not available for collection on 23 Feb.\n              </Typography>\n            )}\n            {isValidPurchase(date2, leadTime) ? (\n              <Typography style={{ color: '#00FF00' }}>\n                This product is available for collection on 09 Mar.\n              </Typography>\n            ) : (\n              <Typography style={{ color: '#FF0000' }}>\n                This product is not available for collection on 09 Mar.\n              </Typography>\n            )}\n\n            <div>\n              <Grid container xs={12} style={{ paddingBottom: '10px' }}>\n                <Typography xs={6}>\n                  <LinkButton\n                    to={`/vendorpage/${vendorId}`}\n                    className={classes.actionButton}\n                    variant=\"contained\"\n                    style={{ backgroundColor: '#28666E', color: '#FDFBE2' }}\n                  >\n                    View Vendor\n                  </LinkButton>\n                </Typography>\n                <Grid xs={6} style={{ minWidth: '180px' }}>\n                  <Button\n                    className={classes.actionButton}\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    onClick={handleClickOpen} //confirmation before adding to cart\n                    disabled={quantityBought + varNumInCart > indivQuantity}\n\n                    // disabled\n                  >\n                    Add to Cart\n                  </Button>\n                </Grid>\n              </Grid>\n\n              {open && (\n                <ConfirmationDialog\n                  //callback\n                  title=\"Add this product to cart?\"\n                  content={`${quantityBought}x ${name} ${\n                    attribute1.length !== 0\n                      ? `with ${attribute1}: ${colour}`\n                      : ''\n                  } ${\n                    attribute2.length !== 0 ? `and ${attribute2}: ${size}` : ''\n                  }`}\n                  parentCallback={handleDialogResult}\n                />\n              )}\n              <Snackbar\n                anchorOrigin={{\n                  vertical: 'bottom',\n                  horizontal: 'left',\n                }}\n                open={snackbarOpen}\n                autoHideDuration={6000}\n                onClose={handleCloseSnackbar}\n                message={`${quantityBought}x ${name} ${\n                  attribute1.length !== 0 ? `with ${attribute1}: ${colour}` : ''\n                } ${\n                  attribute2.length !== 0 ? `and ${attribute2}: ${size}` : ''\n                } has been added to your cart.`}\n                action={\n                  <React.Fragment>\n                    <IconButton\n                      size=\"small\"\n                      aria-label=\"close\"\n                      color=\"inherit\"\n                      onClick={handleCloseSnackbar}\n                    >\n                      <CloseIcon fontSize=\"small\" />\n                    </IconButton>\n                  </React.Fragment>\n                }\n              />\n            </div>\n            <Typography variant=\"subtitle2\" component=\"p\">\n              There {indivQuantity === 1 ? 'is' : 'are'} currently{' '}\n              {indivQuantity > 100 ? 'many' : indivQuantity} in stock.\n            </Typography>\n            <Typography variant=\"subtitle2\" component=\"p\">\n              There {varNumInCart === 1 ? 'is' : 'are'} currently {varNumInCart}{' '}\n              in your cart.\n            </Typography>\n          </Grid>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}