{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import adminService from'../services/admin';import orderService from'../services/orders';import workshopService from'../services/workshops';import photoService from'../services/photog';import donationService from'../services/donations';import vendorService from'../services/vendors';import AdminLogin from'../Authentication/AdminLogin';import Logout from'../Authentication/Logout';import{Button,Switch,IconButton,TextField,OutlinedInput,InputLabel,FormControl,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper}from'@material-ui/core';import Autocomplete from'@material-ui/lab/Autocomplete';import DoneIcon from'@material-ui/icons/Done';import DeleteIcon from'@material-ui/icons/Delete';import GetAppIcon from'@material-ui/icons/GetApp';import MailIcon from'@material-ui/icons/Mail';import AddIcon from'@material-ui/icons/Add';import FileDownload from'js-file-download';import{useHistory}from'react-router-dom';import Select from'@material-ui/core/Select';import MenuItem from'@material-ui/core/MenuItem';import{LoadingSpinnerComponent}from'../utils/LoadingSpinnerComponent';import{trackPromise}from'react-promise-tracker';import{usePromiseTracker}from'react-promise-tracker';import ConfirmationDialog from'../Components/ConfirmationDialog';import InputAdornment from'@material-ui/core/InputAdornment';import VerifyWorkshops from'./VerifyWorkshops';var useStyles=makeStyles(function(theme){return{root:{flexGrow:1},paddedItem:{padding:theme.spacing(3)},formSection:{marginTop:theme.spacing(2),marginBottom:theme.spacing(2),display:'block'}};});function AdminManage(props){var classes=useStyles();var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),workshops=_useState4[0],setWorkshops=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),auth=_useState6[0],setAuth=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),checked=_useState8[0],setChecked=_useState8[1];var _useState9=useState({emailAddress:'',points:0,category:''}),_useState10=_slicedToArray(_useState9,2),state=_useState10[0],setState=_useState10[1];var _useState11=useState('23febslot1'),_useState12=_slicedToArray(_useState11,2),selfCollDate=_useState12[0],setSelfCollDate=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),openDelete=_useState14[0],setOpenDelete=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),openVerify=_useState16[0],setOpenVerify=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),openEmail=_useState18[0],setOpenEmail=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),orderToDelete=_useState20[0],setDeleteOrder=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),orderToVerify=_useState22[0],setVerifyOrder=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),workshopEmail=_useState24[0],setEmailWorkshop=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),vendors=_useState26[0],setVendors=_useState26[1];//donation tracker states\nvar _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),donations=_useState28[0],setDonations=_useState28[1];var _useState29=useState({name:'',amount:0}),_useState30=_slicedToArray(_useState29,2),donationUpdate=_useState30[0],setDonationUpdate=_useState30[1];var categories=[// '#IMADETHISwNAF',\n// 'Workshop',\n// 'Virtual Busking Quiz',\n// 'Art-Verse Quiz',\n'Workshop','Stamp Hunt Submission','Sticker Olympia Submission'];var handleChange=function handleChange(event){setChecked(event.target.checked);};var handleSelfCollChange=function handleSelfCollChange(event){setSelfCollDate(event.target.value);};var handleInputChange=function handleInputChange(prop){return function(event){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},prop,event.target.value)));};};var handleDonationInputChange=function handleDonationInputChange(prop){return function(event){setDonationUpdate(_objectSpread(_objectSpread({},donationUpdate),{},_defineProperty({},prop,event.target.value)));};};var handleLoginClose=function handleLoginClose(){setAuth(true);};var handleNotAuth=function handleNotAuth(){setAuth(false);};var _usePromiseTracker=usePromiseTracker(),promiseInProgress=_usePromiseTracker.promiseInProgress;useEffect(function(){// console.log('Fetch orders');\nfunction fetchOrderData(){return _fetchOrderData.apply(this,arguments);}function _fetchOrderData(){_fetchOrderData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return orderService.getOrders(checked,false);case 2:res=_context.sent;if(res.status===200){setOrders(res.data);}else if(res.status===401){setAuth(false);}else{alert('Issues with fetching orders');}case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchOrderData.apply(this,arguments);}fetchOrderData();},[checked,auth]);useEffect(function(){// console.log('Fetch orders');\nfunction fetchVendorData(){return _fetchVendorData.apply(this,arguments);}function _fetchVendorData(){_fetchVendorData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return vendorService.getAllVendors();case 2:res=_context2.sent;if(res.status===200){setVendors(res.data);}else if(res.status===401){setAuth(false);}else{alert('Issues with fetching vendors');}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchVendorData.apply(this,arguments);}fetchVendorData();},[checked,auth]);useEffect(function(){function fetchWorkshopData(){return _fetchWorkshopData.apply(this,arguments);}function _fetchWorkshopData(){_fetchWorkshopData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log('Fetch workshops');_context3.next=3;return adminService.getWorkshops();case 3:res=_context3.sent;//this line not getting workshops.\nif(res.status===200){setWorkshops(res.data);}else if(res.status===401){setAuth(false);}else{alert('Issues with fetching workshops');}case 5:case\"end\":return _context3.stop();}}},_callee3);}));return _fetchWorkshopData.apply(this,arguments);}fetchWorkshopData();},[]);useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return donationService.getDonations();case 2:res=_context4.sent;if(res.status===200){setDonations(res.data);}//  else {\n//   alert('Error loading donations :(');\n// }\ncase 4:case\"end\":return _context4.stop();}}},_callee4);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var handleConfirmVerify=function handleConfirmVerify(order_id){setVerifyOrder(order_id);setOpenVerify(true);};var handleConfirmDelete=function handleConfirmDelete(order_id){setDeleteOrder(order_id);setOpenDelete(true);};var handleConfirmEmail=function handleConfirmEmail(workshop_id){setEmailWorkshop(workshop_id);setOpenEmail(true);};var handleDialogResult=function handleDialogResult(continueAction){if(openDelete){setOpenDelete(false);if(continueAction){deleteOrder();}}else if(openVerify){setOpenVerify(false);if(continueAction){verifyOrder();}}else if(openEmail){setOpenEmail(false);if(continueAction){workshopSendReminder();}}};var verifyOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(orderToVerify==null)){_context5.next=4;break;}alert('No order selected to be verified!');_context5.next=8;break;case 4:_context5.next=6;return trackPromise(adminService.verifyOrder(orderToVerify));case 6:res=_context5.sent;// console.log(auth);\nif(res.status===200){history.go(0);}else if(res.status===401){setAuth(false);}else{alert(res.data.error);}case 8:case\"end\":return _context5.stop();}}},_callee5);}));return function verifyOrder(){return _ref.apply(this,arguments);};}();var deleteOrder=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(orderToDelete==null)){_context6.next=4;break;}alert('No order selected to be deleted!');_context6.next=8;break;case 4:_context6.next=6;return orderService.deleteOrder(orderToDelete);case 6:res=_context6.sent;if(res.status===200){history.go(0);}else if(res.status===401){setAuth(false);}else{alert(\"\".concat(res.status,\", \").concat(JSON.stringify(res.data)));}case 8:case\"end\":return _context6.stop();}}},_callee6);}));return function deleteOrder(){return _ref2.apply(this,arguments);};}();var downloadOrders=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:console.log(workshops);_context7.next=3;return orderService.downloadOrdersAdmin();case 3:res=_context7.sent;// console.log(auth);\nif(res.status===200){FileDownload(res.data,'orders.csv');}else if(res.status===401){setAuth(false);}else{alert(res.data.error);}case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function downloadOrders(){return _ref3.apply(this,arguments);};}();var downloadVendorOrders=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(vendor_id,vendor_name){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return orderService.downloadOrdersVendor(vendor_id);case 2:res=_context8.sent;// console.log(auth);\nif(res.status===200){FileDownload(res.data,\"\".concat(vendor_name,\".csv\"));}else if(res.status===401){setAuth(false);}else{alert(res.data.error);}case 4:case\"end\":return _context8.stop();}}},_callee8);}));return function downloadVendorOrders(_x,_x2){return _ref4.apply(this,arguments);};}();var downloadWorkshops=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return workshopService.downloadWorkshops();case 2:res=_context9.sent;// console.log(auth);\nif(res.status===200){FileDownload(res.data,'workshops.csv');}else if(res.status===401){setAuth(false);}else{alert(res.data.error);}case 4:case\"end\":return _context9.stop();}}},_callee9);}));return function downloadWorkshops(){return _ref5.apply(this,arguments);};}();var downloadIndivWorkshop=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(workshopId,workshopName){var res;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return workshopService.downloadIndivWorkshop(workshopId);case 2:res=_context10.sent;if(res.status===200){FileDownload(res.data,\"\".concat(workshopName,\".csv\"));}else if(res.status===401){setAuth(false);}else{alert(res.data.error);}case 4:case\"end\":return _context10.stop();}}},_callee10);}));return function downloadIndivWorkshop(_x3,_x4){return _ref6.apply(this,arguments);};}();var downloadPhotos=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var res;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return photoService.downloadPhotos();case 2:res=_context11.sent;if(res.status===200){FileDownload(res.data,'photos.csv');}else if(res.status===401){setAuth(false);}else{alert(res.data.error);}case 4:case\"end\":return _context11.stop();}}},_callee11);}));return function downloadPhotos(){return _ref7.apply(this,arguments);};}();var downloadLuckyDraw=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var res;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return adminService.downloadLuckyDraw();case 2:res=_context12.sent;if(res.status===200){FileDownload(res.data,'luckydraw.csv');}else if(res.status===401){setAuth(false);}else{alert(res.data);}case 4:case\"end\":return _context12.stop();}}},_callee12);}));return function downloadLuckyDraw(){return _ref8.apply(this,arguments);};}();var downloadVotes=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var res;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return adminService.downloadVotes();case 2:res=_context13.sent;if(res.status===200){FileDownload(res.data,'photovotes.csv');}else if(res.status===401){setAuth(false);}else{alert(res.data);}case 4:case\"end\":return _context13.stop();}}},_callee13);}));return function downloadVotes(){return _ref9.apply(this,arguments);};}();var sendEmails=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(event){var res;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:event.preventDefault();_context14.next=3;return trackPromise(adminService.sendEmails(selfCollDate));case 3:res=_context14.sent;if(res.status===200){alert('Successfully sent!');}else{alert(res.data.error);}case 5:case\"end\":return _context14.stop();}}},_callee14);}));return function sendEmails(_x5){return _ref10.apply(this,arguments);};}();var workshopSendReminder=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(){var res;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:if(workshopEmail==null){alert('No workshop selected to email!');}_context15.next=3;return trackPromise(adminService.sendWorkshopReminderEmails(workshopEmail));case 3:res=_context15.sent;if(res.status===200){alert('Successfully sent!');}else{alert(\"\".concat(res.status));}case 5:case\"end\":return _context15.stop();}}},_callee15);}));return function workshopSendReminder(){return _ref11.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(event){var newInput,res;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:event.preventDefault();newInput={points:state.points,category:state.category};_context16.next=4;return adminService.addPoints(newInput,state.emailAddress);case 4:res=_context16.sent;if(res.status===200){alert('Added points successfully');}else{alert('Error while adding points');}case 6:case\"end\":return _context16.stop();}}},_callee16);}));return function handleSubmit(_x6){return _ref12.apply(this,arguments);};}();var handleDonationSubmit=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(event){var newInput,res;return _regeneratorRuntime.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:event.preventDefault();newInput={amount:parseFloat(donationUpdate.amount)};_context17.next=4;return donationService.updateDonations(donationUpdate.name,newInput);case 4:res=_context17.sent;if(res.status===200){alert('Updated donation tracker successfully');}else{alert('Error while updating donation tracker');}case 6:case\"end\":return _context17.stop();}}},_callee17);}));return function handleDonationSubmit(_x7){return _ref13.apply(this,arguments);};}();// function to bump workshop waitlist\nvar bumpWorkshopWaitlist=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(){var res;return _regeneratorRuntime.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_context18.next=2;return trackPromise(adminService.bumpWaitlist());case 2:res=_context18.sent;if(res.status===200){alert('Successfully bumped waitlist.');}else{alert(\"\".concat(res.status));}case 4:case\"end\":return _context18.stop();}}},_callee18);}));return function bumpWorkshopWaitlist(){return _ref14.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(LoadingSpinnerComponent,null),!auth&&/*#__PURE__*/React.createElement(AdminLogin,{parentCallback:handleLoginClose}),auth?/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Typography,{className:classes.paddedItem,variant:\"h4\"},checked===true?'Verified Orders':'Unverified Orders'),/*#__PURE__*/React.createElement(Logout,null),/*#__PURE__*/React.createElement(Switch,{checked:checked,onChange:handleChange,inputProps:{'aria-label':'secondary checkbox'}}),openDelete&&/*#__PURE__*/React.createElement(ConfirmationDialog//callback\n,{title:\"Delete Order?\",content:'Are you sure you want to remove this order?',parentCallback:handleDialogResult}),openVerify&&/*#__PURE__*/React.createElement(ConfirmationDialog//callback\n,{title:\"Verify Order?\",content:'Are you sure you want to verify this order?',parentCallback:handleDialogResult}),/*#__PURE__*/React.createElement(TableContainer,{component:Paper},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Order Number\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Buyer\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Email Address\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Contact number\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Total\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Date time\"))),/*#__PURE__*/React.createElement(TableBody,null,orders&&orders.map(function(order,index){return/*#__PURE__*/React.createElement(TableRow,{key:index},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},order.orderNumber),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},order.name),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},order.emailAddress),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},order.contactNumber),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},Number.isInteger(order.total)?order.total:order.total.toFixed(2)),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},order.datetime),!checked&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IconButton,{edge:\"end\",\"aria-label\":\"download\",disabled:promiseInProgress},/*#__PURE__*/React.createElement(DoneIcon,{onClick:function onClick(){return handleConfirmVerify(order._id);}})),/*#__PURE__*/React.createElement(IconButton,{edge:\"end\",\"aria-label\":\"delete\",disabled:promiseInProgress},/*#__PURE__*/React.createElement(DeleteIcon,{onClick:function onClick(){return handleConfirmDelete(order._id);}}))));})))),vendors&&vendors.map(function(vendor,index){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{key:index,variant:\"contained\",color:\"default\",className:classes.button,startIcon:/*#__PURE__*/React.createElement(GetAppIcon,null),onClick:function onClick(){return downloadVendorOrders(vendor._id,vendor.displayName);},disabled:promiseInProgress},\"Download \",vendor.displayName,\" orders\"),/*#__PURE__*/React.createElement(\"br\",null));}),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"default\",className:classes.button,startIcon:/*#__PURE__*/React.createElement(GetAppIcon,null),onClick:downloadOrders,disabled:promiseInProgress},\"Download Orders\"),/*#__PURE__*/React.createElement(Typography,{className:classes.paddedItem,variant:\"h4\"},\"Send Reminder Emails\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,autoComplete:\"off\",onSubmit:sendEmails},/*#__PURE__*/React.createElement(FormControl,{color:\"secondary\",className:classes.formSection},/*#__PURE__*/React.createElement(InputLabel,null,\"Self Collection Date\"),/*#__PURE__*/React.createElement(Select,{value:selfCollDate,onChange:handleSelfCollChange},/*#__PURE__*/React.createElement(MenuItem,{value:'23febslot1'},\"23 February 12-4pm\"),/*#__PURE__*/React.createElement(MenuItem,{value:'09marslot1'},\"9th March 2-6pm\"))),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"default\",className:classes.button,startIcon:/*#__PURE__*/React.createElement(MailIcon,null)},\"Send Email\")),/*#__PURE__*/React.createElement(Typography,{className:classes.paddedItem,variant:\"h4\"},\"Workshops\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"default\",className:classes.button,startIcon:/*#__PURE__*/React.createElement(GetAppIcon,null),onClick:bumpWorkshopWaitlist},\"Bump Workshop Waitlist\"),openEmail&&/*#__PURE__*/React.createElement(ConfirmationDialog//callback\n,{title:\"Send Email?\",content:'Are you sure you want to send emails?',parentCallback:handleDialogResult}),/*#__PURE__*/React.createElement(TableContainer,{component:Paper},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Workshop\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Sign Ups\"))),/*#__PURE__*/React.createElement(TableBody,null,workshops&&workshops.map(function(workshop,index){return/*#__PURE__*/React.createElement(TableRow,{key:index},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},workshop.name),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"\".concat(workshop.registeredParticipants.length,\"/\").concat(workshop.maxParticipants)),/*#__PURE__*/React.createElement(IconButton,{edge:\"end\",\"aria-label\":\"download\"},/*#__PURE__*/React.createElement(GetAppIcon,{onClick:function onClick(){return downloadIndivWorkshop(workshop._id,workshop.name);}})),/*#__PURE__*/React.createElement(IconButton,{edge:\"end\",\"aria-label\":\"emails\"},/*#__PURE__*/React.createElement(MailIcon,{onClick:function onClick(){return handleConfirmEmail(workshop._id);}})));})))),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"default\",className:classes.button,startIcon:/*#__PURE__*/React.createElement(GetAppIcon,null),onClick:downloadWorkshops},\"Download All Workshop Sign Ups\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(VerifyWorkshops,{handleNotAuth:handleNotAuth,workshops:workshops}),/*#__PURE__*/React.createElement(Typography,{className:classes.paddedItem,variant:\"h4\"},\"Photos\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"default\",className:classes.button,startIcon:/*#__PURE__*/React.createElement(GetAppIcon,null),onClick:downloadPhotos,disabled:promiseInProgress},\"Download Photos\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"default\",className:classes.button,startIcon:/*#__PURE__*/React.createElement(GetAppIcon,null),onClick:downloadVotes,disabled:promiseInProgress},\"Download Votes Data\"),/*#__PURE__*/React.createElement(Typography,{className:classes.paddedItem,variant:\"h4\"},\"Add Lucky Draw Points\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,autoComplete:\"off\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(TextField,{required:true,id:\"email-address\",label:\"Email Address\",type:\"text\",variant:\"outlined\",color:\"secondary\",onChange:handleInputChange('emailAddress')}),/*#__PURE__*/React.createElement(FormControl,{required:true,variant:\"outlined\",color:\"secondary\",className:classes.formSection},/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"points\"},\"Points\"),/*#__PURE__*/React.createElement(OutlinedInput,{id:\"points\",onChange:handleInputChange('points'),labelWidth:60,inputProps:{pattern:'[0-9]*'},type:\"number\"})),/*#__PURE__*/React.createElement(FormControl,{required:true,variant:\"outlined\",color:\"secondary\",className:classes.formSection},/*#__PURE__*/React.createElement(Autocomplete,{id:\"points-category\",options:categories,getOptionLabel:function getOptionLabel(option){return option;},style:{width:300},onChange:function onChange(event,newInputValue){setState(_objectSpread(_objectSpread({},state),{},{category:newInputValue}));},renderInput:function renderInput(params){return/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{required:true,color:\"secondary\",label:\"Category\",variant:\"outlined\",value:state.category}));}})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"default\",className:classes.button,endIcon:/*#__PURE__*/React.createElement(AddIcon,null)},\"Add Points\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"default\",className:classes.button,startIcon:/*#__PURE__*/React.createElement(GetAppIcon,null),onClick:downloadLuckyDraw,disabled:promiseInProgress},\"Download Lucky Draw Data\"),/*#__PURE__*/React.createElement(Typography,{className:classes.paddedItem,variant:\"h4\"},\"Update Donation Tracker\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,autoComplete:\"off\",onSubmit:handleDonationSubmit},/*#__PURE__*/React.createElement(FormControl,{required:true,variant:\"outlined\",color:\"secondary\",className:classes.formSection},/*#__PURE__*/React.createElement(Autocomplete,{id:\"select-donation-category\",options:_toConsumableArray(donations.map(function(donation){return donation.name;})),getOptionLabel:function getOptionLabel(option){return option;},style:{width:300},name:\"name\",onChange:function onChange(event,newName){setDonationUpdate(_objectSpread(_objectSpread({},donationUpdate),{},{name:newName}));},renderInput:function renderInput(params){return/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{required:true,color:\"secondary\",label:\"Category\",variant:\"outlined\",value:donationUpdate.name}));}})),/*#__PURE__*/React.createElement(Typography,{style:{paddingBottom:20}},donationUpdate.name!==''&&donationUpdate.name!==null&&\"Current amount for \".concat(donationUpdate.name,\": $\\n              \").concat(donations.find(function(donation){return donation.name===donationUpdate.name;})?donations.find(function(donation){return donation.name===donationUpdate.name;}).amount:0)),/*#__PURE__*/React.createElement(FormControl,{required:true,variant:\"outlined\",color:\"secondary\",name:\"amount\",style:{display:'block',maxWidth:300,paddingBottom:10}},/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"donation amount\"},\"New Donation Amount\"),/*#__PURE__*/React.createElement(OutlinedInput,{id:\"price\",value:donationUpdate.amount,name:\"amount\",onChange:handleDonationInputChange('amount'),startAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"start\"},\"$\"),fullWidth:true,labelWidth:170,inputProps:{min:'0',step:'0.01'// pattern: '[0-9]*',\n},type:\"number\"})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"secondary\",className:classes.button},\"Update Donation Tracker\"))):null);}export default AdminManage;","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/AdminInterface/AdminManage.js"],"names":["React","useState","useEffect","Typography","makeStyles","adminService","orderService","workshopService","photoService","donationService","vendorService","AdminLogin","Logout","Button","Switch","IconButton","TextField","OutlinedInput","InputLabel","FormControl","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Autocomplete","DoneIcon","DeleteIcon","GetAppIcon","MailIcon","AddIcon","FileDownload","useHistory","Select","MenuItem","LoadingSpinnerComponent","trackPromise","usePromiseTracker","ConfirmationDialog","InputAdornment","VerifyWorkshops","useStyles","theme","root","flexGrow","paddedItem","padding","spacing","formSection","marginTop","marginBottom","display","AdminManage","props","classes","history","orders","setOrders","workshops","setWorkshops","auth","setAuth","checked","setChecked","emailAddress","points","category","state","setState","selfCollDate","setSelfCollDate","openDelete","setOpenDelete","openVerify","setOpenVerify","openEmail","setOpenEmail","orderToDelete","setDeleteOrder","orderToVerify","setVerifyOrder","workshopEmail","setEmailWorkshop","vendors","setVendors","donations","setDonations","name","amount","donationUpdate","setDonationUpdate","categories","handleChange","event","target","handleSelfCollChange","value","handleInputChange","prop","handleDonationInputChange","handleLoginClose","handleNotAuth","promiseInProgress","fetchOrderData","getOrders","res","status","data","alert","fetchVendorData","getAllVendors","fetchWorkshopData","console","log","getWorkshops","fetchData","getDonations","handleConfirmVerify","order_id","handleConfirmDelete","handleConfirmEmail","workshop_id","handleDialogResult","continueAction","deleteOrder","verifyOrder","workshopSendReminder","go","error","JSON","stringify","downloadOrders","downloadOrdersAdmin","downloadVendorOrders","vendor_id","vendor_name","downloadOrdersVendor","downloadWorkshops","downloadIndivWorkshop","workshopId","workshopName","downloadPhotos","downloadLuckyDraw","downloadVotes","sendEmails","preventDefault","sendWorkshopReminderEmails","handleSubmit","newInput","addPoints","handleDonationSubmit","parseFloat","updateDonations","bumpWorkshopWaitlist","bumpWaitlist","table","map","order","index","orderNumber","contactNumber","Number","isInteger","total","toFixed","datetime","_id","vendor","button","displayName","form","workshop","registeredParticipants","length","maxParticipants","pattern","option","width","newInputValue","params","donation","newName","paddingBottom","find","maxWidth","min","step"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport adminService from '../services/admin';\nimport orderService from '../services/orders';\nimport workshopService from '../services/workshops';\nimport photoService from '../services/photog';\nimport donationService from '../services/donations';\nimport vendorService from '../services/vendors';\nimport AdminLogin from '../Authentication/AdminLogin';\nimport Logout from '../Authentication/Logout';\n\nimport {\n  Button,\n  Switch,\n  IconButton,\n  TextField,\n  OutlinedInput,\n  InputLabel,\n  FormControl,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n} from '@material-ui/core';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport DoneIcon from '@material-ui/icons/Done';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport MailIcon from '@material-ui/icons/Mail';\nimport AddIcon from '@material-ui/icons/Add';\nimport FileDownload from 'js-file-download';\nimport { useHistory } from 'react-router-dom';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { trackPromise } from 'react-promise-tracker';\nimport { usePromiseTracker } from 'react-promise-tracker';\nimport ConfirmationDialog from '../Components/ConfirmationDialog';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport VerifyWorkshops from './VerifyWorkshops';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  paddedItem: {\n    padding: theme.spacing(3),\n  },\n  formSection: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n    display: 'block',\n  },\n}));\n\nfunction AdminManage(props) {\n  const classes = useStyles();\n  const history = useHistory();\n  const [orders, setOrders] = useState([]);\n  const [workshops, setWorkshops] = useState([]);\n  const [auth, setAuth] = useState(true);\n  const [checked, setChecked] = useState(false);\n  const [state, setState] = useState({\n    emailAddress: '',\n    points: 0,\n    category: '',\n  });\n  const [selfCollDate, setSelfCollDate] = useState('23febslot1');\n  const [openDelete, setOpenDelete] = useState(false);\n  const [openVerify, setOpenVerify] = useState(false);\n  const [openEmail, setOpenEmail] = useState(false);\n  const [orderToDelete, setDeleteOrder] = useState(null);\n  const [orderToVerify, setVerifyOrder] = useState(null);\n  const [workshopEmail, setEmailWorkshop] = useState(null);\n  const [vendors, setVendors] = useState([]);\n\n  //donation tracker states\n  const [donations, setDonations] = useState([]);\n  const [donationUpdate, setDonationUpdate] = useState({ name: '', amount: 0 });\n\n  const categories = [\n    // '#IMADETHISwNAF',\n    // 'Workshop',\n    // 'Virtual Busking Quiz',\n    // 'Art-Verse Quiz',\n    'Workshop',\n    'Stamp Hunt Submission',\n    'Sticker Olympia Submission',\n  ];\n\n  const handleChange = (event) => {\n    setChecked(event.target.checked);\n  };\n\n  const handleSelfCollChange = (event) => {\n    setSelfCollDate(event.target.value);\n  };\n\n  const handleInputChange = (prop) => (event) => {\n    setState({ ...state, [prop]: event.target.value });\n  };\n\n  const handleDonationInputChange = (prop) => (event) => {\n    setDonationUpdate({ ...donationUpdate, [prop]: event.target.value });\n  };\n\n  const handleLoginClose = () => {\n    setAuth(true);\n  };\n\n  const handleNotAuth = () => {\n    setAuth(false);\n  };\n\n  const { promiseInProgress } = usePromiseTracker();\n\n  useEffect(() => {\n    // console.log('Fetch orders');\n    async function fetchOrderData() {\n      const res = await orderService.getOrders(checked, false);\n      if (res.status === 200) {\n        setOrders(res.data);\n      } else if (res.status === 401) {\n        setAuth(false);\n      } else {\n        alert('Issues with fetching orders');\n      }\n    }\n    fetchOrderData();\n  }, [checked, auth]);\n\n  useEffect(() => {\n    // console.log('Fetch orders');\n    async function fetchVendorData() {\n      const res = await vendorService.getAllVendors();\n      if (res.status === 200) {\n        setVendors(res.data);\n      } else if (res.status === 401) {\n        setAuth(false);\n      } else {\n        alert('Issues with fetching vendors');\n      }\n    }\n    fetchVendorData();\n  }, [checked, auth]);\n\n  useEffect(() => {\n    async function fetchWorkshopData() {\n      console.log('Fetch workshops');\n      const res = await adminService.getWorkshops(); //this line not getting workshops.\n      if (res.status === 200) {\n        setWorkshops(res.data);\n      } else if (res.status === 401) {\n        setAuth(false);\n      } else {\n        alert('Issues with fetching workshops');\n      }\n    }\n    fetchWorkshopData();\n  }, []);\n\n  useEffect(() => {\n    async function fetchData() {\n      const res = await donationService.getDonations();\n      if (res.status === 200) {\n        setDonations(res.data);\n      }\n      //  else {\n      //   alert('Error loading donations :(');\n      // }\n    }\n    fetchData();\n  }, []);\n\n  const handleConfirmVerify = (order_id) => {\n    setVerifyOrder(order_id);\n    setOpenVerify(true);\n  };\n\n  const handleConfirmDelete = (order_id) => {\n    setDeleteOrder(order_id);\n    setOpenDelete(true);\n  };\n\n  const handleConfirmEmail = (workshop_id) => {\n    setEmailWorkshop(workshop_id);\n    setOpenEmail(true);\n  };\n\n  const handleDialogResult = (continueAction) => {\n    if (openDelete) {\n      setOpenDelete(false);\n      if (continueAction) {\n        deleteOrder();\n      }\n    } else if (openVerify) {\n      setOpenVerify(false);\n      if (continueAction) {\n        verifyOrder();\n      }\n    } else if (openEmail) {\n      setOpenEmail(false);\n      if (continueAction) {\n        workshopSendReminder();\n      }\n    }\n  };\n  const verifyOrder = async () => {\n    if (orderToVerify == null) {\n      alert('No order selected to be verified!');\n    } else {\n      const res = await trackPromise(adminService.verifyOrder(orderToVerify));\n      // console.log(auth);\n      if (res.status === 200) {\n        history.go(0);\n      } else if (res.status === 401) {\n        setAuth(false);\n      } else {\n        alert(res.data.error);\n      }\n    }\n  };\n\n  const deleteOrder = async () => {\n    if (orderToDelete == null) {\n      alert('No order selected to be deleted!');\n    } else {\n      const res = await orderService.deleteOrder(orderToDelete);\n      if (res.status === 200) {\n        history.go(0);\n      } else if (res.status === 401) {\n        setAuth(false);\n      } else {\n        alert(`${res.status}, ${JSON.stringify(res.data)}`);\n      }\n    }\n  };\n\n  const downloadOrders = async () => {\n    console.log(workshops);\n    const res = await orderService.downloadOrdersAdmin();\n    // console.log(auth);\n    if (res.status === 200) {\n      FileDownload(res.data, 'orders.csv');\n    } else if (res.status === 401) {\n      setAuth(false);\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const downloadVendorOrders = async (vendor_id, vendor_name) => {\n    const res = await orderService.downloadOrdersVendor(vendor_id);\n    // console.log(auth);\n    if (res.status === 200) {\n      FileDownload(res.data, `${vendor_name}.csv`);\n    } else if (res.status === 401) {\n      setAuth(false);\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const downloadWorkshops = async () => {\n    const res = await workshopService.downloadWorkshops();\n    // console.log(auth);\n    if (res.status === 200) {\n      FileDownload(res.data, 'workshops.csv');\n    } else if (res.status === 401) {\n      setAuth(false);\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const downloadIndivWorkshop = async (workshopId, workshopName) => {\n    const res = await workshopService.downloadIndivWorkshop(workshopId);\n    if (res.status === 200) {\n      FileDownload(res.data, `${workshopName}.csv`);\n    } else if (res.status === 401) {\n      setAuth(false);\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const downloadPhotos = async () => {\n    const res = await photoService.downloadPhotos();\n    if (res.status === 200) {\n      FileDownload(res.data, 'photos.csv');\n    } else if (res.status === 401) {\n      setAuth(false);\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const downloadLuckyDraw = async () => {\n    const res = await adminService.downloadLuckyDraw();\n    if (res.status === 200) {\n      FileDownload(res.data, 'luckydraw.csv');\n    } else if (res.status === 401) {\n      setAuth(false);\n    } else {\n      alert(res.data);\n    }\n  };\n\n  const downloadVotes = async () => {\n    const res = await adminService.downloadVotes();\n    if (res.status === 200) {\n      FileDownload(res.data, 'photovotes.csv');\n    } else if (res.status === 401) {\n      setAuth(false);\n    } else {\n      alert(res.data);\n    }\n  };\n\n  const sendEmails = async (event) => {\n    event.preventDefault();\n    const res = await trackPromise(adminService.sendEmails(selfCollDate));\n    if (res.status === 200) {\n      alert('Successfully sent!');\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const workshopSendReminder = async () => {\n    if (workshopEmail == null) {\n      alert('No workshop selected to email!');\n    }\n    const res = await trackPromise(\n      adminService.sendWorkshopReminderEmails(workshopEmail)\n    );\n    if (res.status === 200) {\n      alert('Successfully sent!');\n    } else {\n      alert(`${res.status}`);\n    }\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const newInput = {\n      points: state.points,\n      category: state.category,\n    };\n    const res = await adminService.addPoints(newInput, state.emailAddress);\n    if (res.status === 200) {\n      alert('Added points successfully');\n    } else {\n      alert('Error while adding points');\n    }\n  };\n\n  const handleDonationSubmit = async (event) => {\n    event.preventDefault();\n    const newInput = {\n      amount: parseFloat(donationUpdate.amount),\n    };\n    const res = await donationService.updateDonations(\n      donationUpdate.name,\n      newInput\n    );\n    if (res.status === 200) {\n      alert('Updated donation tracker successfully');\n    } else {\n      alert('Error while updating donation tracker');\n    }\n  };\n\n  // function to bump workshop waitlist\n  const bumpWorkshopWaitlist = async () => {\n    // TBD: any checks necessary??\n    // TBD: not sure if trackPromise required or not\n    const res = await trackPromise(adminService.bumpWaitlist());\n    if (res.status === 200) {\n      alert('Successfully bumped waitlist.');\n    } else {\n      alert(`${res.status}`);\n    }\n  };\n\n  return (\n    <>\n      <LoadingSpinnerComponent />\n      {!auth && <AdminLogin parentCallback={handleLoginClose} />}\n      {auth ? (\n        <div className={classes.root}>\n          <Typography className={classes.paddedItem} variant=\"h4\">\n            {checked === true ? 'Verified Orders' : 'Unverified Orders'}\n          </Typography>\n          <Logout />\n          <Switch\n            checked={checked}\n            onChange={handleChange}\n            inputProps={{ 'aria-label': 'secondary checkbox' }}\n          />\n          {openDelete && (\n            <ConfirmationDialog\n              //callback\n              title=\"Delete Order?\"\n              content={'Are you sure you want to remove this order?'}\n              parentCallback={handleDialogResult}\n            />\n          )}\n          {openVerify && (\n            <ConfirmationDialog\n              //callback\n              title=\"Verify Order?\"\n              content={'Are you sure you want to verify this order?'}\n              parentCallback={handleDialogResult}\n            />\n          )}\n          <TableContainer component={Paper}>\n            <Table className={classes.table} aria-label=\"table\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>Order Number</TableCell>\n                  <TableCell align=\"right\">Buyer</TableCell>\n                  <TableCell align=\"right\">Email Address</TableCell>\n                  <TableCell align=\"right\">Contact number</TableCell>\n                  <TableCell align=\"right\">Total</TableCell>\n                  <TableCell align=\"right\">Date time</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {orders &&\n                  orders.map((order, index) => (\n                    <TableRow key={index}>\n                      <TableCell component=\"th\" scope=\"row\">\n                        {order.orderNumber}\n                      </TableCell>\n                      <TableCell align=\"right\">{order.name}</TableCell>\n                      <TableCell align=\"right\">{order.emailAddress}</TableCell>\n                      <TableCell align=\"right\">{order.contactNumber}</TableCell>\n                      <TableCell align=\"right\">\n                        {Number.isInteger(order.total)\n                          ? order.total\n                          : order.total.toFixed(2)}\n                      </TableCell>\n                      <TableCell align=\"right\">{order.datetime}</TableCell>\n                      {!checked && (\n                        <>\n                          <IconButton\n                            edge=\"end\"\n                            aria-label=\"download\"\n                            disabled={promiseInProgress}\n                          >\n                            <DoneIcon\n                              onClick={() => handleConfirmVerify(order._id)}\n                            />\n                          </IconButton>\n                          <IconButton\n                            edge=\"end\"\n                            aria-label=\"delete\"\n                            disabled={promiseInProgress}\n                          >\n                            <DeleteIcon\n                              onClick={() => handleConfirmDelete(order._id)}\n                            />\n                          </IconButton>\n                        </>\n                      )}\n                    </TableRow>\n                  ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n          {vendors &&\n            vendors.map((vendor, index) => (\n              <>\n                <Button\n                  key={index}\n                  variant=\"contained\"\n                  color=\"default\"\n                  className={classes.button}\n                  startIcon={<GetAppIcon />}\n                  onClick={() =>\n                    downloadVendorOrders(vendor._id, vendor.displayName)\n                  }\n                  disabled={promiseInProgress}\n                >\n                  Download {vendor.displayName} orders\n                </Button>\n                <br></br>\n              </>\n            ))}\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            className={classes.button}\n            startIcon={<GetAppIcon />}\n            onClick={downloadOrders}\n            disabled={promiseInProgress}\n          >\n            Download Orders\n          </Button>\n          <Typography className={classes.paddedItem} variant=\"h4\">\n            Send Reminder Emails\n          </Typography>\n          <form\n            className={classes.form}\n            autoComplete=\"off\"\n            onSubmit={sendEmails}\n          >\n            <FormControl color=\"secondary\" className={classes.formSection}>\n              <InputLabel>Self Collection Date</InputLabel>\n              <Select value={selfCollDate} onChange={handleSelfCollChange}>\n                {/* <MenuItem value={'18febslot1'}>18 February 12-2pm</MenuItem>\n                <MenuItem value={'18febslot2'}>18 February 6-8pm</MenuItem>\n                <MenuItem value={'11marslot1'}>11 March 12-2pm</MenuItem>\n                <MenuItem value={'11marslot2'}>11 March 6-8pm</MenuItem>\n                <MenuItem value={'25marslot1'}>25 March 12-2pm</MenuItem>\n                <MenuItem value={'25marslot2'}>25 March 6-8pm</MenuItem> */}\n                {/* <MenuItem value={'14febslot1'}>14 February 12-2pm</MenuItem>\n                <MenuItem value={'14febslot2'}>14 February 5-6.30pm</MenuItem> */}\n                <MenuItem value={'23febslot1'}>23 February 12-4pm</MenuItem>\n                <MenuItem value={'09marslot1'}>9th March 2-6pm</MenuItem>\n              </Select>\n            </FormControl>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"default\"\n              className={classes.button}\n              startIcon={<MailIcon />}\n            >\n              Send Email\n            </Button>\n          </form>\n          <Typography className={classes.paddedItem} variant=\"h4\">\n            Workshops\n          </Typography>\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            className={classes.button}\n            startIcon={<GetAppIcon />}\n            onClick={bumpWorkshopWaitlist}\n          >\n            Bump Workshop Waitlist\n          </Button>\n\n          {openEmail && (\n            <ConfirmationDialog\n              //callback\n              title=\"Send Email?\"\n              content={'Are you sure you want to send emails?'}\n              parentCallback={handleDialogResult}\n            />\n          )}\n          <TableContainer component={Paper}>\n            <Table className={classes.table} aria-label=\"table\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>Workshop</TableCell>\n                  <TableCell align=\"right\">Sign Ups</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {workshops &&\n                  workshops.map((workshop, index) => (\n                    <TableRow key={index}>\n                      <TableCell component=\"th\" scope=\"row\">\n                        {workshop.name}\n                      </TableCell>\n                      <TableCell align=\"right\">{`${workshop.registeredParticipants.length}/${workshop.maxParticipants}`}</TableCell>\n                      <IconButton edge=\"end\" aria-label=\"download\">\n                        <GetAppIcon\n                          onClick={() =>\n                            downloadIndivWorkshop(workshop._id, workshop.name)\n                          }\n                        />\n                      </IconButton>\n                      <IconButton edge=\"end\" aria-label=\"emails\">\n                        <MailIcon\n                          onClick={() => handleConfirmEmail(workshop._id)}\n                        />\n                      </IconButton>\n                    </TableRow>\n                  ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            className={classes.button}\n            startIcon={<GetAppIcon />}\n            onClick={downloadWorkshops}\n          >\n            Download All Workshop Sign Ups\n          </Button>\n          <br></br>\n          <VerifyWorkshops\n            handleNotAuth={handleNotAuth}\n            workshops={workshops}\n          />\n          <Typography className={classes.paddedItem} variant=\"h4\">\n            Photos\n          </Typography>\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            className={classes.button}\n            startIcon={<GetAppIcon />}\n            onClick={downloadPhotos}\n            disabled={promiseInProgress}\n          >\n            Download Photos\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            className={classes.button}\n            startIcon={<GetAppIcon />}\n            onClick={downloadVotes}\n            disabled={promiseInProgress}\n          >\n            Download Votes Data\n          </Button>\n          <Typography className={classes.paddedItem} variant=\"h4\">\n            Add Lucky Draw Points\n          </Typography>\n          <form\n            className={classes.form}\n            autoComplete=\"off\"\n            onSubmit={handleSubmit}\n          >\n            <TextField\n              required\n              id=\"email-address\"\n              label=\"Email Address\"\n              type=\"text\"\n              variant=\"outlined\"\n              color=\"secondary\"\n              onChange={handleInputChange('emailAddress')}\n            />\n            <FormControl\n              required\n              variant=\"outlined\"\n              color=\"secondary\"\n              className={classes.formSection}\n            >\n              <InputLabel htmlFor=\"points\">Points</InputLabel>\n              <OutlinedInput\n                id=\"points\"\n                onChange={handleInputChange('points')}\n                labelWidth={60}\n                inputProps={{\n                  pattern: '[0-9]*',\n                }}\n                type=\"number\"\n              />\n            </FormControl>\n            <FormControl\n              required\n              variant=\"outlined\"\n              color=\"secondary\"\n              className={classes.formSection}\n            >\n              <Autocomplete\n                id=\"points-category\"\n                options={categories}\n                getOptionLabel={(option) => option}\n                style={{ width: 300 }}\n                onChange={(event, newInputValue) => {\n                  setState({ ...state, category: newInputValue });\n                }}\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    required\n                    color=\"secondary\"\n                    label=\"Category\"\n                    variant=\"outlined\"\n                    value={state.category}\n                  />\n                )}\n              />\n            </FormControl>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"default\"\n              className={classes.button}\n              endIcon={<AddIcon />}\n            >\n              Add Points\n            </Button>\n          </form>\n          <br></br>\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            className={classes.button}\n            startIcon={<GetAppIcon />}\n            onClick={downloadLuckyDraw}\n            disabled={promiseInProgress}\n          >\n            Download Lucky Draw Data\n          </Button>\n          <Typography className={classes.paddedItem} variant=\"h4\">\n            Update Donation Tracker\n          </Typography>\n          <form\n            className={classes.form}\n            autoComplete=\"off\"\n            onSubmit={handleDonationSubmit}\n          >\n            <FormControl\n              required\n              variant=\"outlined\"\n              color=\"secondary\"\n              className={classes.formSection}\n            >\n              <Autocomplete\n                id=\"select-donation-category\"\n                options={[...donations.map((donation) => donation.name)]}\n                getOptionLabel={(option) => option}\n                style={{ width: 300 }}\n                name=\"name\"\n                onChange={(event, newName) => {\n                  setDonationUpdate({ ...donationUpdate, name: newName });\n                }}\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    required\n                    color=\"secondary\"\n                    label=\"Category\"\n                    variant=\"outlined\"\n                    value={donationUpdate.name}\n                  />\n                )}\n              />\n            </FormControl>\n            <Typography style={{ paddingBottom: 20 }}>\n              {donationUpdate.name !== '' &&\n                donationUpdate.name !== null &&\n                `Current amount for ${donationUpdate.name}: $\n              ${\n                donations.find(\n                  (donation) => donation.name === donationUpdate.name\n                )\n                  ? donations.find(\n                      (donation) => donation.name === donationUpdate.name\n                    ).amount\n                  : 0\n              }`}\n            </Typography>\n            <FormControl\n              required\n              variant=\"outlined\"\n              color=\"secondary\"\n              name=\"amount\"\n              style={{\n                display: 'block',\n                maxWidth: 300,\n                paddingBottom: 10,\n              }}\n            >\n              <InputLabel htmlFor=\"donation amount\">\n                New Donation Amount\n              </InputLabel>\n              <OutlinedInput\n                id=\"price\"\n                value={donationUpdate.amount}\n                name=\"amount\"\n                onChange={handleDonationInputChange('amount')}\n                startAdornment={\n                  <InputAdornment position=\"start\">$</InputAdornment>\n                }\n                fullWidth\n                labelWidth={170}\n                inputProps={{\n                  min: '0',\n                  step: '0.01',\n                  // pattern: '[0-9]*',\n                }}\n                type=\"number\"\n              />\n            </FormControl>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"secondary\"\n              className={classes.button}\n            >\n              Update Donation Tracker\n            </Button>\n          </form>\n        </div>\n      ) : null}\n    </>\n  );\n}\n\nexport default AdminManage;\n"]},"metadata":{},"sourceType":"module"}