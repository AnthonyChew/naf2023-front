{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import React,{useState,useReducer,useEffect}from'react';import CartCard from'./CartCard';import{makeStyles}from'@material-ui/core/styles';import Typography from'@material-ui/core/Typography';import TextField from'@material-ui/core/TextField';import InputLabel from'@material-ui/core/InputLabel';import Grid from'@material-ui/core/Grid';// import logo from 'NAF2022MARKETPLACE.JPG';\nimport Radio from'@material-ui/core/Radio';import RadioGroup from'@material-ui/core/RadioGroup';import FormControlLabel from'@material-ui/core/FormControlLabel';import FormControl from'@material-ui/core/FormControl';import FormLabel from'@material-ui/core/FormLabel';import FormHelperText from'@material-ui/core/FormHelperText';import Button from'@material-ui/core/Button';import Checkbox from'@material-ui/core/Checkbox';import{Table,TableBody,TableCell,TableContainer,TableHead,TableRow}from'@material-ui/core';import orderService from'../services/orders';import{useHistory}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import UserLogin from'../Authentication/UserLogin';import{resetCart}from'../reducers/CartReducer';import{usePromiseTracker}from'react-promise-tracker';import{LoadingSpinnerComponent}from'../utils/LoadingSpinnerComponent';import{trackPromise}from'react-promise-tracker';import{ReactComponent as BackgroundSVG}from\"@svgr/webpack?-svgo,+titleProp,+ref!./PaymentSVG/Background.svg\";import{ReactComponent as TopLinesSVG}from\"@svgr/webpack?-svgo,+titleProp,+ref!./PaymentSVG/TopLines.svg\";import{ReactComponent as MiddleGalaxySVG}from\"@svgr/webpack?-svgo,+titleProp,+ref!./PaymentSVG/MiddleGalaxy.svg\";import{ReactComponent as BottomLeftGalaxySVG}from\"@svgr/webpack?-svgo,+titleProp,+ref!./PaymentSVG/BottomLeftGalaxy.svg\";import{ReactComponent as BottomRightStarsSVG}from\"@svgr/webpack?-svgo,+titleProp,+ref!./PaymentSVG/BottomRightStars.svg\";import{Hidden}from'@material-ui/core';//import vendorService from '../services/vendors';\nimport productService from'../services/products';import FeaturedCard from'./FeaturedCard';var useStyles=makeStyles(function(theme){var _ref;return _ref={root:{textAlign:'center',position:'relative',paddingBottom:theme.spacing(100)},paymentTitle:{color:'#033F63',marginBottom:theme.spacing(5)},thankyou:{fontWeight:'bold',textTransform:'uppercase'},container:{backgroundColor:'#f0f0f0',border:'2px solid purple',// display: 'flex',\npadding:theme.spacing(6),textAlign:'left',margin:theme.spacing(6)}},_defineProperty(_ref,theme.breakpoints.down('xs'),{root:{padding:0},container:{padding:theme.spacing(1),margin:theme.spacing(1)//   textAlign: 'center',\n}}),_defineProperty(_ref,\"total\",{fontWeight:'bold',border:'2px solid orange',textAlign:'center',padding:theme.spacing(2)}),_defineProperty(_ref,\"form\",{display:'flex',height:'100%',flexDirection:'column',justifyContent:'space-between'}),_defineProperty(_ref,theme.breakpoints.up('md'),{form:{marginRight:theme.spacing(2)}}),_defineProperty(_ref,\"label\",{marginTop:theme.spacing(2),marginBottom:theme.spacing(1)}),_defineProperty(_ref,\"acknowledgement\",{fontSize:'0.8rem'}),_defineProperty(_ref,\"paymentButton\",{paddingTop:theme.spacing(2)}),_ref;});var formReducer=function formReducer(state,event){return _objectSpread(_objectSpread({},state),{},_defineProperty({},event.name,event.value));};export default function Payment(props){var classes=useStyles();var dispatch=useDispatch();var _useReducer=useReducer(formReducer,{}),_useReducer2=_slicedToArray(_useReducer,2),formData=_useReducer2[0],setFormData=_useReducer2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),purchases=_useState2[0],setPurchases=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),vendorsDelivery=_useState4[0],setVendorsDelivery=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),collectionTypes=_useState6[0],setCollectionTypes=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),collectionDates=_useState8[0],setCollectionDates=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),acknowledgement=_useState10[0],setAcknowledgment=_useState10[1];var _usePromiseTracker=usePromiseTracker(),promiseInProgress=_usePromiseTracker.promiseInProgress;var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),featuredProducts=_useState12[0],setFeaturedProducts=_useState12[1];var state=useSelector(function(state){return state;});var _useState13=useState(state.total),_useState14=_slicedToArray(_useState13,2),total=_useState14[0],setTotal=_useState14[1];useEffect(function(){var products=state.addedProducts;var purchases=products.map(function(product){return{surcharge:product.vendorSurcharge,//ADD THIS TO STORE\nproductId:product._id,vendorId:product.vendorId,vendorName:product.vendorName,quantityBought:product.quantity,comments:product.comments,name:product.name,leadTime:product.leadTime,canDeliver:product.canDeliver,canCollect:product.canCollect,price:product.price,totalQty:product.totalQty};});setPurchases(purchases);var emptyArray=new Array(purchases.length).fill(null);setCollectionDates(emptyArray);setCollectionTypes(emptyArray);},[state.addedProducts]);useEffect(function(){var newVendorsDelivery=[];var newTotal=state.total;var _loop=function _loop(i){if(collectionTypes[i]==='delivery'){if(!newVendorsDelivery.some(function(vendor){return vendor.vendorId===purchases[i].vendorId;})){var newVendor={vendorId:purchases[i].vendorId,vendorName:purchases[i].vendorName,vendorSurcharge:purchases[i].surcharge};newVendorsDelivery.push(newVendor);newTotal+=purchases[i].surcharge;}//Use set?? Dk how to make it immutable though\n}};for(var i=0;i<collectionTypes.length;i++){_loop(i);}setVendorsDelivery(newVendorsDelivery);setTotal(newTotal);},[collectionTypes,state.total,purchases]);// Fetch & display featured products\nuseEffect(function(){function getFeaturedProducts(){return _getFeaturedProducts.apply(this,arguments);}function _getFeaturedProducts(){_getFeaturedProducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var productIds,products,i,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Get specific vendor\n/*const vendorId = \"61ec64a2f69f4991768c6ba9\";\n      const res = await trackPromise(vendorService.getVendor(vendorId));\n      if (res.status === 200) {\n        setFeaturedProducts(res.data.products);\n      } else {\n        alert('Error getting featured products');\n      } */ // Get specific products\nproductIds=['61f499f917902de7d435eb11','61f4994e17902de7d435eb0f','61f499e217902de7d435eb10'];products=[];i=0;case 3:if(!(i<productIds.length)){_context.next=11;break;}_context.next=6;return trackPromise(productService.getIndivProduct(productIds[i]));case 6:res=_context.sent;if(res!==null){products.push(res);}else{alert('Error getting featured products');}case 8:++i;_context.next=3;break;case 11:setFeaturedProducts(products);case 12:case\"end\":return _context.stop();}}},_callee);}));return _getFeaturedProducts.apply(this,arguments);}getFeaturedProducts();},[]);function getFeaturedProducts(){return featuredProducts;/*// randomly sort the array & fetch N no. products\n    let shuffled = featuredProducts.sort(() => 0.5 - Math.random());\n    // return only 3 products\n    let featuredShow = shuffled.slice(0, 3);\n\n    return featuredShow;*/}var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),helperText=_useState16[0],setHelperText=_useState16[1];var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),auth=_useState18[0],setAuth=_useState18[1];var addDays=function addDays(date,days){date.setDate(date.getDate()+days);return date;};var submitOrder=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:purchases.forEach(function(purchase,i){purchase['collection']=collectionTypes[i];delete purchase['name'];delete purchase['leadTime'];delete purchase['canCollect'];delete purchase['canDeliver'];delete purchase['surcharge'];delete purchase['vendorName'];delete purchase['price'];delete purchase['totalQty'];if(collectionTypes[i]==='delivery')purchase['deliveryAddress']=formData.deliveryAddress;else if(collectionTypes[i]==='selfCollection')purchase['collectionDate']=collectionDates[i];});delete formData['deliveryAddress'];formData.purchases=purchases;formData.total=total;// console.log(formData);\n_context2.next=6;return trackPromise(orderService.postOrder(formData));case 6:res=_context2.sent;if(res.status===200){dispatch(resetCart());history.push('/PaymentSuccess');}else if(res.status===401){// console.log(res);\nsetAuth(false);alert('Please login to complete your payment');}else{alert(res.data.error);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function submitOrder(){return _ref2.apply(this,arguments);};}();var handleLoginClose=function handleLoginClose(){setAuth(true);};var handleChange=function handleChange(event){setFormData({name:event.target.name,value:event.target.value});};var handleCollectionDate=function handleCollectionDate(event){var index=parseInt(event.target.name);var newCollection=collectionDates.map(function(collection,i){return i===index?event.target.value:collection;});setCollectionDates(newCollection);};var handleCollectionType=function handleCollectionType(purchase,event){var index=parseInt(event.target.name);var newCollectionTypes=collectionTypes.map(function(collection,i){return i===index?event.target.value:collection;});var newCollectionDates=collectionDates.map(function(collection,i){return i===index?null:collection;});setCollectionTypes(newCollectionTypes);setCollectionDates(newCollectionDates);};var history=useHistory();var handleSubmit=function handleSubmit(event){event.preventDefault();//acknowledgment\nif(acknowledgement===false){setHelperText('Please indicate acknowledgement of terms and conditions.');}else{//ensure collect-related fields are filled\nif(collectionTypes.includes(null)){setHelperText('Please select a Collection Type for all products.');}else if(collectionTypes.includes('selfCollection')){var indexesOfSelfCollection=[];var missingIndexes=[];collectionTypes.forEach(function(type,i){if(collectionTypes[i]==='selfCollection'){indexesOfSelfCollection.push(i);}});indexesOfSelfCollection.forEach(function(index){if(collectionDates[index]===null){missingIndexes.push(index);}});if(missingIndexes.length===0){submitOrder();}else{setHelperText(\"Please select a date for self collection for all purchased products. Missing for \".concat(missingIndexes.map(function(index){return purchases[index].name+', ';})));}}else{submitOrder();}}};var featProducts=getFeaturedProducts();return/*#__PURE__*/React.createElement(React.Fragment,null,auth?null:/*#__PURE__*/React.createElement(UserLogin,{parentCallback:handleLoginClose}),/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(TopLinesSVG,{style:{zIndex:-1,top:'25',left:'0%',position:'absolute'}}),/*#__PURE__*/React.createElement(MiddleGalaxySVG,{style:{zIndex:-1,top:'415',left:'0',position:'absolute'}}),/*#__PURE__*/React.createElement(BottomLeftGalaxySVG,{style:{zIndex:-1,top:'1860',left:'5%',position:'absolute'}}),/*#__PURE__*/React.createElement(BottomRightStarsSVG,{style:{zIndex:-1,top:'1460',right:'0',position:'absolute'}}),/*#__PURE__*/React.createElement(BackgroundSVG,{\"data-aos\":\"slide-right\",\"data-aos-duration\":\"1000\",style:{zIndex:-999,top:-83,left:0,position:'absolute'}}),/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",className:classes.form,onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Typography,{variant:\"h2\",className:classes.paymentTitle},\"PAYMENT\",/*#__PURE__*/React.createElement(Typography,{className:classes.thankyou,paragraph:true},\"Thank you for shopping with us!\")),/*#__PURE__*/React.createElement(\"div\",{className:classes.container},/*#__PURE__*/React.createElement(Grid,{container:true,xs:12},/*#__PURE__*/React.createElement(Grid,{item:true,md:7,xs:12},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(InputLabel,{className:classes.label,required:true},\"Enter your name:\"),/*#__PURE__*/React.createElement(TextField,{required:true,name:\"name\",label:\"Name\",type:\"text\",variant:\"filled\",color:\"secondary\",value:formData.name,onChange:handleChange,inputProps:{maxLength:64},fullWidth:true})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(InputLabel,{className:classes.label},\"Enter your contact number (e.g. 81234567):\"),/*#__PURE__*/React.createElement(TextField,{required:true,name:\"contactNumber\",label:\"Contact Number\",variant:\"filled\",color:\"secondary\",type:\"tel\",inputProps:{pattern:'^[0-9]+$',// accepts digits only\nmaxLength:15}// max possible length of a phone number including the country code\n,value:formData.contactNumber,onChange:handleChange,fullWidth:true})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(InputLabel,{className:classes.label,required:true},\"Enter your email address:\"),/*#__PURE__*/React.createElement(TextField,{name:\"emailAddress\",label:\"Email\",variant:\"filled\",color:\"secondary\",type:\"email\",required:true//inputProps={{ pattern: '^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$' }} // this pattern would allow some invalid gmails e.g. \"abc\"@gmail.com\n,inputProps:{maxLength:64},value:formData.email,onChange:handleChange,fullWidth:true})),purchases.map(function(purchase,i){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,md:5,xs:12},/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\",required:true,style:{marginTop:15}},/*#__PURE__*/React.createElement(FormLabel,{component:\"legend\",color:\"secondary\"},\"Select Item Collection Type for \",purchase.name),/*#__PURE__*/React.createElement(RadioGroup,{\"aria-label\":\"collection options\",name:i,value:collectionTypes[i],onChange:function onChange(evt){return handleCollectionType(purchase,evt);},required:true},purchase.canCollect&&/*#__PURE__*/React.createElement(FormControlLabel,{value:\"selfCollection\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Self-Collection at NTU\"}),purchase.canDeliver&&/*#__PURE__*/React.createElement(FormControlLabel,{value:\"delivery\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Delivery\"}))),/*#__PURE__*/React.createElement(Grid,{item:true,md:1,xs:0}),/*#__PURE__*/React.createElement(Hidden,{smUp:true},/*#__PURE__*/React.createElement(\"br\",null))),/*#__PURE__*/React.createElement(Grid,{item:true,md:6,xs:12},collectionTypes[i]==='selfCollection'&&/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\",required:true,style:{marginTop:15},key:i},/*#__PURE__*/React.createElement(FormLabel,{component:\"legend\",color:\"secondary\"},\"Select Item Collection Date for \",purchase.name),/*#__PURE__*/React.createElement(RadioGroup,{\"aria-label\":\"collection date options\",name:i,value:collectionDates[i],onChange:handleCollectionDate},/*#__PURE__*/React.createElement(FormControlLabel,{value:\"23febslot1\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"23rd February (12-4pm) Linkway @ Nanyang Auditorium\",disabled:addDays(new Date(),purchase.leadTime)>new Date('23 February 2022')}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"09marslot1\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"9th March (2-6pm) Student Activities Centre @ North Spine\",disabled:addDays(new Date(),purchase.leadTime)>new Date('09 March 2022')}))))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null));}),collectionTypes.includes('delivery')&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(InputLabel,{className:classes.label,required:true},\"Enter your address:\"),/*#__PURE__*/React.createElement(TextField,{required:true,name:\"deliveryAddress\",label:\"Delivery Address\",type:\"text\",variant:\"filled\",color:\"secondary\",value:formData.deliveryAddress,onChange:handleChange,inputProps:{maxLength:255},fullWidth:true}))),/*#__PURE__*/React.createElement(Hidden,{smDown:true},/*#__PURE__*/React.createElement(Grid,{item:true,md:1})),/*#__PURE__*/React.createElement(Grid,{item:true,md:4,xs:12,justify:\"space-between\",style:{height:'100%'}},/*#__PURE__*/React.createElement(\"img\",{src:\"NAF2022MARKETPLACE.JPG\",alt:\"QR Code\",width:\"100%\"}),/*#__PURE__*/React.createElement(Typography,{style:{color:'#7c1a78',fontWeight:'bold',width:'100%',textAlign:'center'}},\"Reference No: \",/*#__PURE__*/React.createElement(\"br\",null),\"NAF2022MARKETPLACE\"),/*#__PURE__*/React.createElement(Typography,{variant:\"body1\",className:classes.label},\"You can either:\",/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\"Pay by PayNow/PayLah to the QR Code above \"),/*#__PURE__*/React.createElement(\"li\",null,\"Pay later by scanning the QR Code in the email after you confirm payment below\"))),/*#__PURE__*/React.createElement(Typography,{variant:\"body1\",className:classes.label},\"Total:\"),/*#__PURE__*/React.createElement(Typography,{className:classes.total,variant:\"body1\"},\"$\".concat(total.toFixed(2))),/*#__PURE__*/React.createElement(TableContainer,null,/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Product\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Price\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Quantity\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Total\"))),/*#__PURE__*/React.createElement(TableBody,null,purchases&&purchases.map(function(purchase,index){return/*#__PURE__*/React.createElement(TableRow,{key:index},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},purchase.name),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},purchase.price?Number.isInteger(purchase.price)?purchase.price:purchase.price.toFixed(2):null),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},purchase.totalQty),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},(purchase.price*purchase.totalQty).toFixed(2)));})))),/*#__PURE__*/React.createElement(\"br\",null),vendorsDelivery&&vendorsDelivery.length>0&&/*#__PURE__*/React.createElement(TableContainer,null,/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Vendor\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Surcharge\"))),/*#__PURE__*/React.createElement(TableBody,null,vendorsDelivery&&vendorsDelivery.map(function(vendor,index){return/*#__PURE__*/React.createElement(TableRow,{key:index},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},vendor.vendorName),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},vendor.vendorSurcharge));})))))),/*#__PURE__*/React.createElement(Grid,{container:true,className:classes.paymentButton},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},\"Featured Items\",/*#__PURE__*/React.createElement(Grid,{container:true,xs:12,className:classes.cartCards},featProducts&&featProducts.map(function(product,i){return/*#__PURE__*/React.createElement(Grid,{item:true,md:4,xs:12},/*#__PURE__*/React.createElement(FeaturedCard,{product:product}));})),/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\",required:true,style:{marginTop:15,justifyContent:'flex-end',flex:1,marginBottom:10}},/*#__PURE__*/React.createElement(FormControlLabel,{component:\"legend\",color:\"secondary\",control:/*#__PURE__*/React.createElement(Checkbox,{checked:acknowledgement,onChange:function onChange(){return setAcknowledgment(!acknowledgement);}}),label:/*#__PURE__*/React.createElement(Typography,{paragraph:true,className:classes.acknowledgement},\"By checking this box, I hereby agree that I will not hold NTU Arts Festival 2022 responsible for any loss or damage incurred to my purchase from the NAF Online Marketplace. I also hereby agree that there will be no refunds or exchanges for my purchase from the NAF Online Marketplace. I acknowledge that I have given consent to the collection, use and disclosure of my personal data by NTU CAC NTU Arts Festival for administrative purposes.\")})),/*#__PURE__*/React.createElement(FormHelperText,{style:{color:'red'}},helperText),/*#__PURE__*/React.createElement(LoadingSpinnerComponent,null),/*#__PURE__*/React.createElement(Button,{fullWidth:true,type:\"submit\",variant:\"contained\",color:\"secondary\",disabled:state.addedProducts.length===0||promiseInProgress},\"Confirm Payment\")))))));}","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/ShoppingCart/Payment.js"],"names":["React","useState","useReducer","useEffect","CartCard","makeStyles","Typography","TextField","InputLabel","Grid","Radio","RadioGroup","FormControlLabel","FormControl","FormLabel","FormHelperText","Button","Checkbox","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","orderService","useHistory","useSelector","useDispatch","UserLogin","resetCart","usePromiseTracker","LoadingSpinnerComponent","trackPromise","Hidden","productService","FeaturedCard","useStyles","theme","root","textAlign","position","paddingBottom","spacing","paymentTitle","color","marginBottom","thankyou","fontWeight","textTransform","container","backgroundColor","border","padding","margin","breakpoints","down","display","height","flexDirection","justifyContent","up","form","marginRight","marginTop","fontSize","paddingTop","formReducer","state","event","name","value","Payment","props","classes","dispatch","formData","setFormData","purchases","setPurchases","vendorsDelivery","setVendorsDelivery","collectionTypes","setCollectionTypes","collectionDates","setCollectionDates","acknowledgement","setAcknowledgment","promiseInProgress","featuredProducts","setFeaturedProducts","total","setTotal","products","addedProducts","map","product","surcharge","vendorSurcharge","productId","_id","vendorId","vendorName","quantityBought","quantity","comments","leadTime","canDeliver","canCollect","price","totalQty","emptyArray","Array","length","fill","newVendorsDelivery","newTotal","i","some","vendor","newVendor","push","getFeaturedProducts","productIds","getIndivProduct","res","alert","helperText","setHelperText","auth","setAuth","addDays","date","days","setDate","getDate","submitOrder","forEach","purchase","deliveryAddress","postOrder","status","history","data","error","handleLoginClose","handleChange","target","handleCollectionDate","index","parseInt","newCollection","collection","handleCollectionType","newCollectionTypes","newCollectionDates","handleSubmit","preventDefault","includes","indexesOfSelfCollection","missingIndexes","type","featProducts","zIndex","top","left","right","label","maxLength","pattern","contactNumber","email","evt","Date","width","toFixed","table","Number","isInteger","paymentButton","cartCards","flex"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect } from 'react';\n\nimport CartCard from './CartCard';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Grid from '@material-ui/core/Grid';\n// import logo from 'NAF2022MARKETPLACE.JPG';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@material-ui/core';\nimport orderService from '../services/orders';\nimport { useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport UserLogin from '../Authentication/UserLogin';\nimport { resetCart } from '../reducers/CartReducer';\nimport { usePromiseTracker } from 'react-promise-tracker';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { trackPromise } from 'react-promise-tracker';\nimport { ReactComponent as BackgroundSVG } from './PaymentSVG/Background.svg';\nimport { ReactComponent as TopLinesSVG } from './PaymentSVG/TopLines.svg';\nimport { ReactComponent as MiddleGalaxySVG } from './PaymentSVG/MiddleGalaxy.svg';\nimport { ReactComponent as BottomLeftGalaxySVG } from './PaymentSVG/BottomLeftGalaxy.svg';\nimport { ReactComponent as BottomRightStarsSVG } from './PaymentSVG/BottomRightStars.svg';\nimport { Hidden } from '@material-ui/core';\n\n//import vendorService from '../services/vendors';\nimport productService from '../services/products';\nimport FeaturedCard from './FeaturedCard';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    textAlign: 'center',\n    position: 'relative',\n    paddingBottom: theme.spacing(100),\n  },\n  paymentTitle: {\n    color: '#033F63',\n    marginBottom: theme.spacing(5),\n  },\n  thankyou: {\n    fontWeight: 'bold',\n    textTransform: 'uppercase',\n  },\n  container: {\n    backgroundColor: '#f0f0f0',\n    border: '2px solid purple',\n    // display: 'flex',\n    padding: theme.spacing(6),\n\n    textAlign: 'left',\n    margin: theme.spacing(6),\n  },\n  [theme.breakpoints.down('xs')]: {\n    root: {\n      padding: 0,\n    },\n    container: {\n      padding: theme.spacing(1),\n      margin: theme.spacing(1),\n      //   textAlign: 'center',\n    },\n  },\n  total: {\n    fontWeight: 'bold',\n    border: '2px solid orange',\n    textAlign: 'center',\n    padding: theme.spacing(2),\n  },\n  form: {\n    display: 'flex',\n    height: '100%',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n  },\n  [theme.breakpoints.up('md')]: {\n    form: {\n      marginRight: theme.spacing(2),\n    },\n  },\n  label: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(1),\n  },\n  acknowledgement: {\n    fontSize: '0.8rem',\n  },\n  paymentButton: {\n    paddingTop: theme.spacing(2),\n  },\n}));\n\nconst formReducer = (state, event) => {\n  return {\n    ...state,\n    [event.name]: event.value,\n  };\n};\n\nexport default function Payment(props) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [formData, setFormData] = useReducer(formReducer, {});\n  const [purchases, setPurchases] = useState([]);\n  const [vendorsDelivery, setVendorsDelivery] = useState([]);\n  const [collectionTypes, setCollectionTypes] = useState([]);\n  const [collectionDates, setCollectionDates] = useState([]);\n  const [acknowledgement, setAcknowledgment] = useState(false);\n  const { promiseInProgress } = usePromiseTracker();\n\n  const [featuredProducts, setFeaturedProducts] = useState([]);\n\n  const state = useSelector((state) => {\n    return state;\n  });\n  const [total, setTotal] = useState(state.total);\n\n  useEffect(() => {\n    const products = state.addedProducts;\n    const purchases = products.map((product) => {\n      return {\n        surcharge: product.vendorSurcharge, //ADD THIS TO STORE\n        productId: product._id,\n        vendorId: product.vendorId,\n        vendorName: product.vendorName,\n        quantityBought: product.quantity,\n        comments: product.comments,\n        name: product.name,\n        leadTime: product.leadTime,\n        canDeliver: product.canDeliver,\n        canCollect: product.canCollect,\n        price: product.price,\n        totalQty: product.totalQty,\n      };\n    });\n    setPurchases(purchases);\n    const emptyArray = new Array(purchases.length).fill(null);\n    setCollectionDates(emptyArray);\n    setCollectionTypes(emptyArray);\n  }, [state.addedProducts]);\n\n  useEffect(() => {\n    let newVendorsDelivery = [];\n    let newTotal = state.total;\n    for (let i = 0; i < collectionTypes.length; i++) {\n      if (collectionTypes[i] === 'delivery') {\n        if (\n          !newVendorsDelivery.some(\n            (vendor) => vendor.vendorId === purchases[i].vendorId\n          )\n        ) {\n          const newVendor = {\n            vendorId: purchases[i].vendorId,\n            vendorName: purchases[i].vendorName,\n            vendorSurcharge: purchases[i].surcharge,\n          };\n          newVendorsDelivery.push(newVendor);\n          newTotal += purchases[i].surcharge;\n        }\n        //Use set?? Dk how to make it immutable though\n      }\n    }\n    setVendorsDelivery(newVendorsDelivery);\n    setTotal(newTotal);\n  }, [collectionTypes, state.total, purchases]);\n\n  // Fetch & display featured products\n  useEffect(() => {\n    async function getFeaturedProducts() {\n      // Get specific vendor\n      /*const vendorId = \"61ec64a2f69f4991768c6ba9\";\n      const res = await trackPromise(vendorService.getVendor(vendorId));\n      if (res.status === 200) {\n        setFeaturedProducts(res.data.products);\n      } else {\n        alert('Error getting featured products');\n      } */\n\n      // Get specific products\n      const productIds = [\n        '61f499f917902de7d435eb11',\n        '61f4994e17902de7d435eb0f',\n        '61f499e217902de7d435eb10',\n      ];\n      let products = [];\n      for (let i = 0; i < productIds.length; ++i) {\n        const res = await trackPromise(\n          productService.getIndivProduct(productIds[i])\n        );\n        if (res !== null) {\n          products.push(res);\n        } else {\n          alert('Error getting featured products');\n        }\n      }\n      setFeaturedProducts(products);\n    }\n    getFeaturedProducts();\n  }, []);\n\n  function getFeaturedProducts() {\n    return featuredProducts;\n    /*// randomly sort the array & fetch N no. products\n    let shuffled = featuredProducts.sort(() => 0.5 - Math.random());\n    // return only 3 products\n    let featuredShow = shuffled.slice(0, 3);\n\n    return featuredShow;*/\n  }\n\n  const [helperText, setHelperText] = useState('');\n  const [auth, setAuth] = useState(true);\n\n  const addDays = (date, days) => {\n    date.setDate(date.getDate() + days);\n    return date;\n  };\n\n  const submitOrder = async () => {\n    purchases.forEach((purchase, i) => {\n      purchase['collection'] = collectionTypes[i];\n      delete purchase['name'];\n      delete purchase['leadTime'];\n      delete purchase['canCollect'];\n      delete purchase['canDeliver'];\n      delete purchase['surcharge'];\n      delete purchase['vendorName'];\n      delete purchase['price'];\n      delete purchase['totalQty'];\n      if (collectionTypes[i] === 'delivery')\n        purchase['deliveryAddress'] = formData.deliveryAddress;\n      else if (collectionTypes[i] === 'selfCollection')\n        purchase['collectionDate'] = collectionDates[i];\n    });\n    delete formData['deliveryAddress'];\n    formData.purchases = purchases;\n    formData.total = total;\n    // console.log(formData);\n    const res = await trackPromise(orderService.postOrder(formData));\n    if (res.status === 200) {\n      dispatch(resetCart());\n      history.push('/PaymentSuccess');\n    } else if (res.status === 401) {\n      // console.log(res);\n      setAuth(false);\n      alert('Please login to complete your payment');\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const handleLoginClose = () => {\n    setAuth(true);\n  };\n\n  const handleChange = (event) => {\n    setFormData({\n      name: event.target.name,\n      value: event.target.value,\n    });\n  };\n\n  const handleCollectionDate = (event) => {\n    const index = parseInt(event.target.name);\n    const newCollection = collectionDates.map((collection, i) => {\n      return i === index ? event.target.value : collection;\n    });\n    setCollectionDates(newCollection);\n  };\n\n  const handleCollectionType = (purchase, event) => {\n    const index = parseInt(event.target.name);\n    const newCollectionTypes = collectionTypes.map((collection, i) => {\n      return i === index ? event.target.value : collection;\n    });\n    const newCollectionDates = collectionDates.map((collection, i) => {\n      return i === index ? null : collection;\n    });\n    setCollectionTypes(newCollectionTypes);\n    setCollectionDates(newCollectionDates);\n  };\n\n  const history = useHistory();\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    //acknowledgment\n    if (acknowledgement === false) {\n      setHelperText('Please indicate acknowledgement of terms and conditions.');\n    } else {\n      //ensure collect-related fields are filled\n      if (collectionTypes.includes(null)) {\n        setHelperText('Please select a Collection Type for all products.');\n      } else if (collectionTypes.includes('selfCollection')) {\n        let indexesOfSelfCollection = [];\n        let missingIndexes = [];\n        collectionTypes.forEach((type, i) => {\n          if (collectionTypes[i] === 'selfCollection') {\n            indexesOfSelfCollection.push(i);\n          }\n        });\n        indexesOfSelfCollection.forEach((index) => {\n          if (collectionDates[index] === null) {\n            missingIndexes.push(index);\n          }\n        });\n        if (missingIndexes.length === 0) {\n          submitOrder();\n        } else {\n          setHelperText(\n            `Please select a date for self collection for all purchased products. Missing for ${missingIndexes.map(\n              (index) => purchases[index].name + ', '\n            )}`\n          );\n        }\n      } else {\n        submitOrder();\n      }\n    }\n  };\n\n  const featProducts = getFeaturedProducts();\n\n  return (\n    <>\n      {auth ? null : <UserLogin parentCallback={handleLoginClose} />}\n\n      <div className={classes.root}>\n        <TopLinesSVG\n          style={{ zIndex: -1, top: '25', left: '0%', position: 'absolute' }}\n        />\n        <MiddleGalaxySVG\n          style={{ zIndex: -1, top: '415', left: '0', position: 'absolute' }}\n        />\n        <BottomLeftGalaxySVG\n          style={{ zIndex: -1, top: '1860', left: '5%', position: 'absolute' }}\n        />\n        <BottomRightStarsSVG\n          style={{ zIndex: -1, top: '1460', right: '0', position: 'absolute' }}\n        />\n\n        <BackgroundSVG\n          data-aos=\"slide-right\"\n          data-aos-duration=\"1000\"\n          style={{\n            zIndex: -999,\n            top: -83,\n            left: 0,\n            position: 'absolute',\n          }}\n        />\n        <form\n          autoComplete=\"off\"\n          className={classes.form}\n          onSubmit={handleSubmit}\n        >\n          <Typography variant=\"h2\" className={classes.paymentTitle}>\n            PAYMENT\n            <Typography className={classes.thankyou} paragraph>\n              Thank you for shopping with us!\n            </Typography>\n          </Typography>\n\n          <div className={classes.container}>\n            <Grid container xs={12}>\n              <Grid item md={7} xs={12}>\n                <div>\n                  <InputLabel className={classes.label} required>\n                    Enter your name:\n                  </InputLabel>\n                  <TextField\n                    required\n                    name=\"name\"\n                    label=\"Name\"\n                    type=\"text\"\n                    variant=\"filled\"\n                    color=\"secondary\"\n                    value={formData.name}\n                    onChange={handleChange}\n                    inputProps={{ maxLength: 64 }}\n                    fullWidth\n                  />\n                </div>\n\n                <div>\n                  <InputLabel className={classes.label}>\n                    Enter your contact number (e.g. 81234567):\n                  </InputLabel>\n                  <TextField\n                    required\n                    name=\"contactNumber\"\n                    label=\"Contact Number\"\n                    variant=\"filled\"\n                    color=\"secondary\"\n                    type=\"tel\"\n                    inputProps={{\n                      pattern: '^[0-9]+$', // accepts digits only\n                      maxLength: 15,\n                    }} // max possible length of a phone number including the country code\n                    value={formData.contactNumber}\n                    onChange={handleChange}\n                    fullWidth\n                  />\n                </div>\n\n                <div>\n                  <InputLabel className={classes.label} required>\n                    Enter your email address:\n                  </InputLabel>\n                  <TextField\n                    name=\"emailAddress\"\n                    label=\"Email\"\n                    variant=\"filled\"\n                    color=\"secondary\"\n                    type=\"email\"\n                    required\n                    //inputProps={{ pattern: '^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$' }} // this pattern would allow some invalid gmails e.g. \"abc\"@gmail.com\n                    inputProps={{ maxLength: 64 }}\n                    value={formData.email}\n                    onChange={handleChange}\n                    fullWidth\n                  />\n                </div>\n\n                {purchases.map((purchase, i) => {\n                  return (\n                    <>\n                      <Grid container>\n                        <Grid item md={5} xs={12}>\n                          <FormControl\n                            component=\"fieldset\"\n                            required\n                            style={{ marginTop: 15 }}\n                          >\n                            <FormLabel component=\"legend\" color=\"secondary\">\n                              Select Item Collection Type for {purchase.name}\n                            </FormLabel>\n                            <RadioGroup\n                              aria-label=\"collection options\"\n                              name={i}\n                              value={collectionTypes[i]}\n                              onChange={(evt) =>\n                                handleCollectionType(purchase, evt)\n                              }\n                              required\n                            >\n                              {purchase.canCollect && (\n                                <FormControlLabel\n                                  value=\"selfCollection\"\n                                  control={<Radio />}\n                                  label=\"Self-Collection at NTU\"\n                                />\n                              )}\n                              {purchase.canDeliver && (\n                                <FormControlLabel\n                                  value=\"delivery\"\n                                  control={<Radio />}\n                                  label=\"Delivery\"\n                                />\n                              )}\n                            </RadioGroup>\n                          </FormControl>\n                          <Grid item md={1} xs={0}></Grid>\n                          <Hidden smUp>\n                            <br></br>\n                          </Hidden>\n                        </Grid>\n                        <Grid item md={6} xs={12}>\n                          {collectionTypes[i] === 'selfCollection' && (\n                            <FormControl\n                              component=\"fieldset\"\n                              required\n                              style={{ marginTop: 15 }}\n                              key={i}\n                            >\n                              <FormLabel component=\"legend\" color=\"secondary\">\n                                Select Item Collection Date for {purchase.name}\n                              </FormLabel>\n                              <RadioGroup\n                                aria-label=\"collection date options\"\n                                name={i}\n                                value={collectionDates[i]}\n                                onChange={handleCollectionDate}\n                              >\n                                {/* <FormControlLabel\n                              value=\"14febslot1\"\n                              control={<Radio />}\n                              label=\"14th February (12-2pm) Skydeck @ North Spine\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('14 February 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"14febslot2\"\n                              control={<Radio />}\n                              label=\"14th February (5-6.30pm) Skydeck @ North Spine\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('14 February 2022')\n                              }\n                            /> */}\n                                <FormControlLabel\n                                  value=\"23febslot1\"\n                                  control={<Radio />}\n                                  label=\"23rd February (12-4pm) Linkway @ Nanyang Auditorium\"\n                                  disabled={\n                                    addDays(new Date(), purchase.leadTime) >\n                                    new Date('23 February 2022')\n                                  }\n                                />\n                                <FormControlLabel\n                                  value=\"09marslot1\"\n                                  control={<Radio />}\n                                  label=\"9th March (2-6pm) Student Activities Centre @ North Spine\"\n                                  disabled={\n                                    addDays(new Date(), purchase.leadTime) >\n                                    new Date('09 March 2022')\n                                  }\n                                />\n\n                                {/* <FormControlLabel\n                              value=\"18febslot1\"\n                              control={<Radio />}\n                              label=\"18th February (12-2pm) The Arc TR+07\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('18 February 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"18febslot2\"\n                              control={<Radio />}\n                              label=\"18th February (6-8pm) The Arc TR+07\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('18 February 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"11marslot1\"\n                              control={<Radio />}\n                              label=\"11th March (12-2pm) The Arc TR+27\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('11 March 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"11marslot2\"\n                              control={<Radio />}\n                              label=\"11th March (6-8pm) The Arc TR+27\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('11 March 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"25marslot1\"\n                              control={<Radio />}\n                              label=\"25th March (12-2pm) The Arc TR+04\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('25 March 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"25marslot2\"\n                              control={<Radio />}\n                              label=\"25th March (6-8pm) The Arc TR+04\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('25 March 2022')\n                              }\n                            /> */}\n                              </RadioGroup>\n                            </FormControl>\n                          )}\n                        </Grid>\n                      </Grid>\n                      <br></br>\n                      <br></br>\n                      <br></br>\n                    </>\n                  );\n                })}\n                {collectionTypes.includes('delivery') && (\n                  <div>\n                    <InputLabel className={classes.label} required>\n                      Enter your address:\n                    </InputLabel>\n                    <TextField\n                      required\n                      name=\"deliveryAddress\"\n                      label=\"Delivery Address\"\n                      type=\"text\"\n                      variant=\"filled\"\n                      color=\"secondary\"\n                      value={formData.deliveryAddress}\n                      onChange={handleChange}\n                      inputProps={{ maxLength: 255 }}\n                      fullWidth\n                    />\n                  </div>\n                )}\n              </Grid>\n              <Hidden smDown>\n                <Grid item md={1}></Grid>\n              </Hidden>\n              <Grid\n                item\n                md={4}\n                xs={12}\n                justify=\"space-between\"\n                style={{ height: '100%' }}\n              >\n                <img src=\"NAF2022MARKETPLACE.JPG\" alt=\"QR Code\" width=\"100%\" />\n                <Typography\n                  style={{\n                    color: '#7c1a78',\n                    fontWeight: 'bold',\n                    width: '100%',\n                    textAlign: 'center',\n                  }}\n                >\n                  Reference No: <br />\n                  NAF2022MARKETPLACE\n                </Typography>\n                <Typography variant=\"body1\" className={classes.label}>\n                  You can either:\n                  <ul>\n                    <li>Pay by PayNow/PayLah to the QR Code above </li>\n                    <li>\n                      Pay later by scanning the QR Code in the email after you\n                      confirm payment below\n                    </li>\n                  </ul>\n                </Typography>\n                <Typography variant=\"body1\" className={classes.label}>\n                  Total:\n                </Typography>\n                <Typography className={classes.total} variant=\"body1\">\n                  {`$${total.toFixed(2)}`}\n                </Typography>\n                <TableContainer>\n                  <Table className={classes.table} aria-label=\"table\">\n                    <TableHead>\n                      <TableRow>\n                        <TableCell>Product</TableCell>\n                        <TableCell align=\"right\">Price</TableCell>\n                        <TableCell align=\"right\">Quantity</TableCell>\n                        <TableCell align=\"right\">Total</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {purchases &&\n                        purchases.map((purchase, index) => (\n                          <TableRow key={index}>\n                            <TableCell component=\"th\" scope=\"row\">\n                              {purchase.name}\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              {purchase.price\n                                ? Number.isInteger(purchase.price)\n                                  ? purchase.price\n                                  : purchase.price.toFixed(2)\n                                : null}\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              {purchase.totalQty}\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              {(purchase.price * purchase.totalQty).toFixed(2)}\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n                <br></br>\n                {vendorsDelivery && vendorsDelivery.length > 0 && (\n                  <TableContainer>\n                    <Table className={classes.table} aria-label=\"table\">\n                      <TableHead>\n                        <TableRow>\n                          <TableCell>Vendor</TableCell>\n                          <TableCell align=\"right\">Surcharge</TableCell>\n                        </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {vendorsDelivery &&\n                          vendorsDelivery.map((vendor, index) => (\n                            <TableRow key={index}>\n                              <TableCell component=\"th\" scope=\"row\">\n                                {vendor.vendorName}\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                {vendor.vendorSurcharge}\n                              </TableCell>\n                            </TableRow>\n                          ))}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                )}\n              </Grid>\n            </Grid>\n            <Grid container className={classes.paymentButton}>\n              <Grid item xs={12}>\n                Featured Items\n                <Grid container xs={12} className={classes.cartCards}>\n                  {featProducts &&\n                    featProducts.map((product, i) => {\n                      return (\n                        <Grid item md={4} xs={12}>\n                          <FeaturedCard product={product} />\n                        </Grid>\n                      );\n                    })}\n                </Grid>\n                <FormControl\n                  component=\"fieldset\"\n                  required\n                  style={{\n                    marginTop: 15,\n                    justifyContent: 'flex-end',\n                    flex: 1,\n                    marginBottom: 10,\n                  }}\n                >\n                  <FormControlLabel\n                    component=\"legend\"\n                    color=\"secondary\"\n                    control={\n                      <Checkbox\n                        checked={acknowledgement}\n                        onChange={() => setAcknowledgment(!acknowledgement)}\n                      />\n                    }\n                    label={\n                      <Typography paragraph className={classes.acknowledgement}>\n                        By checking this box, I hereby agree that I will not\n                        hold NTU Arts Festival 2022 responsible for any loss or\n                        damage incurred to my purchase from the NAF Online\n                        Marketplace. I also hereby agree that there will be no\n                        refunds or exchanges for my purchase from the NAF Online\n                        Marketplace. I acknowledge that I have given consent to\n                        the collection, use and disclosure of my personal data\n                        by NTU CAC NTU Arts Festival for administrative\n                        purposes.\n                      </Typography>\n                    }\n                  />\n                </FormControl>\n                <FormHelperText style={{ color: 'red' }}>\n                  {helperText}\n                </FormHelperText>\n                <LoadingSpinnerComponent />\n                <Button\n                  fullWidth\n                  type=\"submit\"\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  disabled={\n                    state.addedProducts.length === 0 || promiseInProgress\n                  }\n                >\n                  Confirm Payment\n                </Button>\n              </Grid>\n            </Grid>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}