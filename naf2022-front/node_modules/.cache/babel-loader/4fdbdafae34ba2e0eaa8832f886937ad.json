{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{makeStyles}from'@material-ui/core/styles';import React,{useState,useEffect}from'react';import ProfileHeader from'./ProfileHeader';import UserWorkshop from'./UserWorkshop';import LuckyDraw from'./LuckyDraw';import UserLogin from'../Authentication/UserLogin';import OrderTable from'../MarketPlacePage/OrderTable';// import Button from '@material-ui/core/Button';\n// import Box from '@material-ui/core/Box';\nimport studentSevice from'../services/students';import{ReactComponent as PurpleGreenSVG}from\"@svgr/webpack?-svgo,+titleProp,+ref!./SVG/Group 1.svg\";import Logout from'../Authentication/Logout';import{LoadingSpinnerComponent}from'../utils/LoadingSpinnerComponent';import{trackPromise}from'react-promise-tracker';// create animations https://www.youtube.com/watch?v=JcHLxzrsRS4\nvar useStyles=makeStyles(function(theme){return{root:{textAlign:'center',maxWidth:'80%',margin:'auto'},paddedItem:{padding:theme.spacing(3)}};});function Profile(){var classes=useStyles();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),profile=_useState2[0],setProfile=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),auth=_useState4[0],setAuth=_useState4[1];// console.log(profile);\n// console.log(auth);\nuseEffect(function(){function fetchProfileData(){return _fetchProfileData.apply(this,arguments);}function _fetchProfileData(){_fetchProfileData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return trackPromise(studentSevice.getUser());case 2:res=_context.sent;if(res.status===200){setProfile(res.data);}else{setAuth(false);}case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchProfileData.apply(this,arguments);}fetchProfileData();},[auth]);var handleLoginClose=function handleLoginClose(){setAuth(true);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(LoadingSpinnerComponent,null),!auth&&/*#__PURE__*/React.createElement(UserLogin,{parentCallback:handleLoginClose}),auth?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ProfileHeader,{displayName:profile&&profile.displayName,image:'ProfilePic.png',email:profile&&profile.email}),/*#__PURE__*/React.createElement(Logout,null),/*#__PURE__*/React.createElement(UserWorkshop,{waitlistedWorkshops:profile&&profile.waitlistedWorkshops,registeredWorkshops:profile&&profile.registeredWorkshops}),/*#__PURE__*/React.createElement(LuckyDraw,{purchasePoints:profile&&profile.purchasePoints,totalPoints:profile&&profile.totalPoints,otherPoints:profile&&profile.points}),profile&&profile.pastOrders&&/*#__PURE__*/React.createElement(OrderTable,{rows:profile.pastOrders}),/*#__PURE__*/React.createElement(PurpleGreenSVG,{\"data-aos\":\"slide-right\",\"data-aos-duration\":\"1000\",\"data-aos-anchor\":\"#workshopsList\",style:{zIndex:-999,top:800,left:0,position:'absolute',overflowY:'hidden'}})):null);}export default Profile;","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/ProfilePage/Profile.js"],"names":["makeStyles","React","useState","useEffect","ProfileHeader","UserWorkshop","LuckyDraw","UserLogin","OrderTable","studentSevice","Logout","LoadingSpinnerComponent","trackPromise","useStyles","theme","root","textAlign","maxWidth","margin","paddedItem","padding","spacing","Profile","classes","profile","setProfile","auth","setAuth","fetchProfileData","getUser","res","status","data","handleLoginClose","displayName","email","waitlistedWorkshops","registeredWorkshops","purchasePoints","totalPoints","points","pastOrders","zIndex","top","left","position","overflowY"],"mappings":"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","sourcesContent":["import { makeStyles } from '@material-ui/core/styles';\nimport React, { useState, useEffect } from 'react';\nimport ProfileHeader from './ProfileHeader';\nimport UserWorkshop from './UserWorkshop';\nimport LuckyDraw from './LuckyDraw';\nimport UserLogin from '../Authentication/UserLogin';\nimport OrderTable from '../MarketPlacePage/OrderTable';\n// import Button from '@material-ui/core/Button';\n// import Box from '@material-ui/core/Box';\nimport studentSevice from '../services/students';\nimport { ReactComponent as PurpleGreenSVG } from './SVG/Group 1.svg';\nimport Logout from '../Authentication/Logout';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { trackPromise } from 'react-promise-tracker';\n\n// create animations https://www.youtube.com/watch?v=JcHLxzrsRS4\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    textAlign: 'center',\n    maxWidth: '80%',\n    margin: 'auto',\n  },\n  paddedItem: {\n    padding: theme.spacing(3),\n  },\n}));\nfunction Profile() {\n  const classes = useStyles();\n\n  const [profile, setProfile] = useState(null);\n  const [auth, setAuth] = useState(true);\n\n  // console.log(profile);\n  // console.log(auth);\n\n  useEffect(() => {\n    async function fetchProfileData() {\n      const res = await trackPromise(studentSevice.getUser());\n      if (res.status === 200) {\n        setProfile(res.data);\n      } else {\n        setAuth(false);\n      }\n    }\n    fetchProfileData();\n  }, [auth]);\n\n  const handleLoginClose = () => {\n    setAuth(true);\n  };\n\n  return (\n    <div>\n      <LoadingSpinnerComponent />\n      {!auth && <UserLogin parentCallback={handleLoginClose} />}\n      {auth ? (\n        <>\n          <ProfileHeader\n            displayName={profile && profile.displayName}\n            image={'ProfilePic.png'}\n            email={profile && profile.email}\n          />\n          <Logout />\n          <UserWorkshop\n            waitlistedWorkshops={profile && profile.waitlistedWorkshops}\n            registeredWorkshops={profile && profile.registeredWorkshops}\n          />\n          <LuckyDraw\n            purchasePoints={profile && profile.purchasePoints}\n            totalPoints={profile && profile.totalPoints}\n            otherPoints={profile && profile.points}\n          />\n          {profile && profile.pastOrders && (\n            <OrderTable rows={profile.pastOrders} />\n          )}\n\n          <PurpleGreenSVG\n            data-aos=\"slide-right\"\n            data-aos-duration=\"1000\"\n            data-aos-anchor=\"#workshopsList\"\n            style={{\n              zIndex: -999,\n              top: 800,\n              left: 0,\n              position: 'absolute',\n              overflowY: 'hidden',\n            }}\n          />\n        </>\n      ) : null}\n    </div>\n  );\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}