{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{lighten,makeStyles}from'@material-ui/core/styles';import Typography from'@material-ui/core/Typography';// import { useSelector } from 'react-redux';\nimport React,{useState}from'react';import SearchBar from'./SearchBar';import Filter from'./Filter';// import clsx from 'clsx';\nimport{Table,TableBody,TableCell,TableContainer,TableHead,TablePagination,TableRow,TableSortLabel,Toolbar,Checkbox,IconButton,Tooltip,Paper}from'@material-ui/core';import DeleteIcon from'@material-ui/icons/Delete';import ProductRow from'./ProductRow.js';import ConfirmationDialog from'../Components/ConfirmationDialog';import productService from'../services/products';import{useHistory}from'react-router-dom';function descendingComparator(a,b,orderBy){if(b[orderBy]<a[orderBy]){return-1;}if(b[orderBy]>a[orderBy]){return 1;}return 0;}function getComparator(order,orderBy){return order==='desc'?function(a,b){return descendingComparator(a,b,orderBy);}:function(a,b){return-descendingComparator(a,b,orderBy);};}function stableSort(array,comparator){if(array!=null){var stabilizedThis=array.map(function(el,index){return[el,index];});stabilizedThis.sort(function(a,b){var order=comparator(a[0],b[0]);if(order!==0)return order;return a[1]-b[1];});return stabilizedThis.map(function(el){return el[0];});}}var productHeadCells=[{id:'name',numeric:false,disablePadding:true,label:'Product'},{id:'inventory',numeric:false,disablePadding:true,label:'Inventory'},{id:'sales',numeric:true,disablePadding:true,label:'Sales Earned ($)'},{id:'edit',numeric:false,disablePadding:true,label:'Edit Listing'}];var orderHeadCells=[{id:'name',numeric:false,disablePadding:true,label:'Product'},{id:'quantityBought',numeric:false,disablePadding:true,label:'Quantity Bought'},{id:'Price',numeric:true,disablePadding:true,label:'Price ($)'}];function EnhancedTableHead(props){var classes=props.classes,onSelectAllClick=props.onSelectAllClick,order=props.order,orderBy=props.orderBy,numSelected=props.numSelected,rowCount=props.rowCount,onRequestSort=props.onRequestSort,isNested=props.isNested;var createSortHandler=function createSortHandler(property){return function(event){onRequestSort(event,property);};};return/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,!isNested&&/*#__PURE__*/React.createElement(TableCell,{padding:\"checkbox\"},/*#__PURE__*/React.createElement(Checkbox,{indeterminate:numSelected>0&&numSelected<rowCount,checked:rowCount>0&&numSelected===rowCount,onChange:onSelectAllClick,inputProps:{'aria-label':'select all products'}})),/*#__PURE__*/React.createElement(TableCell,null),(isNested?orderHeadCells:productHeadCells).map(function(headCell){return/*#__PURE__*/React.createElement(TableCell,{key:headCell.id,align:\"center\",padding:headCell.disablePadding?'none':'default',sortDirection:orderBy===headCell.id?order:false},/*#__PURE__*/React.createElement(TableSortLabel,{active:orderBy===headCell.id,direction:orderBy===headCell.id?order:'asc',onClick:createSortHandler(headCell.id)},headCell.label,orderBy===headCell.id?/*#__PURE__*/React.createElement(\"span\",{className:classes.visuallyHidden},order==='desc'?'sorted descending':'sorted ascending'):null));})));}//TABLE TOOLBAR (TITLE, SELECT ITEMS, DELETE ITEMS)\nvar useToolbarStyles=makeStyles(function(theme){return{root:{paddingLeft:theme.spacing(2),paddingRight:theme.spacing(1)},highlight:theme.palette.type==='light'?{color:theme.palette.secondary.main,backgroundColor:lighten(theme.palette.secondary.light,0.85)}:{color:theme.palette.text.primary,backgroundColor:theme.palette.secondary.dark},title:{flex:'1 1 100%'}};});var EnhancedTableToolbar=function EnhancedTableToolbar(props){var classes=useToolbarStyles();var selected=props.selected;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var history=useHistory();var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleDialogResult=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(continueAction){var i,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setOpen(false);if(!continueAction){_context.next=12;break;}i=0;case 3:if(!(i<selected.length)){_context.next=11;break;}_context.next=6;return productService.deleteProduct(selected[i]);case 6:res=_context.sent;if(res.status!==200){if(res.data.error==='Schema does not match'){alert(res.data.validation.body.message);}else{alert(res.data.error);}}case 8:i++;_context.next=3;break;case 11:history.go(0);case 12:case\"end\":return _context.stop();}}},_callee);}));return function handleDialogResult(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Toolbar,null,/*#__PURE__*/React.createElement(Typography,{className:classes.title,variant:\"h4\",id:\"tableTitle\",component:\"div\"},\"My Products\")),selected.length>0&&/*#__PURE__*/React.createElement(Toolbar,{className:classes.highlight},/*#__PURE__*/React.createElement(Typography,{className:classes.title,color:\"inherit\",variant:\"subtitle1\",component:\"div\"},selected.length,\" selected\"),/*#__PURE__*/React.createElement(Tooltip,{title:\"Delete\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"delete\",onClick:handleClickOpen},/*#__PURE__*/React.createElement(DeleteIcon,null)))),open&&/*#__PURE__*/React.createElement(ConfirmationDialog//callback\n,{title:\"Delete these products?\",content:\"The selected product listings will be deleted permanently.\",parentCallback:handleDialogResult}));};var useStyles=makeStyles(function(theme){return{root:{paddingTop:theme.spacing(3),paddingBottom:theme.spacing(3),position:'relative',textAlign:'center',margin:'auto',width:'90vw',overflow:'auto'},visuallyHidden:{border:0,clip:'rect(0 0 0 0)',height:1,margin:-1,overflow:'auto',padding:0,position:'absolute',top:20,width:1}};});function ProductTable(props){var classes=useStyles();// const products = useSelector((state) => state.products);\nvar rows=props.rows,isNested=props.isNested;// console.log(rows);\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];// array of filters chosen\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),sort=_useState6[0],setSort=_useState6[1];//\"A-Z, Recency, Popularity\"\nfunction setFilters(settingsData){setFilter(settingsData[0]);setSort(settingsData[1]);}//start table\nvar _useState7=useState('asc'),_useState8=_slicedToArray(_useState7,2),order=_useState8[0],setOrder=_useState8[1];var _useState9=useState('name'),_useState10=_slicedToArray(_useState9,2),orderBy=_useState10[0],setOrderBy=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),selected=_useState12[0],setSelected=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),page=_useState14[0],setPage=_useState14[1];var _useState15=useState(isNested?100:10),_useState16=_slicedToArray(_useState15,2),rowsPerPage=_useState16[0],setRowsPerPage=_useState16[1];var handleRequestSort=function handleRequestSort(event,property){var isAsc=orderBy===property&&order==='asc';setOrder(isAsc?'desc':'asc');setOrderBy(property);};var handleSelectAllClick=function handleSelectAllClick(event){if(event.target.checked){var newSelecteds=rows.map(function(n){return n._id;});setSelected(newSelecteds);return;}setSelected([]);};var handleChangePage=function handleChangePage(event,newPage){setPage(newPage);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setRowsPerPage(parseInt(event.target.value,10));setPage(0);};var isSelected=function isSelected(id){return selected.indexOf(id)!==-1;};//end\nreturn/*#__PURE__*/React.createElement(\"div\",{className:classes.root},!isNested&&/*#__PURE__*/React.createElement(EnhancedTableToolbar,{selected:selected}),/*#__PURE__*/React.createElement(TableContainer,null,/*#__PURE__*/React.createElement(Table,{\"aria-labelledby\":\"tableTitle\",\"aria-label\":\"enhanced table\",style:{position:'relative'}},/*#__PURE__*/React.createElement(EnhancedTableHead,{classes:classes,numSelected:selected.length,order:order,orderBy:orderBy,onSelectAllClick:handleSelectAllClick,onRequestSort:handleRequestSort,rowCount:rows&&rows.length,isNested:isNested}),/*#__PURE__*/React.createElement(TableBody,{id:\"tableBody\"},rows&&stableSort(rows,getComparator(order,orderBy)).slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(row,index){var itemIdentifier=row._id;//row.name ? row.name : row.productName;\nvar isItemSelected=isSelected(itemIdentifier);var labelId=\"enhanced-table-checkbox-\".concat(index);if(row.images&&row.images.length>0){row.imghref=row.images[0];}return/*#__PURE__*/React.createElement(ProductRow,{key:index,row:row,isItemSelected:isItemSelected,labelId:labelId,selected:selected,setSelected:setSelected,isNested:isNested});})))),!isNested&&/*#__PURE__*/React.createElement(TablePagination,{rowsPerPageOptions:[5,10,25],component:\"div\",count:rows&&rows.length,rowsPerPage:rowsPerPage,page:page,onChangePage:handleChangePage,onChangeRowsPerPage:handleChangeRowsPerPage}));}export default ProductTable;","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/MarketPlacePage/ProductTable.js"],"names":["lighten","makeStyles","Typography","React","useState","SearchBar","Filter","Table","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","TableSortLabel","Toolbar","Checkbox","IconButton","Tooltip","Paper","DeleteIcon","ProductRow","ConfirmationDialog","productService","useHistory","descendingComparator","a","b","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","map","el","index","sort","productHeadCells","id","numeric","disablePadding","label","orderHeadCells","EnhancedTableHead","props","classes","onSelectAllClick","numSelected","rowCount","onRequestSort","isNested","createSortHandler","property","event","headCell","visuallyHidden","useToolbarStyles","theme","root","paddingLeft","spacing","paddingRight","highlight","palette","type","color","secondary","main","backgroundColor","light","text","primary","dark","title","flex","EnhancedTableToolbar","selected","open","setOpen","history","handleClickOpen","handleDialogResult","continueAction","i","length","deleteProduct","res","status","data","error","alert","validation","body","message","go","useStyles","paddingTop","paddingBottom","position","textAlign","margin","width","overflow","border","clip","height","padding","top","ProductTable","rows","filter","setFilter","setSort","setFilters","settingsData","setOrder","setOrderBy","setSelected","page","setPage","rowsPerPage","setRowsPerPage","handleRequestSort","isAsc","handleSelectAllClick","target","checked","newSelecteds","n","_id","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","value","isSelected","indexOf","slice","row","itemIdentifier","isItemSelected","labelId","images","imghref"],"mappings":"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","sourcesContent":["import { lighten, makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n// import { useSelector } from 'react-redux';\nimport React, { useState } from 'react';\nimport SearchBar from './SearchBar';\nimport Filter from './Filter';\nimport PropTypes from 'prop-types';\n// import clsx from 'clsx';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TablePagination,\n  TableRow,\n  TableSortLabel,\n  Toolbar,\n  Checkbox,\n  IconButton,\n  Tooltip,\n  Paper,\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ProductRow from './ProductRow.js';\nimport ConfirmationDialog from '../Components/ConfirmationDialog';\nimport productService from '../services/products';\nimport { useHistory } from 'react-router-dom';\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction getComparator(order, orderBy) {\n  return order === 'desc'\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction stableSort(array, comparator) {\n  if (array != null) {\n    const stabilizedThis = array.map((el, index) => [el, index]);\n    stabilizedThis.sort((a, b) => {\n      const order = comparator(a[0], b[0]);\n      if (order !== 0) return order;\n      return a[1] - b[1];\n    });\n    return stabilizedThis.map((el) => el[0]);\n  }\n}\n\nconst productHeadCells = [\n  {\n    id: 'name',\n    numeric: false,\n    disablePadding: true,\n    label: 'Product',\n  },\n  {\n    id: 'inventory',\n    numeric: false,\n    disablePadding: true,\n    label: 'Inventory',\n  },\n  {\n    id: 'sales',\n    numeric: true,\n    disablePadding: true,\n    label: 'Sales Earned ($)',\n  },\n  {\n    id: 'edit',\n    numeric: false,\n    disablePadding: true,\n    label: 'Edit Listing',\n  },\n];\n\nconst orderHeadCells = [\n  {\n    id: 'name',\n    numeric: false,\n    disablePadding: true,\n    label: 'Product',\n  },\n  {\n    id: 'quantityBought',\n    numeric: false,\n    disablePadding: true,\n    label: 'Quantity Bought',\n  },\n  {\n    id: 'Price',\n    numeric: true,\n    disablePadding: true,\n    label: 'Price ($)',\n  },\n];\n\nfunction EnhancedTableHead(props) {\n  const {\n    classes,\n    onSelectAllClick,\n    order,\n    orderBy,\n    numSelected,\n    rowCount,\n    onRequestSort,\n    isNested,\n  } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        {!isNested && (\n          <TableCell padding=\"checkbox\">\n            <Checkbox\n              indeterminate={numSelected > 0 && numSelected < rowCount}\n              checked={rowCount > 0 && numSelected === rowCount}\n              onChange={onSelectAllClick}\n              inputProps={{ 'aria-label': 'select all products' }}\n            />\n          </TableCell>\n        )}\n        <TableCell />\n        {(isNested ? orderHeadCells : productHeadCells).map((headCell) => (\n          <TableCell\n            key={headCell.id}\n            align=\"center\"\n            padding={headCell.disablePadding ? 'none' : 'default'}\n            sortDirection={orderBy === headCell.id ? order : false}\n          >\n            <TableSortLabel\n              active={orderBy === headCell.id}\n              direction={orderBy === headCell.id ? order : 'asc'}\n              onClick={createSortHandler(headCell.id)}\n            >\n              {headCell.label}\n              {orderBy === headCell.id ? (\n                <span className={classes.visuallyHidden}>\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                </span>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nEnhancedTableHead.propTypes = {\n  classes: PropTypes.object.isRequired,\n  numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired,\n};\n\n//TABLE TOOLBAR (TITLE, SELECT ITEMS, DELETE ITEMS)\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1),\n  },\n  highlight:\n    theme.palette.type === 'light'\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark,\n        },\n  title: {\n    flex: '1 1 100%',\n  },\n}));\n\nconst EnhancedTableToolbar = (props) => {\n  const classes = useToolbarStyles();\n  const { selected } = props;\n  const [open, setOpen] = useState(false);\n  const history = useHistory();\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleDialogResult = async (continueAction) => {\n    setOpen(false);\n\n    if (continueAction) {\n      // console.log(selected);\n      // POST REQUEST TO DELETE SELECTED\n      for (let i = 0; i < selected.length; i++) {\n        let res = await productService.deleteProduct(selected[i]);\n        if (res.status !== 200) {\n          if (res.data.error === 'Schema does not match') {\n            alert(res.data.validation.body.message);\n          } else {\n            alert(res.data.error);\n          }\n        }\n      }\n\n      history.go(0);\n    }\n  };\n\n  return (\n    <>\n      <Toolbar>\n        <Typography\n          className={classes.title}\n          variant=\"h4\"\n          id=\"tableTitle\"\n          component=\"div\"\n        >\n          My Products\n        </Typography>\n      </Toolbar>\n      {selected.length > 0 && (\n        <Toolbar className={classes.highlight}>\n          <Typography\n            className={classes.title}\n            color=\"inherit\"\n            variant=\"subtitle1\"\n            component=\"div\"\n          >\n            {selected.length} selected\n          </Typography>\n          <Tooltip title=\"Delete\">\n            <IconButton aria-label=\"delete\" onClick={handleClickOpen}>\n              <DeleteIcon />\n            </IconButton>\n          </Tooltip>\n        </Toolbar>\n      )}\n      {open && (\n        <ConfirmationDialog\n          //callback\n          title=\"Delete these products?\"\n          content=\"The selected product listings will be deleted permanently.\"\n          parentCallback={handleDialogResult}\n        />\n      )}\n    </>\n  );\n};\n\nEnhancedTableToolbar.propTypes = {\n  numSelected: PropTypes.number.isRequired,\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3),\n    position: 'relative',\n    textAlign: 'center',\n    margin: 'auto',\n    width: '90vw',\n    overflow: 'auto',\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'auto',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n}));\n\nfunction ProductTable(props) {\n  const classes = useStyles();\n  // const products = useSelector((state) => state.products);\n  const { rows, isNested } = props;\n\n  // console.log(rows);\n\n  const [filter, setFilter] = useState(false); // array of filters chosen\n  const [sort, setSort] = useState(false); //\"A-Z, Recency, Popularity\"\n\n  function setFilters(settingsData) {\n    setFilter(settingsData[0]);\n    setSort(settingsData[1]);\n  }\n\n  //start table\n  const [order, setOrder] = useState('asc');\n  const [orderBy, setOrderBy] = useState('name');\n  const [selected, setSelected] = useState([]);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(isNested ? 100 : 10);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleSelectAllClick = (event) => {\n    if (event.target.checked) {\n      const newSelecteds = rows.map((n) => n._id);\n      setSelected(newSelecteds);\n      return;\n    }\n    setSelected([]);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const isSelected = (id) => selected.indexOf(id) !== -1;\n\n  //end\n\n  return (\n    <div className={classes.root}>\n      {/* <Paper className={classes.paper}> */}\n      {!isNested && <EnhancedTableToolbar selected={selected} />}\n\n      <TableContainer>\n        <Table\n          aria-labelledby=\"tableTitle\"\n          aria-label=\"enhanced table\"\n          style={{ position: 'relative' }}\n        >\n          <EnhancedTableHead\n            classes={classes}\n            numSelected={selected.length}\n            order={order}\n            orderBy={orderBy}\n            onSelectAllClick={handleSelectAllClick}\n            onRequestSort={handleRequestSort}\n            rowCount={rows && rows.length}\n            isNested={isNested}\n          />\n          <TableBody id=\"tableBody\">\n            {rows &&\n              stableSort(rows, getComparator(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((row, index) => {\n                  const itemIdentifier = row._id; //row.name ? row.name : row.productName;\n                  const isItemSelected = isSelected(itemIdentifier);\n                  const labelId = `enhanced-table-checkbox-${index}`;\n                  if (row.images && row.images.length > 0) {\n                    row.imghref = row.images[0];\n                  }\n                  return (\n                    <ProductRow\n                      key={index}\n                      row={row}\n                      isItemSelected={isItemSelected}\n                      labelId={labelId}\n                      selected={selected}\n                      setSelected={setSelected}\n                      isNested={isNested}\n                    />\n                  );\n                })}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      {!isNested && (\n        <TablePagination\n          rowsPerPageOptions={[5, 10, 25]}\n          component=\"div\"\n          count={rows && rows.length}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          onChangePage={handleChangePage}\n          onChangeRowsPerPage={handleChangeRowsPerPage}\n        />\n      )}\n      {/* </Paper> */}\n    </div>\n  );\n}\n\nexport default ProductTable;\n"]},"metadata":{},"sourceType":"module"}