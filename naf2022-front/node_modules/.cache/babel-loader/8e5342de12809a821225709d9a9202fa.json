{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{makeStyles}from'@material-ui/core/styles';import TextField from'@material-ui/core/TextField';import Visibility from'@material-ui/icons/Visibility';import VisibilityOff from'@material-ui/icons/VisibilityOff';import FormControl from'@material-ui/core/FormControl';import InputLabel from'@material-ui/core/InputLabel';import InputAdornment from'@material-ui/core/InputAdornment';import FilledInput from'@material-ui/core/FilledInput';import IconButton from'@material-ui/core/IconButton';import Button from'@material-ui/core/Button';import authService from'../services/auth';import{useHistory}from'react-router-dom';import clsx from'clsx';import{trackPromise}from'react-promise-tracker';import{LoadingSpinnerComponent}from'../utils/LoadingSpinnerComponent';import{usePromiseTracker}from'react-promise-tracker';var useStyles=makeStyles(function(theme){return{root:{position:'relative',overflow:'hidden'},formSection:{marginBottom:theme.spacing(3)}};});export default function LoginForm(props){var _useState=useState({username:'',password:'',showPassword:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var user=props.user;var history=useHistory();var _usePromiseTracker=usePromiseTracker(),promiseInProgress=_usePromiseTracker.promiseInProgress;var handleChange=function handleChange(prop){return function(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},prop,event.target.value)));};};var handleClickShowPassword=function handleClickShowPassword(){setValues(_objectSpread(_objectSpread({},values),{},{showPassword:!values.showPassword}));};var handleMouseDownPassword=function handleMouseDownPassword(event){event.preventDefault();};var logIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();res=null;if(!(user==='vendor')){_context.next=8;break;}_context.next=5;return trackPromise(authService.vendorLogin(values.username,values.password));case 5:res=_context.sent;_context.next=12;break;case 8:if(!(user==='admin')){_context.next=12;break;}_context.next=11;return trackPromise(authService.adminLogin(values.username,values.password));case 11:res=_context.sent;case 12:if(res.status===200){history.go(0);}else{alert(JSON.stringify(res.data.errors));}case 13:case\"end\":return _context.stop();}}},_callee);}));return function logIn(_x){return _ref.apply(this,arguments);};}();var classes=useStyles();return/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",onSubmit:logIn,className:classes.root},/*#__PURE__*/React.createElement(TextField,{label:\"Enter your username/email\",id:\"username\",variant:\"filled\",fullWidth:true,onChange:handleChange('username'),className:classes.formSection,color:\"secondary\",inputProps:{maxLength:64},required:true}),/*#__PURE__*/React.createElement(FormControl,{className:clsx(classes.formSection),variant:\"filled\",fullWidth:true,color:\"secondary\",required:true},/*#__PURE__*/React.createElement(InputLabel,null,\"Enter your password\"),/*#__PURE__*/React.createElement(FilledInput,{id:\"password\",type:values.showPassword?'text':'password',value:values.password,onChange:handleChange('password'),inputProps:{maxLength:64},endAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"end\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:handleClickShowPassword,onMouseDown:handleMouseDownPassword,edge:\"end\"},values.showPassword?/*#__PURE__*/React.createElement(Visibility,null):/*#__PURE__*/React.createElement(VisibilityOff,null))),labelWidth:70})),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",type:\"submit\",color:\"secondary\",disabled:promiseInProgress},\"Log in\"),/*#__PURE__*/React.createElement(LoadingSpinnerComponent,null));}","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/Authentication/LoginForm.js"],"names":["React","useState","makeStyles","TextField","Visibility","VisibilityOff","FormControl","InputLabel","InputAdornment","FilledInput","IconButton","Button","authService","useHistory","clsx","trackPromise","LoadingSpinnerComponent","usePromiseTracker","useStyles","theme","root","position","overflow","formSection","marginBottom","spacing","LoginForm","props","username","password","showPassword","values","setValues","user","history","promiseInProgress","handleChange","prop","event","target","value","handleClickShowPassword","handleMouseDownPassword","preventDefault","logIn","res","vendorLogin","adminLogin","status","go","alert","JSON","stringify","data","errors","classes","maxLength"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport FilledInput from '@material-ui/core/FilledInput';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport authService from '../services/auth';\nimport { useHistory } from 'react-router-dom';\nimport clsx from 'clsx';\nimport { trackPromise } from 'react-promise-tracker';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { usePromiseTracker } from 'react-promise-tracker';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'relative',\n    overflow: 'hidden',\n  },\n  formSection: {\n    marginBottom: theme.spacing(3),\n  },\n}));\nexport default function LoginForm(props) {\n  const [values, setValues] = useState({\n    username: '',\n    password: '',\n    showPassword: false,\n  });\n  const { user } = props;\n  const history = useHistory();\n  const { promiseInProgress } = usePromiseTracker();\n\n  const handleChange = (prop) => (event) => {\n    setValues({ ...values, [prop]: event.target.value });\n  };\n\n  const handleClickShowPassword = () => {\n    setValues({ ...values, showPassword: !values.showPassword });\n  };\n\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n\n  const logIn = async (event) => {\n    event.preventDefault();\n    let res = null;\n    if (user === 'vendor') {\n      res = await trackPromise(\n        authService.vendorLogin(values.username, values.password)\n      );\n    } else if (user === 'admin') {\n      res = await trackPromise(\n        authService.adminLogin(values.username, values.password)\n      );\n    }\n    if (res.status === 200) {\n      history.go(0);\n    } else {\n      alert(JSON.stringify(res.data.errors));\n    }\n  };\n\n  const classes = useStyles();\n  return (\n    <form autoComplete=\"off\" onSubmit={logIn} className={classes.root}>\n      <TextField\n        label=\"Enter your username/email\"\n        id=\"username\"\n        variant=\"filled\"\n        fullWidth\n        onChange={handleChange('username')}\n        className={classes.formSection}\n        color=\"secondary\"\n        inputProps={{ maxLength: 64 }}\n        required\n      />\n      <FormControl\n        className={clsx(classes.formSection)}\n        variant=\"filled\"\n        fullWidth\n        color=\"secondary\"\n        required\n      >\n        <InputLabel>Enter your password</InputLabel>\n        <FilledInput\n          id=\"password\"\n          type={values.showPassword ? 'text' : 'password'}\n          value={values.password}\n          onChange={handleChange('password')}\n          inputProps={{ maxLength: 64 }}\n          endAdornment={\n            <InputAdornment position=\"end\">\n              <IconButton\n                aria-label=\"toggle password visibility\"\n                onClick={handleClickShowPassword}\n                onMouseDown={handleMouseDownPassword}\n                edge=\"end\"\n              >\n                {values.showPassword ? <Visibility /> : <VisibilityOff />}\n              </IconButton>\n            </InputAdornment>\n          }\n          labelWidth={70}\n        />\n      </FormControl>\n      <Button\n        variant=\"contained\"\n        type=\"submit\"\n        color=\"secondary\"\n        disabled={promiseInProgress}\n      >\n        Log in\n      </Button>\n      <LoadingSpinnerComponent />\n    </form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}