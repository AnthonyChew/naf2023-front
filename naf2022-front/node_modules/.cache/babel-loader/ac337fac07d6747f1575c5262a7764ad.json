{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _defineProperty from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import React,{useState,useEffect}from'react';import{makeStyles}from'@material-ui/core/styles';import Typography from'@material-ui/core/Typography';import Tooltip from'@material-ui/core/Tooltip';import donationService from'../services/donations';import{useTheme}from'@material-ui/core/styles';import useMediaQuery from'@material-ui/core/useMediaQuery';var useStyles=makeStyles(function(theme){var _ref;return _ref={root:{textAlign:'center',position:'relative',paddingBottom:100},bar:{width:'95vw',display:'inline-flex',borderRadius:'50px',overflow:'hidden'// alignItems: 'center',\n// justifyContent: 'center',\n},section:{'&:hover':{filter:'brightness(105%)'},display:'flex',flexDirection:'column',justifyContent:'center'}},_defineProperty(_ref,theme.breakpoints.down('sm'),{bar:{flexDirection:'column',height:'140vh',width:'50vw'}}),_defineProperty(_ref,theme.breakpoints.up('lg'),{bar:{width:'80vw'}}),_ref;});export default function DonationTracker(props){var classes=useStyles();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),sections=_useState2[0],setSections=_useState2[1];var colours=['#FED92F','#F8B03E','#F2874C','#D2536A','#B11F87','#5F497D','#0C7373','#228080'];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return donationService.getDonations();case 2:res=_context.sent;if(res.status===200){setSections(res.data);}//  else {\n//   alert('Error loading donations :(');\n// }\ncase 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var total=sections.reduce(function(accumulator,currentValue){return accumulator+currentValue.amount;},0);var theme=useTheme();var isSmScreen=useMediaQuery(theme.breakpoints.down('sm'));function dynamicStyling(section,index){return isSmScreen?{height:\"\".concat(section.amount/total*200,\"%\"),backgroundColor:colours[index],textAlign:'center'}:{width:\"\".concat(section.amount/total*100,\"%\"),backgroundColor:colours[index],textAlign:'center'};}// https://stackoverflow.com/questions/36577205/what-is-the-elegant-way-to-get-the-latest-date-from-array-of-objects-in-client-s\nvar lastUpdated=new Date(Math.max.apply(Math,_toConsumableArray(sections.map(function(section){return new Date(section.last_updated);}))));return/*#__PURE__*/React.createElement(\"div\",{className:classes.root,style:{paddingTop:\"120px\"}},/*#__PURE__*/React.createElement(Typography,{align:\"center\",variant:\"h4\"},\"Total Donations Collected:\"),/*#__PURE__*/React.createElement(Typography,{variant:\"h5\"},\"$\",total.toFixed(2)),/*#__PURE__*/React.createElement(\"div\",{className:classes.bar},sections.map(function(section,index){return/*#__PURE__*/React.createElement(React.Fragment,null,section.amount>0&&/*#__PURE__*/React.createElement(Tooltip,{title:section.description,\"aria-label\":section.description,key:index},/*#__PURE__*/React.createElement(\"div\",{className:classes.section,style:dynamicStyling(section,index)},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",style:{fontWeight:'bold'}},section.name),/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle2\"},\"$\",section.amount.toFixed(2)))));})),/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\"},\"Updated as of: \",lastUpdated.toLocaleString('en-GB')));}","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/HomePage/DonationTracker.js"],"names":["React","useState","useEffect","makeStyles","Typography","Tooltip","donationService","useTheme","useMediaQuery","useStyles","theme","root","textAlign","position","paddingBottom","bar","width","display","borderRadius","overflow","section","filter","flexDirection","justifyContent","breakpoints","down","height","up","DonationTracker","props","classes","sections","setSections","colours","fetchData","getDonations","res","status","data","total","reduce","accumulator","currentValue","amount","isSmScreen","dynamicStyling","index","backgroundColor","lastUpdated","Date","Math","max","map","last_updated","paddingTop","toFixed","description","fontWeight","name","toLocaleString"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport donationService from '../services/donations';\nimport { useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    textAlign: 'center',\n    position: 'relative',\n    paddingBottom: 100,\n  },\n  bar: {\n    width: '95vw',\n    display: 'inline-flex',\n    borderRadius: '50px',\n    overflow: 'hidden',\n    // alignItems: 'center',\n    // justifyContent: 'center',\n  },\n  section: {\n    '&:hover': {\n      filter: 'brightness(105%)',\n    },\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n  },\n  [theme.breakpoints.down('sm')]: {\n    bar: {\n      flexDirection: 'column',\n      height: '140vh',\n      width: '50vw',\n    },\n  },\n  [theme.breakpoints.up('lg')]: {\n    bar: {\n      width: '80vw',\n    },\n  },\n}));\n\nexport default function DonationTracker(props) {\n  const classes = useStyles();\n  const [sections, setSections] = useState([]);\n  let colours = [\n    '#FED92F',\n    '#F8B03E',\n    '#F2874C',\n    '#D2536A',\n    '#B11F87',\n    '#5F497D',\n    '#0C7373',\n    '#228080',\n  ];\n\n  useEffect(() => {\n    async function fetchData() {\n      const res = await donationService.getDonations();\n      if (res.status === 200) {\n        setSections(res.data);\n      }\n      //  else {\n      //   alert('Error loading donations :(');\n      // }\n    }\n    fetchData();\n  }, []);\n\n  const total = sections.reduce(function (accumulator, currentValue) {\n    return accumulator + currentValue.amount;\n  }, 0);\n\n  const theme = useTheme();\n  const isSmScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n  function dynamicStyling(section, index) {\n    return isSmScreen\n      ? {\n          height: `${(section.amount / total) * 200}%`,\n          backgroundColor: colours[index],\n          textAlign: 'center',\n        }\n      : {\n          width: `${(section.amount / total) * 100}%`,\n          backgroundColor: colours[index],\n          textAlign: 'center',\n        };\n  }\n\n  // https://stackoverflow.com/questions/36577205/what-is-the-elegant-way-to-get-the-latest-date-from-array-of-objects-in-client-s\n  const lastUpdated = new Date(\n    Math.max(...sections.map((section) => new Date(section.last_updated)))\n  );\n\n  return (\n    <div className={classes.root} style={{paddingTop:\"120px\"}}>\n      <Typography align=\"center\" variant=\"h4\">\n        Total Donations Collected:\n      </Typography>\n      <Typography variant=\"h5\">${total.toFixed(2)}</Typography>\n      <div className={classes.bar}>\n        {sections.map((section, index) => (\n          <>\n            {section.amount > 0 && (\n              <Tooltip\n                title={section.description}\n                aria-label={section.description}\n                key={index}\n              >\n                <div\n                  className={classes.section}\n                  style={dynamicStyling(section, index)}\n                >\n                  <Typography\n                    variant=\"subtitle1\"\n                    style={{ fontWeight: 'bold' }}\n                  >\n                    {section.name}\n                  </Typography>\n                  <Typography variant=\"subtitle2\">\n                    ${section.amount.toFixed(2)}\n                  </Typography>\n                </div>\n              </Tooltip>\n            )}\n          </>\n        ))}\n      </div>\n      <Typography variant=\"subtitle1\">\n        Updated as of: {lastUpdated.toLocaleString('en-GB')}\n      </Typography>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}