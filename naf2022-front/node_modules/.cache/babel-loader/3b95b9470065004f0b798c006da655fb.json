{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\src\\\\ShoppingCart\\\\Payment.js\";\nimport React, { useState, useReducer, useEffect } from 'react';\nimport CartCard from './CartCard';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Grid from '@material-ui/core/Grid'; // import logo from 'NAF2022MARKETPLACE.JPG';\n\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@material-ui/core';\nimport orderService from '../services/orders';\nimport { useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport UserLogin from '../Authentication/UserLogin';\nimport { resetCart } from '../reducers/CartReducer';\nimport { usePromiseTracker } from 'react-promise-tracker';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { trackPromise } from 'react-promise-tracker';\nimport { ReactComponent as BackgroundSVG } from \"@svgr/webpack?-svgo,+titleProp,+ref!./PaymentSVG/Background.svg\";\nimport { ReactComponent as TopLinesSVG } from \"@svgr/webpack?-svgo,+titleProp,+ref!./PaymentSVG/TopLines.svg\";\nimport { ReactComponent as MiddleGalaxySVG } from \"@svgr/webpack?-svgo,+titleProp,+ref!./PaymentSVG/MiddleGalaxy.svg\";\nimport { ReactComponent as BottomLeftGalaxySVG } from \"@svgr/webpack?-svgo,+titleProp,+ref!./PaymentSVG/BottomLeftGalaxy.svg\";\nimport { ReactComponent as BottomRightStarsSVG } from \"@svgr/webpack?-svgo,+titleProp,+ref!./PaymentSVG/BottomRightStars.svg\";\nimport { Hidden } from '@material-ui/core'; //import vendorService from '../services/vendors';\n\nimport productService from '../services/products';\nimport FeaturedCard from './FeaturedCard';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n    position: 'relative',\n    paddingBottom: theme.spacing(100)\n  },\n  paymentTitle: {\n    color: '#033F63',\n    marginBottom: theme.spacing(5)\n  },\n  thankyou: {\n    fontWeight: 'bold',\n    textTransform: 'uppercase'\n  },\n  container: {\n    backgroundColor: '#f0f0f0',\n    border: '2px solid purple',\n    // display: 'flex',\n    padding: theme.spacing(6),\n    textAlign: 'left',\n    margin: theme.spacing(6)\n  },\n  [theme.breakpoints.down('xs')]: {\n    root: {\n      padding: 0\n    },\n    container: {\n      padding: theme.spacing(1),\n      margin: theme.spacing(1) //   textAlign: 'center',\n\n    }\n  },\n  total: {\n    fontWeight: 'bold',\n    border: '2px solid orange',\n    textAlign: 'center',\n    padding: theme.spacing(2)\n  },\n  form: {\n    display: 'flex',\n    height: '100%',\n    flexDirection: 'column',\n    justifyContent: 'space-between'\n  },\n  [theme.breakpoints.up('md')]: {\n    form: {\n      marginRight: theme.spacing(2)\n    }\n  },\n  label: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(1)\n  },\n  acknowledgement: {\n    fontSize: '0.8rem'\n  },\n  paymentButton: {\n    paddingTop: theme.spacing(2)\n  }\n}));\n\nconst formReducer = (state, event) => {\n  return { ...state,\n    [event.name]: event.value\n  };\n};\n\nexport default function Payment(props) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [formData, setFormData] = useReducer(formReducer, {});\n  const [purchases, setPurchases] = useState([]);\n  const [vendorsDelivery, setVendorsDelivery] = useState([]);\n  const [collectionTypes, setCollectionTypes] = useState([]);\n  const [collectionDates, setCollectionDates] = useState([]);\n  const [acknowledgement, setAcknowledgment] = useState(false);\n  const {\n    promiseInProgress\n  } = usePromiseTracker();\n  const [featuredProducts, setFeaturedProducts] = useState([]);\n  const state = useSelector(state => {\n    return state;\n  });\n  const [total, setTotal] = useState(state.total);\n  useEffect(() => {\n    const products = state.addedProducts;\n    const purchases = products.map(product => {\n      return {\n        surcharge: product.vendorSurcharge,\n        //ADD THIS TO STORE\n        productId: product._id,\n        vendorId: product.vendorId,\n        vendorName: product.vendorName,\n        quantityBought: product.quantity,\n        comments: product.comments,\n        name: product.name,\n        leadTime: product.leadTime,\n        canDeliver: product.canDeliver,\n        canCollect: product.canCollect,\n        price: product.price,\n        totalQty: product.totalQty\n      };\n    });\n    setPurchases(purchases);\n    const emptyArray = new Array(purchases.length).fill(null);\n    setCollectionDates(emptyArray);\n    setCollectionTypes(emptyArray);\n  }, [state.addedProducts]);\n  useEffect(() => {\n    let newVendorsDelivery = [];\n    let newTotal = state.total;\n\n    for (let i = 0; i < collectionTypes.length; i++) {\n      if (collectionTypes[i] === 'delivery') {\n        if (!newVendorsDelivery.some(vendor => vendor.vendorId === purchases[i].vendorId)) {\n          const newVendor = {\n            vendorId: purchases[i].vendorId,\n            vendorName: purchases[i].vendorName,\n            vendorSurcharge: purchases[i].surcharge\n          };\n          newVendorsDelivery.push(newVendor);\n          newTotal += purchases[i].surcharge;\n        } //Use set?? Dk how to make it immutable though\n\n      }\n    }\n\n    setVendorsDelivery(newVendorsDelivery);\n    setTotal(newTotal);\n  }, [collectionTypes, state.total, purchases]); // Fetch & display featured products\n\n  useEffect(() => {\n    async function getFeaturedProducts() {\n      // Get specific vendor\n\n      /*const vendorId = \"61ec64a2f69f4991768c6ba9\";\n      const res = await trackPromise(vendorService.getVendor(vendorId));\n      if (res.status === 200) {\n        setFeaturedProducts(res.data.products);\n      } else {\n        alert('Error getting featured products');\n      } */\n      // Get specific products\n      const productIds = ['61f499f917902de7d435eb11', '61f4994e17902de7d435eb0f', '61f499e217902de7d435eb10'];\n      let products = [];\n\n      for (let i = 0; i < productIds.length; ++i) {\n        const res = await trackPromise(productService.getIndivProduct(productIds[i]));\n\n        if (res !== null) {\n          products.push(res);\n        } else {\n          alert('Error getting featured products');\n        }\n      }\n\n      setFeaturedProducts(products);\n    }\n\n    getFeaturedProducts();\n  }, []);\n\n  function getFeaturedProducts() {\n    return featuredProducts;\n    /*// randomly sort the array & fetch N no. products\n    let shuffled = featuredProducts.sort(() => 0.5 - Math.random());\n    // return only 3 products\n    let featuredShow = shuffled.slice(0, 3);\n     return featuredShow;*/\n  }\n\n  const [helperText, setHelperText] = useState('');\n  const [auth, setAuth] = useState(true);\n\n  const addDays = (date, days) => {\n    date.setDate(date.getDate() + days);\n    return date;\n  };\n\n  const submitOrder = async () => {\n    purchases.forEach((purchase, i) => {\n      purchase['collection'] = collectionTypes[i];\n      delete purchase['name'];\n      delete purchase['leadTime'];\n      delete purchase['canCollect'];\n      delete purchase['canDeliver'];\n      delete purchase['surcharge'];\n      delete purchase['vendorName'];\n      delete purchase['price'];\n      delete purchase['totalQty'];\n      if (collectionTypes[i] === 'delivery') purchase['deliveryAddress'] = formData.deliveryAddress;else if (collectionTypes[i] === 'selfCollection') purchase['collectionDate'] = collectionDates[i];\n    });\n    delete formData['deliveryAddress'];\n    formData.purchases = purchases;\n    formData.total = total; // console.log(formData);\n\n    const res = await trackPromise(orderService.postOrder(formData));\n\n    if (res.status === 200) {\n      dispatch(resetCart());\n      history.push('/PaymentSuccess');\n    } else if (res.status === 401) {\n      // console.log(res);\n      setAuth(false);\n      alert('Please login to complete your payment');\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const handleLoginClose = () => {\n    setAuth(true);\n  };\n\n  const handleChange = event => {\n    setFormData({\n      name: event.target.name,\n      value: event.target.value\n    });\n  };\n\n  const handleCollectionDate = event => {\n    const index = parseInt(event.target.name);\n    const newCollection = collectionDates.map((collection, i) => {\n      return i === index ? event.target.value : collection;\n    });\n    setCollectionDates(newCollection);\n  };\n\n  const handleCollectionType = (purchase, event) => {\n    const index = parseInt(event.target.name);\n    const newCollectionTypes = collectionTypes.map((collection, i) => {\n      return i === index ? event.target.value : collection;\n    });\n    const newCollectionDates = collectionDates.map((collection, i) => {\n      return i === index ? null : collection;\n    });\n    setCollectionTypes(newCollectionTypes);\n    setCollectionDates(newCollectionDates);\n  };\n\n  const history = useHistory();\n\n  const handleSubmit = event => {\n    event.preventDefault(); //acknowledgment\n\n    if (acknowledgement === false) {\n      setHelperText('Please indicate acknowledgement of terms and conditions.');\n    } else {\n      //ensure collect-related fields are filled\n      if (collectionTypes.includes(null)) {\n        setHelperText('Please select a Collection Type for all products.');\n      } else if (collectionTypes.includes('selfCollection')) {\n        let indexesOfSelfCollection = [];\n        let missingIndexes = [];\n        collectionTypes.forEach((type, i) => {\n          if (collectionTypes[i] === 'selfCollection') {\n            indexesOfSelfCollection.push(i);\n          }\n        });\n        indexesOfSelfCollection.forEach(index => {\n          if (collectionDates[index] === null) {\n            missingIndexes.push(index);\n          }\n        });\n\n        if (missingIndexes.length === 0) {\n          submitOrder();\n        } else {\n          setHelperText(`Please select a date for self collection for all purchased products. Missing for ${missingIndexes.map(index => purchases[index].name + ', ')}`);\n        }\n      } else {\n        submitOrder();\n      }\n    }\n  };\n\n  const featProducts = getFeaturedProducts();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, auth ? null : /*#__PURE__*/React.createElement(UserLogin, {\n    parentCallback: handleLoginClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 22\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TopLinesSVG, {\n    style: {\n      zIndex: -1,\n      top: '25',\n      left: '0%',\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(MiddleGalaxySVG, {\n    style: {\n      zIndex: -1,\n      top: '415',\n      left: '0',\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BottomLeftGalaxySVG, {\n    style: {\n      zIndex: -1,\n      top: '1860',\n      left: '5%',\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BottomRightStarsSVG, {\n    style: {\n      zIndex: -1,\n      top: '1460',\n      right: '0',\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BackgroundSVG, {\n    \"data-aos\": \"slide-right\",\n    \"data-aos-duration\": \"1000\",\n    style: {\n      zIndex: -999,\n      top: -83,\n      left: 0,\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    autoComplete: \"off\",\n    className: classes.form,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h2\",\n    className: classes.paymentTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 11\n    }\n  }, \"PAYMENT\", /*#__PURE__*/React.createElement(Typography, {\n    className: classes.thankyou,\n    paragraph: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 13\n    }\n  }, \"Thank you for shopping with us!\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 7,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    className: classes.label,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 19\n    }\n  }, \"Enter your name:\"), /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    name: \"name\",\n    label: \"Name\",\n    type: \"text\",\n    variant: \"filled\",\n    color: \"secondary\",\n    value: formData.name,\n    onChange: handleChange,\n    inputProps: {\n      maxLength: 64\n    },\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    className: classes.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 19\n    }\n  }, \"Enter your contact number (e.g. 81234567):\"), /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    name: \"contactNumber\",\n    label: \"Contact Number\",\n    variant: \"filled\",\n    color: \"secondary\",\n    type: \"tel\",\n    inputProps: {\n      pattern: '^[0-9]+$',\n      // accepts digits only\n      maxLength: 15\n    } // max possible length of a phone number including the country code\n    ,\n    value: formData.contactNumber,\n    onChange: handleChange,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    className: classes.label,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 19\n    }\n  }, \"Enter your email address:\"), /*#__PURE__*/React.createElement(TextField, {\n    name: \"emailAddress\",\n    label: \"Email\",\n    variant: \"filled\",\n    color: \"secondary\",\n    type: \"email\",\n    required: true //inputProps={{ pattern: '^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$' }} // this pattern would allow some invalid gmails e.g. \"abc\"@gmail.com\n    ,\n    inputProps: {\n      maxLength: 64\n    },\n    value: formData.email,\n    onChange: handleChange,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 19\n    }\n  })), purchases.map((purchase, i) => {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 5,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      component: \"fieldset\",\n      required: true,\n      style: {\n        marginTop: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      component: \"legend\",\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 29\n      }\n    }, \"Select Item Collection Type for \", purchase.name), /*#__PURE__*/React.createElement(RadioGroup, {\n      \"aria-label\": \"collection options\",\n      name: i,\n      value: collectionTypes[i],\n      onChange: evt => handleCollectionType(purchase, evt),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 29\n      }\n    }, purchase.canCollect && /*#__PURE__*/React.createElement(FormControlLabel, {\n      value: \"selfCollection\",\n      control: /*#__PURE__*/React.createElement(Radio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 44\n        }\n      }),\n      label: \"Self-Collection at NTU\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 33\n      }\n    }), purchase.canDeliver && /*#__PURE__*/React.createElement(FormControlLabel, {\n      value: \"delivery\",\n      control: /*#__PURE__*/React.createElement(Radio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 44\n        }\n      }),\n      label: \"Delivery\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 1,\n      xs: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 27\n      }\n    }), /*#__PURE__*/React.createElement(Hidden, {\n      smUp: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 6,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 25\n      }\n    }, collectionTypes[i] === 'selfCollection' && /*#__PURE__*/React.createElement(FormControl, {\n      component: \"fieldset\",\n      required: true,\n      style: {\n        marginTop: 15\n      },\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      component: \"legend\",\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 31\n      }\n    }, \"Select Item Collection Date for \", purchase.name), /*#__PURE__*/React.createElement(RadioGroup, {\n      \"aria-label\": \"collection date options\",\n      name: i,\n      value: collectionDates[i],\n      onChange: handleCollectionDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      value: \"23febslot1\",\n      control: /*#__PURE__*/React.createElement(Radio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 44\n        }\n      }),\n      label: \"23rd February (12-4pm) Linkway @ Nanyang Auditorium\",\n      disabled: addDays(new Date(), purchase.leadTime) > new Date('23 February 2022'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(FormControlLabel, {\n      value: \"09marslot1\",\n      control: /*#__PURE__*/React.createElement(Radio, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 44\n        }\n      }),\n      label: \"9th March (2-6pm) Student Activities Centre @ North Spine\",\n      disabled: addDays(new Date(), purchase.leadTime) > new Date('09 March 2022'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 33\n      }\n    }))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 23\n      }\n    }));\n  }), collectionTypes.includes('delivery') && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 603,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    className: classes.label,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 604,\n      columnNumber: 21\n    }\n  }, \"Enter your address:\"), /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    name: \"deliveryAddress\",\n    label: \"Delivery Address\",\n    type: \"text\",\n    variant: \"filled\",\n    color: \"secondary\",\n    value: formData.deliveryAddress,\n    onChange: handleChange,\n    inputProps: {\n      maxLength: 255\n    },\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Hidden, {\n    smDown: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 622,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 623,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 4,\n    xs: 12,\n    justify: \"space-between\",\n    style: {\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"NAF2022MARKETPLACE.JPG\",\n    alt: \"QR Code\",\n    width: \"100%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    style: {\n      color: '#7c1a78',\n      fontWeight: 'bold',\n      width: '100%',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 17\n    }\n  }, \"Reference No: \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 641,\n      columnNumber: 33\n    }\n  }), \"NAF2022MARKETPLACE\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 644,\n      columnNumber: 17\n    }\n  }, \"You can either:\", /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 21\n    }\n  }, \"Pay by PayNow/PayLah to the QR Code above \"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 648,\n      columnNumber: 21\n    }\n  }, \"Pay later by scanning the QR Code in the email after you confirm payment below\"))), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 17\n    }\n  }, \"Total:\"), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.total,\n    variant: \"body1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 17\n    }\n  }, `$${total.toFixed(2)}`), /*#__PURE__*/React.createElement(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: classes.table,\n    \"aria-label\": \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 663,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 664,\n      columnNumber: 25\n    }\n  }, \"Product\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 25\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 666,\n      columnNumber: 25\n    }\n  }, \"Quantity\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 667,\n      columnNumber: 25\n    }\n  }, \"Total\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 670,\n      columnNumber: 21\n    }\n  }, purchases && purchases.map((purchase, index) => /*#__PURE__*/React.createElement(TableRow, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 29\n    }\n  }, purchase.name), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 29\n    }\n  }, purchase.price ? Number.isInteger(purchase.price) ? purchase.price : purchase.price.toFixed(2) : null), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 684,\n      columnNumber: 29\n    }\n  }, purchase.totalQty), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 687,\n      columnNumber: 29\n    }\n  }, (purchase.price * purchase.totalQty).toFixed(2))))))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 695,\n      columnNumber: 17\n    }\n  }), vendorsDelivery && vendorsDelivery.length > 0 && /*#__PURE__*/React.createElement(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 697,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: classes.table,\n    \"aria-label\": \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 698,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 699,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 700,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 701,\n      columnNumber: 27\n    }\n  }, \"Vendor\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 702,\n      columnNumber: 27\n    }\n  }, \"Surcharge\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 705,\n      columnNumber: 23\n    }\n  }, vendorsDelivery && vendorsDelivery.map((vendor, index) => /*#__PURE__*/React.createElement(TableRow, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 708,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 709,\n      columnNumber: 31\n    }\n  }, vendor.vendorName), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 712,\n      columnNumber: 31\n    }\n  }, vendor.vendorSurcharge)))))))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    className: classes.paymentButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 723,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 724,\n      columnNumber: 15\n    }\n  }, \"Featured Items\", /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    xs: 12,\n    className: classes.cartCards,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 726,\n      columnNumber: 17\n    }\n  }, featProducts && featProducts.map((product, i) => {\n    return /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      md: 4,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 730,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FeaturedCard, {\n      product: product,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 731,\n        columnNumber: 27\n      }\n    }));\n  })), /*#__PURE__*/React.createElement(FormControl, {\n    component: \"fieldset\",\n    required: true,\n    style: {\n      marginTop: 15,\n      justifyContent: 'flex-end',\n      flex: 1,\n      marginBottom: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 736,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    component: \"legend\",\n    color: \"secondary\",\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      checked: acknowledgement,\n      onChange: () => setAcknowledgment(!acknowledgement),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 750,\n        columnNumber: 23\n      }\n    }),\n    label: /*#__PURE__*/React.createElement(Typography, {\n      paragraph: true,\n      className: classes.acknowledgement,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 756,\n        columnNumber: 23\n      }\n    }, \"By checking this box, I hereby agree that I will not hold NTU Arts Festival 2022 responsible for any loss or damage incurred to my purchase from the NAF Online Marketplace. I also hereby agree that there will be no refunds or exchanges for my purchase from the NAF Online Marketplace. I acknowledge that I have given consent to the collection, use and disclosure of my personal data by NTU CAC NTU Arts Festival for administrative purposes.\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 746,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(FormHelperText, {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 770,\n      columnNumber: 17\n    }\n  }, helperText), /*#__PURE__*/React.createElement(LoadingSpinnerComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 773,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"secondary\",\n    disabled: state.addedProducts.length === 0 || promiseInProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 774,\n      columnNumber: 17\n    }\n  }, \"Confirm Payment\")))))));\n}","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/ShoppingCart/Payment.js"],"names":["React","useState","useReducer","useEffect","CartCard","makeStyles","Typography","TextField","InputLabel","Grid","Radio","RadioGroup","FormControlLabel","FormControl","FormLabel","FormHelperText","Button","Checkbox","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","orderService","useHistory","useSelector","useDispatch","UserLogin","resetCart","usePromiseTracker","LoadingSpinnerComponent","trackPromise","Hidden","productService","FeaturedCard","useStyles","theme","root","textAlign","position","paddingBottom","spacing","paymentTitle","color","marginBottom","thankyou","fontWeight","textTransform","container","backgroundColor","border","padding","margin","breakpoints","down","total","form","display","height","flexDirection","justifyContent","up","marginRight","label","marginTop","acknowledgement","fontSize","paymentButton","paddingTop","formReducer","state","event","name","value","Payment","props","classes","dispatch","formData","setFormData","purchases","setPurchases","vendorsDelivery","setVendorsDelivery","collectionTypes","setCollectionTypes","collectionDates","setCollectionDates","setAcknowledgment","promiseInProgress","featuredProducts","setFeaturedProducts","setTotal","products","addedProducts","map","product","surcharge","vendorSurcharge","productId","_id","vendorId","vendorName","quantityBought","quantity","comments","leadTime","canDeliver","canCollect","price","totalQty","emptyArray","Array","length","fill","newVendorsDelivery","newTotal","i","some","vendor","newVendor","push","getFeaturedProducts","productIds","res","getIndivProduct","alert","helperText","setHelperText","auth","setAuth","addDays","date","days","setDate","getDate","submitOrder","forEach","purchase","deliveryAddress","postOrder","status","history","data","error","handleLoginClose","handleChange","target","handleCollectionDate","index","parseInt","newCollection","collection","handleCollectionType","newCollectionTypes","newCollectionDates","handleSubmit","preventDefault","includes","indexesOfSelfCollection","missingIndexes","type","featProducts","zIndex","top","left","right","maxLength","pattern","contactNumber","email","evt","Date","width","toFixed","table","Number","isInteger","cartCards","flex"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect } from 'react';\n\nimport CartCard from './CartCard';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Grid from '@material-ui/core/Grid';\n// import logo from 'NAF2022MARKETPLACE.JPG';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@material-ui/core';\nimport orderService from '../services/orders';\nimport { useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport UserLogin from '../Authentication/UserLogin';\nimport { resetCart } from '../reducers/CartReducer';\nimport { usePromiseTracker } from 'react-promise-tracker';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { trackPromise } from 'react-promise-tracker';\nimport { ReactComponent as BackgroundSVG } from './PaymentSVG/Background.svg';\nimport { ReactComponent as TopLinesSVG } from './PaymentSVG/TopLines.svg';\nimport { ReactComponent as MiddleGalaxySVG } from './PaymentSVG/MiddleGalaxy.svg';\nimport { ReactComponent as BottomLeftGalaxySVG } from './PaymentSVG/BottomLeftGalaxy.svg';\nimport { ReactComponent as BottomRightStarsSVG } from './PaymentSVG/BottomRightStars.svg';\nimport { Hidden } from '@material-ui/core';\n\n//import vendorService from '../services/vendors';\nimport productService from '../services/products';\nimport FeaturedCard from './FeaturedCard';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    textAlign: 'center',\n    position: 'relative',\n    paddingBottom: theme.spacing(100),\n  },\n  paymentTitle: {\n    color: '#033F63',\n    marginBottom: theme.spacing(5),\n  },\n  thankyou: {\n    fontWeight: 'bold',\n    textTransform: 'uppercase',\n  },\n  container: {\n    backgroundColor: '#f0f0f0',\n    border: '2px solid purple',\n    // display: 'flex',\n    padding: theme.spacing(6),\n\n    textAlign: 'left',\n    margin: theme.spacing(6),\n  },\n  [theme.breakpoints.down('xs')]: {\n    root: {\n      padding: 0,\n    },\n    container: {\n      padding: theme.spacing(1),\n      margin: theme.spacing(1),\n      //   textAlign: 'center',\n    },\n  },\n  total: {\n    fontWeight: 'bold',\n    border: '2px solid orange',\n    textAlign: 'center',\n    padding: theme.spacing(2),\n  },\n  form: {\n    display: 'flex',\n    height: '100%',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n  },\n  [theme.breakpoints.up('md')]: {\n    form: {\n      marginRight: theme.spacing(2),\n    },\n  },\n  label: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(1),\n  },\n  acknowledgement: {\n    fontSize: '0.8rem',\n  },\n  paymentButton: {\n    paddingTop: theme.spacing(2),\n  },\n}));\n\nconst formReducer = (state, event) => {\n  return {\n    ...state,\n    [event.name]: event.value,\n  };\n};\n\nexport default function Payment(props) {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [formData, setFormData] = useReducer(formReducer, {});\n  const [purchases, setPurchases] = useState([]);\n  const [vendorsDelivery, setVendorsDelivery] = useState([]);\n  const [collectionTypes, setCollectionTypes] = useState([]);\n  const [collectionDates, setCollectionDates] = useState([]);\n  const [acknowledgement, setAcknowledgment] = useState(false);\n  const { promiseInProgress } = usePromiseTracker();\n\n  const [featuredProducts, setFeaturedProducts] = useState([]);\n\n  const state = useSelector((state) => {\n    return state;\n  });\n  const [total, setTotal] = useState(state.total);\n\n  useEffect(() => {\n    const products = state.addedProducts;\n    const purchases = products.map((product) => {\n      return {\n        surcharge: product.vendorSurcharge, //ADD THIS TO STORE\n        productId: product._id,\n        vendorId: product.vendorId,\n        vendorName: product.vendorName,\n        quantityBought: product.quantity,\n        comments: product.comments,\n        name: product.name,\n        leadTime: product.leadTime,\n        canDeliver: product.canDeliver,\n        canCollect: product.canCollect,\n        price: product.price,\n        totalQty: product.totalQty,\n      };\n    });\n    setPurchases(purchases);\n    const emptyArray = new Array(purchases.length).fill(null);\n    setCollectionDates(emptyArray);\n    setCollectionTypes(emptyArray);\n  }, [state.addedProducts]);\n\n  useEffect(() => {\n    let newVendorsDelivery = [];\n    let newTotal = state.total;\n    for (let i = 0; i < collectionTypes.length; i++) {\n      if (collectionTypes[i] === 'delivery') {\n        if (\n          !newVendorsDelivery.some(\n            (vendor) => vendor.vendorId === purchases[i].vendorId\n          )\n        ) {\n          const newVendor = {\n            vendorId: purchases[i].vendorId,\n            vendorName: purchases[i].vendorName,\n            vendorSurcharge: purchases[i].surcharge,\n          };\n          newVendorsDelivery.push(newVendor);\n          newTotal += purchases[i].surcharge;\n        }\n        //Use set?? Dk how to make it immutable though\n      }\n    }\n    setVendorsDelivery(newVendorsDelivery);\n    setTotal(newTotal);\n  }, [collectionTypes, state.total, purchases]);\n\n  // Fetch & display featured products\n  useEffect(() => {\n    async function getFeaturedProducts() {\n      // Get specific vendor\n      /*const vendorId = \"61ec64a2f69f4991768c6ba9\";\n      const res = await trackPromise(vendorService.getVendor(vendorId));\n      if (res.status === 200) {\n        setFeaturedProducts(res.data.products);\n      } else {\n        alert('Error getting featured products');\n      } */\n\n      // Get specific products\n      const productIds = [\n        '61f499f917902de7d435eb11',\n        '61f4994e17902de7d435eb0f',\n        '61f499e217902de7d435eb10',\n      ];\n      let products = [];\n      for (let i = 0; i < productIds.length; ++i) {\n        const res = await trackPromise(\n          productService.getIndivProduct(productIds[i])\n        );\n        if (res !== null) {\n          products.push(res);\n        } else {\n          alert('Error getting featured products');\n        }\n      }\n      setFeaturedProducts(products);\n    }\n    getFeaturedProducts();\n  }, []);\n\n  function getFeaturedProducts() {\n    return featuredProducts;\n    /*// randomly sort the array & fetch N no. products\n    let shuffled = featuredProducts.sort(() => 0.5 - Math.random());\n    // return only 3 products\n    let featuredShow = shuffled.slice(0, 3);\n\n    return featuredShow;*/\n  }\n\n  const [helperText, setHelperText] = useState('');\n  const [auth, setAuth] = useState(true);\n\n  const addDays = (date, days) => {\n    date.setDate(date.getDate() + days);\n    return date;\n  };\n\n  const submitOrder = async () => {\n    purchases.forEach((purchase, i) => {\n      purchase['collection'] = collectionTypes[i];\n      delete purchase['name'];\n      delete purchase['leadTime'];\n      delete purchase['canCollect'];\n      delete purchase['canDeliver'];\n      delete purchase['surcharge'];\n      delete purchase['vendorName'];\n      delete purchase['price'];\n      delete purchase['totalQty'];\n      if (collectionTypes[i] === 'delivery')\n        purchase['deliveryAddress'] = formData.deliveryAddress;\n      else if (collectionTypes[i] === 'selfCollection')\n        purchase['collectionDate'] = collectionDates[i];\n    });\n    delete formData['deliveryAddress'];\n    formData.purchases = purchases;\n    formData.total = total;\n    // console.log(formData);\n    const res = await trackPromise(orderService.postOrder(formData));\n    if (res.status === 200) {\n      dispatch(resetCart());\n      history.push('/PaymentSuccess');\n    } else if (res.status === 401) {\n      // console.log(res);\n      setAuth(false);\n      alert('Please login to complete your payment');\n    } else {\n      alert(res.data.error);\n    }\n  };\n\n  const handleLoginClose = () => {\n    setAuth(true);\n  };\n\n  const handleChange = (event) => {\n    setFormData({\n      name: event.target.name,\n      value: event.target.value,\n    });\n  };\n\n  const handleCollectionDate = (event) => {\n    const index = parseInt(event.target.name);\n    const newCollection = collectionDates.map((collection, i) => {\n      return i === index ? event.target.value : collection;\n    });\n    setCollectionDates(newCollection);\n  };\n\n  const handleCollectionType = (purchase, event) => {\n    const index = parseInt(event.target.name);\n    const newCollectionTypes = collectionTypes.map((collection, i) => {\n      return i === index ? event.target.value : collection;\n    });\n    const newCollectionDates = collectionDates.map((collection, i) => {\n      return i === index ? null : collection;\n    });\n    setCollectionTypes(newCollectionTypes);\n    setCollectionDates(newCollectionDates);\n  };\n\n  const history = useHistory();\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    //acknowledgment\n    if (acknowledgement === false) {\n      setHelperText('Please indicate acknowledgement of terms and conditions.');\n    } else {\n      //ensure collect-related fields are filled\n      if (collectionTypes.includes(null)) {\n        setHelperText('Please select a Collection Type for all products.');\n      } else if (collectionTypes.includes('selfCollection')) {\n        let indexesOfSelfCollection = [];\n        let missingIndexes = [];\n        collectionTypes.forEach((type, i) => {\n          if (collectionTypes[i] === 'selfCollection') {\n            indexesOfSelfCollection.push(i);\n          }\n        });\n        indexesOfSelfCollection.forEach((index) => {\n          if (collectionDates[index] === null) {\n            missingIndexes.push(index);\n          }\n        });\n        if (missingIndexes.length === 0) {\n          submitOrder();\n        } else {\n          setHelperText(\n            `Please select a date for self collection for all purchased products. Missing for ${missingIndexes.map(\n              (index) => purchases[index].name + ', '\n            )}`\n          );\n        }\n      } else {\n        submitOrder();\n      }\n    }\n  };\n\n  const featProducts = getFeaturedProducts();\n\n  return (\n    <>\n      {auth ? null : <UserLogin parentCallback={handleLoginClose} />}\n\n      <div className={classes.root}>\n        <TopLinesSVG\n          style={{ zIndex: -1, top: '25', left: '0%', position: 'absolute' }}\n        />\n        <MiddleGalaxySVG\n          style={{ zIndex: -1, top: '415', left: '0', position: 'absolute' }}\n        />\n        <BottomLeftGalaxySVG\n          style={{ zIndex: -1, top: '1860', left: '5%', position: 'absolute' }}\n        />\n        <BottomRightStarsSVG\n          style={{ zIndex: -1, top: '1460', right: '0', position: 'absolute' }}\n        />\n\n        <BackgroundSVG\n          data-aos=\"slide-right\"\n          data-aos-duration=\"1000\"\n          style={{\n            zIndex: -999,\n            top: -83,\n            left: 0,\n            position: 'absolute',\n          }}\n        />\n        <form\n          autoComplete=\"off\"\n          className={classes.form}\n          onSubmit={handleSubmit}\n        >\n          <Typography variant=\"h2\" className={classes.paymentTitle}>\n            PAYMENT\n            <Typography className={classes.thankyou} paragraph>\n              Thank you for shopping with us!\n            </Typography>\n          </Typography>\n\n          <div className={classes.container}>\n            <Grid container xs={12}>\n              <Grid item md={7} xs={12}>\n                <div>\n                  <InputLabel className={classes.label} required>\n                    Enter your name:\n                  </InputLabel>\n                  <TextField\n                    required\n                    name=\"name\"\n                    label=\"Name\"\n                    type=\"text\"\n                    variant=\"filled\"\n                    color=\"secondary\"\n                    value={formData.name}\n                    onChange={handleChange}\n                    inputProps={{ maxLength: 64 }}\n                    fullWidth\n                  />\n                </div>\n\n                <div>\n                  <InputLabel className={classes.label}>\n                    Enter your contact number (e.g. 81234567):\n                  </InputLabel>\n                  <TextField\n                    required\n                    name=\"contactNumber\"\n                    label=\"Contact Number\"\n                    variant=\"filled\"\n                    color=\"secondary\"\n                    type=\"tel\"\n                    inputProps={{\n                      pattern: '^[0-9]+$', // accepts digits only\n                      maxLength: 15,\n                    }} // max possible length of a phone number including the country code\n                    value={formData.contactNumber}\n                    onChange={handleChange}\n                    fullWidth\n                  />\n                </div>\n\n                <div>\n                  <InputLabel className={classes.label} required>\n                    Enter your email address:\n                  </InputLabel>\n                  <TextField\n                    name=\"emailAddress\"\n                    label=\"Email\"\n                    variant=\"filled\"\n                    color=\"secondary\"\n                    type=\"email\"\n                    required\n                    //inputProps={{ pattern: '^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$' }} // this pattern would allow some invalid gmails e.g. \"abc\"@gmail.com\n                    inputProps={{ maxLength: 64 }}\n                    value={formData.email}\n                    onChange={handleChange}\n                    fullWidth\n                  />\n                </div>\n\n                {purchases.map((purchase, i) => {\n                  return (\n                    <>\n                      <Grid container>\n                        <Grid item md={5} xs={12}>\n                          <FormControl\n                            component=\"fieldset\"\n                            required\n                            style={{ marginTop: 15 }}\n                          >\n                            <FormLabel component=\"legend\" color=\"secondary\">\n                              Select Item Collection Type for {purchase.name}\n                            </FormLabel>\n                            <RadioGroup\n                              aria-label=\"collection options\"\n                              name={i}\n                              value={collectionTypes[i]}\n                              onChange={(evt) =>\n                                handleCollectionType(purchase, evt)\n                              }\n                              required\n                            >\n                              {purchase.canCollect && (\n                                <FormControlLabel\n                                  value=\"selfCollection\"\n                                  control={<Radio />}\n                                  label=\"Self-Collection at NTU\"\n                                />\n                              )}\n                              {purchase.canDeliver && (\n                                <FormControlLabel\n                                  value=\"delivery\"\n                                  control={<Radio />}\n                                  label=\"Delivery\"\n                                />\n                              )}\n                            </RadioGroup>\n                          </FormControl>\n                          <Grid item md={1} xs={0}></Grid>\n                          <Hidden smUp>\n                            <br></br>\n                          </Hidden>\n                        </Grid>\n                        <Grid item md={6} xs={12}>\n                          {collectionTypes[i] === 'selfCollection' && (\n                            <FormControl\n                              component=\"fieldset\"\n                              required\n                              style={{ marginTop: 15 }}\n                              key={i}\n                            >\n                              <FormLabel component=\"legend\" color=\"secondary\">\n                                Select Item Collection Date for {purchase.name}\n                              </FormLabel>\n                              <RadioGroup\n                                aria-label=\"collection date options\"\n                                name={i}\n                                value={collectionDates[i]}\n                                onChange={handleCollectionDate}\n                              >\n                                {/* <FormControlLabel\n                              value=\"14febslot1\"\n                              control={<Radio />}\n                              label=\"14th February (12-2pm) Skydeck @ North Spine\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('14 February 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"14febslot2\"\n                              control={<Radio />}\n                              label=\"14th February (5-6.30pm) Skydeck @ North Spine\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('14 February 2022')\n                              }\n                            /> */}\n                                <FormControlLabel\n                                  value=\"23febslot1\"\n                                  control={<Radio />}\n                                  label=\"23rd February (12-4pm) Linkway @ Nanyang Auditorium\"\n                                  disabled={\n                                    addDays(new Date(), purchase.leadTime) >\n                                    new Date('23 February 2022')\n                                  }\n                                />\n                                <FormControlLabel\n                                  value=\"09marslot1\"\n                                  control={<Radio />}\n                                  label=\"9th March (2-6pm) Student Activities Centre @ North Spine\"\n                                  disabled={\n                                    addDays(new Date(), purchase.leadTime) >\n                                    new Date('09 March 2022')\n                                  }\n                                />\n\n                                {/* <FormControlLabel\n                              value=\"18febslot1\"\n                              control={<Radio />}\n                              label=\"18th February (12-2pm) The Arc TR+07\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('18 February 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"18febslot2\"\n                              control={<Radio />}\n                              label=\"18th February (6-8pm) The Arc TR+07\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('18 February 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"11marslot1\"\n                              control={<Radio />}\n                              label=\"11th March (12-2pm) The Arc TR+27\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('11 March 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"11marslot2\"\n                              control={<Radio />}\n                              label=\"11th March (6-8pm) The Arc TR+27\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('11 March 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"25marslot1\"\n                              control={<Radio />}\n                              label=\"25th March (12-2pm) The Arc TR+04\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('25 March 2022')\n                              }\n                            />\n                            <FormControlLabel\n                              value=\"25marslot2\"\n                              control={<Radio />}\n                              label=\"25th March (6-8pm) The Arc TR+04\"\n                              disabled={\n                                addDays(new Date(), purchase.leadTime) >\n                                new Date('25 March 2022')\n                              }\n                            /> */}\n                              </RadioGroup>\n                            </FormControl>\n                          )}\n                        </Grid>\n                      </Grid>\n                      <br></br>\n                      <br></br>\n                      <br></br>\n                    </>\n                  );\n                })}\n                {collectionTypes.includes('delivery') && (\n                  <div>\n                    <InputLabel className={classes.label} required>\n                      Enter your address:\n                    </InputLabel>\n                    <TextField\n                      required\n                      name=\"deliveryAddress\"\n                      label=\"Delivery Address\"\n                      type=\"text\"\n                      variant=\"filled\"\n                      color=\"secondary\"\n                      value={formData.deliveryAddress}\n                      onChange={handleChange}\n                      inputProps={{ maxLength: 255 }}\n                      fullWidth\n                    />\n                  </div>\n                )}\n              </Grid>\n              <Hidden smDown>\n                <Grid item md={1}></Grid>\n              </Hidden>\n              <Grid\n                item\n                md={4}\n                xs={12}\n                justify=\"space-between\"\n                style={{ height: '100%' }}\n              >\n                <img src=\"NAF2022MARKETPLACE.JPG\" alt=\"QR Code\" width=\"100%\" />\n                <Typography\n                  style={{\n                    color: '#7c1a78',\n                    fontWeight: 'bold',\n                    width: '100%',\n                    textAlign: 'center',\n                  }}\n                >\n                  Reference No: <br />\n                  NAF2022MARKETPLACE\n                </Typography>\n                <Typography variant=\"body1\" className={classes.label}>\n                  You can either:\n                  <ul>\n                    <li>Pay by PayNow/PayLah to the QR Code above </li>\n                    <li>\n                      Pay later by scanning the QR Code in the email after you\n                      confirm payment below\n                    </li>\n                  </ul>\n                </Typography>\n                <Typography variant=\"body1\" className={classes.label}>\n                  Total:\n                </Typography>\n                <Typography className={classes.total} variant=\"body1\">\n                  {`$${total.toFixed(2)}`}\n                </Typography>\n                <TableContainer>\n                  <Table className={classes.table} aria-label=\"table\">\n                    <TableHead>\n                      <TableRow>\n                        <TableCell>Product</TableCell>\n                        <TableCell align=\"right\">Price</TableCell>\n                        <TableCell align=\"right\">Quantity</TableCell>\n                        <TableCell align=\"right\">Total</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {purchases &&\n                        purchases.map((purchase, index) => (\n                          <TableRow key={index}>\n                            <TableCell component=\"th\" scope=\"row\">\n                              {purchase.name}\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              {purchase.price\n                                ? Number.isInteger(purchase.price)\n                                  ? purchase.price\n                                  : purchase.price.toFixed(2)\n                                : null}\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              {purchase.totalQty}\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              {(purchase.price * purchase.totalQty).toFixed(2)}\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n                <br></br>\n                {vendorsDelivery && vendorsDelivery.length > 0 && (\n                  <TableContainer>\n                    <Table className={classes.table} aria-label=\"table\">\n                      <TableHead>\n                        <TableRow>\n                          <TableCell>Vendor</TableCell>\n                          <TableCell align=\"right\">Surcharge</TableCell>\n                        </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {vendorsDelivery &&\n                          vendorsDelivery.map((vendor, index) => (\n                            <TableRow key={index}>\n                              <TableCell component=\"th\" scope=\"row\">\n                                {vendor.vendorName}\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                {vendor.vendorSurcharge}\n                              </TableCell>\n                            </TableRow>\n                          ))}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                )}\n              </Grid>\n            </Grid>\n            <Grid container className={classes.paymentButton}>\n              <Grid item xs={12}>\n                Featured Items\n                <Grid container xs={12} className={classes.cartCards}>\n                  {featProducts &&\n                    featProducts.map((product, i) => {\n                      return (\n                        <Grid item md={4} xs={12}>\n                          <FeaturedCard product={product} />\n                        </Grid>\n                      );\n                    })}\n                </Grid>\n                <FormControl\n                  component=\"fieldset\"\n                  required\n                  style={{\n                    marginTop: 15,\n                    justifyContent: 'flex-end',\n                    flex: 1,\n                    marginBottom: 10,\n                  }}\n                >\n                  <FormControlLabel\n                    component=\"legend\"\n                    color=\"secondary\"\n                    control={\n                      <Checkbox\n                        checked={acknowledgement}\n                        onChange={() => setAcknowledgment(!acknowledgement)}\n                      />\n                    }\n                    label={\n                      <Typography paragraph className={classes.acknowledgement}>\n                        By checking this box, I hereby agree that I will not\n                        hold NTU Arts Festival 2022 responsible for any loss or\n                        damage incurred to my purchase from the NAF Online\n                        Marketplace. I also hereby agree that there will be no\n                        refunds or exchanges for my purchase from the NAF Online\n                        Marketplace. I acknowledge that I have given consent to\n                        the collection, use and disclosure of my personal data\n                        by NTU CAC NTU Arts Festival for administrative\n                        purposes.\n                      </Typography>\n                    }\n                  />\n                </FormControl>\n                <FormHelperText style={{ color: 'red' }}>\n                  {helperText}\n                </FormHelperText>\n                <LoadingSpinnerComponent />\n                <Button\n                  fullWidth\n                  type=\"submit\"\n                  variant=\"contained\"\n                  color=\"secondary\"\n                  disabled={\n                    state.addedProducts.length === 0 || promiseInProgress\n                  }\n                >\n                  Confirm Payment\n                </Button>\n              </Grid>\n            </Grid>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}