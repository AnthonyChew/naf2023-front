{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _toConsumableArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _defineProperty from\"C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\naf2022-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import React,{useState,useEffect,Component}from'react';import{withStyles,makeStyles,useTheme}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import TextField from'@material-ui/core/TextField';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';import OutlinedInput from'@material-ui/core/OutlinedInput';import InputLabel from'@material-ui/core/InputLabel';import InputAdornment from'@material-ui/core/InputAdornment';import FormHelperText from'@material-ui/core/FormHelperText';import FormControl from'@material-ui/core/FormControl';import Typography from'@material-ui/core/Typography';import FormLabel from'@material-ui/core/FormLabel';import FormGroup from'@material-ui/core/FormGroup';import FormControlLabel from'@material-ui/core/FormControlLabel';import Checkbox from'@material-ui/core/Checkbox';import ChipInput from'material-ui-chip-input';import productService from'../services/products';import{useDropzone}from'react-dropzone';import IconButton from'@material-ui/core/IconButton';import CloseRoundedIcon from'@material-ui/icons/CloseRounded';import{useHistory}from'react-router-dom';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemSecondaryAction from'@material-ui/core/ListItemSecondaryAction';import ListItemText from'@material-ui/core/ListItemText';import Autocomplete from'@material-ui/lab/Autocomplete';import{LoadingSpinnerComponent}from'../utils/LoadingSpinnerComponent';import{trackPromise}from'react-promise-tracker';import{usePromiseTracker}from'react-promise-tracker';var useStyles=makeStyles(function(theme){return _defineProperty({root:{padding:theme.spacing(2)},formSection:{marginTop:theme.spacing(2),marginBottom:theme.spacing(2),display:'block'},indentedCheckboxes:{marginLeft:theme.spacing(2)},secondaryInput:{marginLeft:theme.spacing(3),marginBottom:theme.spacing(2)},rowLabels:{align:'center'},//IMAGE DROPZONE STYLING\ndropzone:{// backgroundColor: 'pink',\nborder:'3px dashed rgba(179, 86, 153, 0.6)',color:'rgba(179, 86, 153, 1)',padding:theme.spacing(5),marginTop:theme.spacing(2),margin:'auto',textAlign:'center',fontWeight:'bold','&:hover':{backgroundColor:theme.palette.background.default,cursor:'pointer'},'&:focus':{outline:'none'}},thumbsContainer:{width:'100%',display:'flex',flexDirection:'row',flexWrap:'wrap',marginTop:16,justifyContent:'center'},thumb:{display:'inline-flex',position:'relative',borderRadius:2,border:'1px solid #eaeaea',marginBottom:8,marginRight:8,padding:5},thumbInner:{//   minWidth: 0,\n//   overflow: 'hidden',\nheight:150},img:{display:'block',width:'auto',height:'100%'}},theme.breakpoints.down('xs'),{thumbInner:{height:'auto'},img:{width:'100%',objectFit:'cover'}});});export default function AddProduct(props){var _id=props._id,parentCallback=props.parentCallback,pdtName=props.pdtName,pdtDesc=props.pdtDesc,pdtPrice=props.pdtPrice,pdtCat=props.pdtCat,pdtQuantity=props.pdtQuantity,pdtAtt1=props.pdtAtt1,pdtAtt1Options=props.pdtAtt1Options,pdtAtt2=props.pdtAtt2,pdtAtt2Options=props.pdtAtt2Options,pdtCollect=props.pdtCollect,pdtDeliver=props.pdtDeliver,pdtPreorder=props.pdtPreorder,pdtLeadtime=props.pdtLeadtime,pdtImages=props.pdtImages,type=props.type;var classes=useStyles();var history=useHistory();var _useState=useState({name:pdtName,description:typeof pdtDesc!=='undefined'?pdtDesc:'',price:pdtPrice,attribute1:typeof pdtAtt1!=='undefined'?pdtAtt1:'',attribute2:typeof pdtAtt2!=='undefined'?pdtAtt2:'',addAttribute1:typeof pdtAtt1!=='undefined'?pdtAtt1.length!==0:false,addAttribute2:typeof pdtAtt2!=='undefined'?pdtAtt2.length!==0:false,canDeliver:typeof pdtDeliver!=='undefined'?pdtDeliver:false,canCollect:typeof pdtCollect!=='undefined'?pdtCollect:false,category:pdtCat,isPreOrder:pdtPreorder,leadTime:pdtLeadtime-2//account for minimum 2 day leadtime\n// quantity: 0,\n}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),helperText=_useState4[0],setHelperText=_useState4[1];var _useState5=useState(typeof pdtQuantity!=='undefined'?pdtQuantity:[[]]),_useState6=_slicedToArray(_useState5,2),quantity=_useState6[0],setQuantity=_useState6[1];var _usePromiseTracker=usePromiseTracker(),promiseInProgress=_usePromiseTracker.promiseInProgress;//ATTRIBUTE 1 = SIZES, ATTRIBUTE2 = COLOURS\n//INPUT POSSIBLE COLOURS (ROW)\nvar _useState7=useState(state.addAttribute1?pdtAtt1Options:[]),_useState8=_slicedToArray(_useState7,2),attribute1options=_useState8[0],setAttribute1=_useState8[1];var handleAddAttribute1Chip=function handleAddAttribute1Chip(chip){setAttribute1(function(attribute1options){return[].concat(_toConsumableArray(attribute1options),[chip]);});// console.log(attribute1options.length); //FIX THIS\nif(attribute1options.length>0){//if 1 colour -> increase but if 0 colours to 1 colour can reuse the matrix\n//Initial matrix = [[]]\nsetQuantity(function(quantity){return[].concat(_toConsumableArray(quantity),[[]]);});// console.log('ADDING ATTRIBUTE 1 CHIP, QUANTITY: ', (quantity) => [\n//   ...quantity,\n//   [],\n// ]);\n}};var handleDeleteAttribute1Chip=function handleDeleteAttribute1Chip(chip){console.log('Delete properly');var indexOfColor=attribute1options.indexOf(chip);//FIX THIS\nsetQuantity(quantity.filter(function(qty,index){return index!==indexOfColor;}));if(attribute1options.length===1){//if got 1 colour only then just set to an empty array\n// setQuantity((quantity[indexOfColor] = []));\nsetQuantity([[]]);// console.log('DELETING ATTRIBUTE 1 CHIP, QUANTITY: ', [[]]);\n}// console.log(\n//   'DELETING ATTRIBUTE 1 CHIP, QUANTITY: ',\n//   quantity.filter((qty, index) => index !== indexOfColor)\n// );\nsetAttribute1(attribute1options.filter(function(colour){return colour!==chip;}));};//INPUT POSSIBLE COLOURS (ROW)\nvar _useState9=useState(state.addAttribute2?pdtAtt2Options:[]),_useState10=_slicedToArray(_useState9,2),attribute2options=_useState10[0],setAttribute2=_useState10[1];var handleAddAttribute2Chip=function handleAddAttribute2Chip(chip){setAttribute2(function(attribute2options){return[].concat(_toConsumableArray(attribute2options),[chip]);});//FIX THIS\n// if (attribute2options.length >= 1) {\n//   const newQuantity = quantity.map((colourRow) => [...colourRow, null]);\n//   setQuantity(newQuantity);\n//   console.log('ADDING ATTRIBUTE 2 CHIP, QUANTITY: ', newQuantity);\n// }\n};var handleDeleteAttribute2Chip=function handleDeleteAttribute2Chip(chip){setAttribute2(attribute2options.filter(function(size){return size!==chip;}));var indexOfSize=attribute2options.indexOf(chip);//FIX THIS\n//if product size from 1 to 0 then dont change\nvar newQuantity=quantity.map(function(colourRow){return colourRow.filter(function(rowElem,index){return index!==indexOfSize;});});setQuantity(newQuantity);// console.log('DELETING ATTRIBUTE 2 CHIP, QUANTITY: ', newQuantity);\n};var handleClearAttribute1Chips=function handleClearAttribute1Chips(){setAttribute1([]);setQuantity([[]]);};var handleClearAttribute2Chips=function handleClearAttribute2Chips(){var newQuantity=_toConsumableArray(quantity);var _iterator=_createForOfIteratorHelper(attribute2options),_step;try{var _loop=function _loop(){var option=_step.value;var indexOfSize=attribute2options.indexOf(option);newQuantity=newQuantity.map(function(colourRow){return colourRow.filter(function(rowElem,index){return index!==indexOfSize;});});};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}setAttribute2([]);setQuantity(newQuantity);};var tableCol=attribute2options.length===0?[''].concat(attribute2options):attribute2options;var tableRow=attribute1options.length===0?[''].concat(attribute1options):attribute1options;//PRODUCT OPTION CHECKBOXES\nvar handleChange=function handleChange(event){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},event.target.name,event.target.checked)));if(event.target.checked===false){switch(event.target.name){case'addAttribute1':setState(_objectSpread(_objectSpread({},state),{},_defineProperty({attribute1:''},event.target.name,event.target.checked)));handleClearAttribute1Chips();break;case'addAttribute2':setState(_objectSpread(_objectSpread({},state),{},_defineProperty({attribute2:''},event.target.name,event.target.checked)));handleClearAttribute2Chips();break;case'isPreOrder':setState(_objectSpread(_objectSpread({},state),{},_defineProperty({leadTime:0},event.target.name,event.target.checked)));break;default:break;}}};//Handle quantity\nvar handleQtyChange=function handleQtyChange(row,col){return function(event){var copiedQuantity=_toConsumableArray(quantity);var copiedRow=_toConsumableArray(copiedQuantity[row]);copiedRow[col]=event.target.value;var newQuantity=copiedQuantity.map(function(colourRow,rowNum){if(rowNum===row){return copiedRow;}else{return colourRow;}});setQuantity(newQuantity);};};//handle quantity (null)\nvar handleNullQty=function handleNullQty(row,col,isNull){var copiedQuantity=_toConsumableArray(quantity);var copiedRow=_toConsumableArray(copiedQuantity[row]);isNull?copiedRow[col]=null:copiedRow.splice(col,1);var newQuantity=copiedQuantity.map(function(colourRow,rowNum){if(rowNum===row){return copiedRow;}else{return colourRow;}});setQuantity(newQuantity);};//Handle input\nvar handleInputChange=function handleInputChange(prop){return function(event){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},prop,event.target.value)));// console.log(event);\n};};var handleCategoryChange=function handleCategoryChange(event,value){setState(_objectSpread(_objectSpread({},state),{},{category:value}));};//ADD IMAGES DROPZONE\nvar _useState11=useState(typeof pdtImages!=='undefined'?pdtImages:[]),_useState12=_slicedToArray(_useState11,2),images=_useState12[0],setImages=_useState12[1];// console.log('IMAGES HERE',   images);\nvar _useDropzone=useDropzone({accept:'image/*',onDrop:function onDrop(acceptedFiles){var allFiles=images;acceptedFiles.forEach(function(file){return allFiles.push(file);});setImages(allFiles.map(function(file){return typeof file.name==='string'?Object.assign(file,{preview:URL.createObjectURL(file)}):file;}));}}),getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps;useEffect(function(){return function(){// Make sure to revoke the data uris to avoid memory leaks\nimages.forEach(function(file){return URL.revokeObjectURL(file.preview);});};},[images]);var removeImage=function removeImage(file){// console.log(file);\nsetImages(images.filter(function(savedFile){return savedFile!==file;}));};//DIALOG ACTIONS\nvar handleClose=function handleClose(){parentCallback();};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var newProduct,oldImages,i,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(state.addAttribute2&&attribute2options.length===0)){_context.next=5;break;}setHelperText('Please input at least one attribute option, or uncheck Add Attribute 1.');_context.next=45;break;case 5:if(!(state.addAttribute1&&attribute1options.length===0)){_context.next=9;break;}setHelperText('Please input at least one attribute option, or uncheck Add Attribute 2.');_context.next=45;break;case 9:if(state.canDeliver||state.canCollect){_context.next=13;break;}setHelperText('Please select at least one form of product collection.');_context.next=45;break;case 13:if(!(state.attribute1.length!==0&&state.attribute2.length!==0&&state.attribute1===state.attribute2)){_context.next=17;break;}setHelperText('Attribute 1 and Attribute 2 must be different!');_context.next=45;break;case 17:// console.log('POSTING', state);\nnewProduct=new FormData();newProduct.append('name',state.name);if(state.description!==''){newProduct.append('description',state.description);}newProduct.append('attribute1',state.attribute1);newProduct.append('attribute2',state.attribute2);newProduct.append('canCollect',state.canCollect);newProduct.append('canDeliver',state.canDeliver);newProduct.append('category',state.category);newProduct.append('colours',JSON.stringify(attribute1options));newProduct.append('isPreOrder',state.isPreOrder);newProduct.append('price',state.price);newProduct.append('sizes',JSON.stringify(attribute2options));newProduct.append('quantity',JSON.stringify(quantity));if(state.isPreOrder){newProduct.append('leadTime',state.leadTime);}else{newProduct.append('leadTime',0);}oldImages=[];for(i=0;i<images.length;i+=1){if(typeof images[i]==='string'){oldImages.push(images[i]);}else if(typeof images[i]==='object'){newProduct.append('newImages',images[i]);}}newProduct.append('images',JSON.stringify(oldImages));// console.log('REALLY POSTING NOW');\n// for (var [key, value] of newProduct.entries()) {\n//   console.log(key);\n//   console.log(value);\n// }\nif(!(type==='add')){_context.next=40;break;}_context.next=37;return trackPromise(productService.addProduct(newProduct));case 37:res=_context.sent;_context.next=44;break;case 40:if(!(type==='edit')){_context.next=44;break;}_context.next=43;return trackPromise(productService.updateProduct(_id,newProduct));case 43:res=_context.sent;case 44:if(res.status===200){history.go(0);handleClose();}else{if(res.status===400){alert(res.data.validation.body.message);}else if(res.status===413){alert('Your photos are too large! Maximum of 10 MB total!');}else if(res.status===401){alert(\"Error code: \".concat(res.status,\" unauthorized user, error: \").concat(res.data.error));}else{alert(\"Error code: \".concat(res.status,\", error: \").concat(res.data));}}case 45:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();//set initial state of checked, for edit product\nvar newChecked=[];tableRow.map(function(colour,colourIndex){tableCol.map(function(size,sizeIndex){if(quantity[colourIndex][sizeIndex]>999999){newChecked.push(\"\".concat(colour,\"-\").concat(size));}});});//unlimited quantity toggle\nvar _useState13=useState(newChecked),_useState14=_slicedToArray(_useState13,2),checked=_useState14[0],setChecked=_useState14[1];// console.log(checked);\nvar handleToggle=function handleToggle(value,colourIndex,sizeIndex){return function(){var currentIndex=checked.indexOf(value);var newChecked=_toConsumableArray(checked);if(currentIndex===-1){newChecked.push(value);handleNullQty(colourIndex,sizeIndex,true);}else{newChecked.splice(currentIndex,1);// handleNullQty(colourIndex, sizeIndex, false);\n}setChecked(newChecked);};};//for product category:\nvar pdtCategories=['Accessories','Apparel','Food and Beverage','Bags','Decor','Illustrations/Prints/Paintings','Masks','Stationery','Others','NAF Merch'];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Dialog,{open:true,onClose:handleClose,\"aria-labelledby\":\"Add new product\",fullWidth:true,maxWidth:\"md\"//or \"lg\"\n,fullScreen:true,className:classes.root},/*#__PURE__*/React.createElement(DialogTitle,{id:\"Add new product\"},type==='add'?'Add New Product':'Edit Product'),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(DialogContentText,null,\"Please fill in the following form to add your product:\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,autoComplete:\"off\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(TextField,{required:true,id:\"name\",label:\"Product Name\",type:\"text\",fullWidth:true,variant:\"outlined\",color:\"secondary\",className:classes.formSection,onChange:handleInputChange('name'),defaultValue:pdtName}),/*#__PURE__*/React.createElement(TextField,{id:\"description\",label:\"Product Description\",type:\"text\",fullWidth:true,variant:\"outlined\",color:\"secondary\",multiline:true,rows:5,className:classes.formSection,onChange:handleInputChange('description'),defaultValue:pdtDesc}),/*#__PURE__*/React.createElement(FormControl,{required:true,variant:\"outlined\",color:\"secondary\",className:classes.formSection},/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"price\"},\"Price\"),/*#__PURE__*/React.createElement(OutlinedInput,{id:\"price\",value:state.price,onChange:handleInputChange('price'),startAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"start\"},\"$\"),fullWidth:true,labelWidth:45,inputProps:{min:'0',step:'0.01'// pattern: '[0-9]*',\n},type:\"number\",defaultValue:pdtPrice})),/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\"// variant=\"outlined\"\n,required:true,color:\"secondary\",className:classes.formSection},/*#__PURE__*/React.createElement(Autocomplete,{id:\"product-category\",name:\"category\",options:pdtCategories,getOptionLabel:function getOptionLabel(option){return option;}// style={{ width: 300 }}\n,value:state.category,onChange:handleCategoryChange,renderInput:function renderInput(params){return/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{required:true,color:\"secondary\",label:\"Product Category\",variant:\"outlined\"}));}})),/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\"// variant=\"outlined\"\n,color:\"secondary\",className:classes.formSection},/*#__PURE__*/React.createElement(FormLabel,{component:\"legend\"},\"Product Options\"),/*#__PURE__*/React.createElement(FormGroup,{className:classes.indentedCheckboxes},/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox,{checked:state.addAttribute1,onChange:handleChange,name:\"addAttribute1\"}),label:\"Add Attribute 1\"}),state.addAttribute1&&/*#__PURE__*/React.createElement(\"div\",{className:classes.secondaryInput},/*#__PURE__*/React.createElement(TextField,{required:true,id:\"attribute1\",label:\"Attribute 1 (e.g. colour, size)\",type:\"text\",fullWidth:true,variant:\"outlined\",color:\"secondary\",value:state.attribute1,className:classes.formSection,onChange:handleInputChange('attribute1')}),/*#__PURE__*/React.createElement(ChipInput,{label:\"Attribute 1 Options\",color:\"secondary\",variant:\"outlined\",name:\"attribute1options\",value:attribute1options,fullWidth:true,onAdd:function onAdd(chip){return handleAddAttribute1Chip(chip);},onDelete:function onDelete(chip,index){return handleDeleteAttribute1Chip(chip,index);}}),/*#__PURE__*/React.createElement(FormHelperText,null,\"Please press Enter after each attribute option\")),/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox,{checked:state.addAttribute2,onChange:handleChange,name:\"addAttribute2\"}),label:\"Add Attribute 2\"}),state.addAttribute2&&/*#__PURE__*/React.createElement(\"div\",{className:classes.secondaryInput},/*#__PURE__*/React.createElement(TextField,{required:true,id:\"attribute2\",label:\"Attribute 2 (e.g. colour, size)\",type:\"text\",fullWidth:true,variant:\"outlined\",color:\"secondary\",value:state.attribute2,className:classes.formSection,onChange:handleInputChange('attribute2')}),/*#__PURE__*/React.createElement(ChipInput,{label:\"Attribute 2 Options\",color:\"secondary\",variant:\"outlined\",value:attribute2options,fullWidth:true,onAdd:function onAdd(chip){return handleAddAttribute2Chip(chip);},onDelete:function onDelete(chip,index){return handleDeleteAttribute2Chip(chip,index);}}),/*#__PURE__*/React.createElement(FormHelperText,null,\"Please press Enter after each attribute option\")),/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox,{checked:state.isPreOrder,onChange:handleChange,name:\"isPreOrder\"}),label:\"Pre-Order\"}),state.isPreOrder&&/*#__PURE__*/React.createElement(\"div\",{className:classes.secondaryInput},/*#__PURE__*/React.createElement(FormControl,{required:true,variant:\"outlined\",color:\"secondary\",className:classes.formSection},/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"leadTime\"},\"Lead Time\"),/*#__PURE__*/React.createElement(OutlinedInput,{id:\"leadTime\"// value={state.leadTime}\n,onChange:handleInputChange('leadTime'),endAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"end\"},\"days\"),labelWidth:80,type:\"number\",inputProps:{min:'1'},defaultValue:state.leadTime}),/*#__PURE__*/React.createElement(FormHelperText,null,\"Product lead time indicates the minimum number of days the order must be placed before collection.\"))))),/*#__PURE__*/React.createElement(\"div\",{className:classes.quantity},/*#__PURE__*/React.createElement(FormLabel,{component:\"legend\"},\"Product Variant Quantities\"),/*#__PURE__*/React.createElement(List,{className:classes.root},tableRow.map(function(colour,colourIndex){return tableCol.map(function(size,sizeIndex){var labelId=\"\".concat(colour,\"-\").concat(size);// const label =\n//   (colour === '' ? '' : `${colour} colour`) +\n//   (size === '' ? '' : `${size} size`);\nvar label=colour===''&&size===''?'Original':colour.toUpperCase()+' '+size.toUpperCase();return/*#__PURE__*/React.createElement(ListItem,{key:labelId,disableGutters:true,divider:true},/*#__PURE__*/React.createElement(ListItemText,{id:labelId,primary:\"Variant: \".concat(label),disableTypography:true,style:{display:'inline-block'}}),/*#__PURE__*/React.createElement(\"div\",{style:{display:'inline-block',paddingLeft:15}},/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox// edge=\"center\"\n,{onChange:handleToggle(\"\".concat(colour,\"-\").concat(size),colourIndex,sizeIndex),checked:checked.indexOf(\"\".concat(colour,\"-\").concat(size))!==-1,inputProps:{'aria-labelledby':\"unlimited quantity for variant \".concat(colour,\"-\").concat(size)}}),label:\"Unlimited Quantity\"}),checked.indexOf(\"\".concat(colour,\"-\").concat(size))===-1&&/*#__PURE__*/React.createElement(TextField,{required:true,label:\"Quantity\",type:\"number\",inputProps:{min:'0'},size:\"small\",variant:\"outlined\",color:\"secondary\",onChange:handleQtyChange(colourIndex,sizeIndex,false),defaultValue:quantity[colourIndex][sizeIndex]<999999?quantity[colourIndex][sizeIndex]:''})));});}))),/*#__PURE__*/React.createElement(FormLabel,{component:\"legend\",required:true},\"Product Collection Options\"),/*#__PURE__*/React.createElement(FormGroup,{className:classes.indentedCheckboxes},/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox,{checked:state.canCollect,onChange:handleChange,name:\"canCollect\"}),label:\"Allow self-collection\"}),/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox,{checked:state.canDeliver,onChange:handleChange,name:\"canDeliver\"}),label:\"Allow delivery\"})),/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\"// variant=\"outlined\"\n,color:\"secondary\",className:classes.formSection},/*#__PURE__*/React.createElement(FormLabel,{component:\"legend\"},\"Product Images\"),/*#__PURE__*/React.createElement(\"div\",getRootProps({className:classes.dropzone}),/*#__PURE__*/React.createElement(\"input\",getInputProps()),/*#__PURE__*/React.createElement(\"p\",null,\"Drag and drop your product images here, or click to select files (Squared images are preferred)\")),/*#__PURE__*/React.createElement(\"aside\",{className:classes.thumbsContainer},images.map(function(file){return/*#__PURE__*/React.createElement(\"div\",{className:classes.thumb,key:file.name},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"remove image\",color:\"secondary\",onClick:function onClick(){return removeImage(file);},style:{position:'absolute',top:0,right:0}},/*#__PURE__*/React.createElement(CloseRoundedIcon,null)),/*#__PURE__*/React.createElement(\"div\",{className:classes.thumbInner},typeof file.preview==='undefined'?/*#__PURE__*/React.createElement(\"img\",{src:file,className:classes.img}):/*#__PURE__*/React.createElement(\"img\",{src:file.preview,className:classes.img})));}))),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"secondary\",disabled:promiseInProgress},type==='add'?'Add Product':'Update Product'),/*#__PURE__*/React.createElement(FormHelperText,{style:{color:'red'}},helperText),/*#__PURE__*/React.createElement(LoadingSpinnerComponent,null))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:handleClose,color:\"secondary\",disabled:promiseInProgress},\"Cancel\"))));}","map":{"version":3,"sources":["C:/Users/antho/OneDrive/Desktop/naf2022-front/src/MarketPlacePage/AddProduct.js"],"names":["React","useState","useEffect","Component","withStyles","makeStyles","useTheme","Button","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","OutlinedInput","InputLabel","InputAdornment","FormHelperText","FormControl","Typography","FormLabel","FormGroup","FormControlLabel","Checkbox","ChipInput","productService","useDropzone","IconButton","CloseRoundedIcon","useHistory","List","ListItem","ListItemSecondaryAction","ListItemText","Autocomplete","LoadingSpinnerComponent","trackPromise","usePromiseTracker","useStyles","theme","root","padding","spacing","formSection","marginTop","marginBottom","display","indentedCheckboxes","marginLeft","secondaryInput","rowLabels","align","dropzone","border","color","margin","textAlign","fontWeight","backgroundColor","palette","background","default","cursor","outline","thumbsContainer","width","flexDirection","flexWrap","justifyContent","thumb","position","borderRadius","marginRight","thumbInner","height","img","breakpoints","down","objectFit","AddProduct","props","_id","parentCallback","pdtName","pdtDesc","pdtPrice","pdtCat","pdtQuantity","pdtAtt1","pdtAtt1Options","pdtAtt2","pdtAtt2Options","pdtCollect","pdtDeliver","pdtPreorder","pdtLeadtime","pdtImages","type","classes","history","name","description","price","attribute1","attribute2","addAttribute1","length","addAttribute2","canDeliver","canCollect","category","isPreOrder","leadTime","state","setState","helperText","setHelperText","quantity","setQuantity","promiseInProgress","attribute1options","setAttribute1","handleAddAttribute1Chip","chip","handleDeleteAttribute1Chip","console","log","indexOfColor","indexOf","filter","qty","index","colour","attribute2options","setAttribute2","handleAddAttribute2Chip","handleDeleteAttribute2Chip","size","indexOfSize","newQuantity","map","colourRow","rowElem","handleClearAttribute1Chips","handleClearAttribute2Chips","option","tableCol","concat","tableRow","handleChange","event","target","checked","handleQtyChange","row","col","copiedQuantity","copiedRow","value","rowNum","handleNullQty","isNull","splice","handleInputChange","prop","handleCategoryChange","images","setImages","accept","onDrop","acceptedFiles","allFiles","forEach","file","push","Object","assign","preview","URL","createObjectURL","getRootProps","getInputProps","revokeObjectURL","removeImage","savedFile","handleClose","handleSubmit","preventDefault","newProduct","FormData","append","JSON","stringify","oldImages","i","addProduct","res","updateProduct","status","go","alert","data","validation","body","message","error","newChecked","colourIndex","sizeIndex","setChecked","handleToggle","currentIndex","pdtCategories","form","min","step","params","labelId","label","toUpperCase","paddingLeft","className","top","right"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Component } from 'react';\nimport { withStyles, makeStyles, useTheme } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Typography from '@material-ui/core/Typography';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport ChipInput from 'material-ui-chip-input';\nimport productService from '../services/products';\nimport { useDropzone } from 'react-dropzone';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseRoundedIcon from '@material-ui/icons/CloseRounded';\nimport { useHistory } from 'react-router-dom';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { LoadingSpinnerComponent } from '../utils/LoadingSpinnerComponent';\nimport { trackPromise } from 'react-promise-tracker';\nimport { usePromiseTracker } from 'react-promise-tracker';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2),\n  },\n  formSection: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n    display: 'block',\n  },\n  indentedCheckboxes: {\n    marginLeft: theme.spacing(2),\n  },\n  secondaryInput: {\n    marginLeft: theme.spacing(3),\n    marginBottom: theme.spacing(2),\n  },\n  rowLabels: {\n    align: 'center',\n  },\n  //IMAGE DROPZONE STYLING\n  dropzone: {\n    // backgroundColor: 'pink',\n    border: '3px dashed rgba(179, 86, 153, 0.6)',\n    color: 'rgba(179, 86, 153, 1)',\n    padding: theme.spacing(5),\n    marginTop: theme.spacing(2),\n    margin: 'auto',\n    textAlign: 'center',\n    fontWeight: 'bold',\n    '&:hover': {\n      backgroundColor: theme.palette.background.default,\n      cursor: 'pointer',\n    },\n    '&:focus': {\n      outline: 'none',\n    },\n  },\n  thumbsContainer: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginTop: 16,\n    justifyContent: 'center',\n  },\n  thumb: {\n    display: 'inline-flex',\n    position: 'relative',\n    borderRadius: 2,\n    border: '1px solid #eaeaea',\n    marginBottom: 8,\n    marginRight: 8,\n    padding: 5,\n  },\n  thumbInner: {\n    //   minWidth: 0,\n    //   overflow: 'hidden',\n    height: 150,\n  },\n  img: {\n    display: 'block',\n    width: 'auto',\n    height: '100%',\n  },\n  [theme.breakpoints.down('xs')]: {\n    thumbInner: {\n      height: 'auto',\n    },\n    img: {\n      width: '100%',\n      objectFit: 'cover',\n    },\n  },\n}));\n\nexport default function AddProduct(props) {\n  const {\n    _id,\n    parentCallback,\n    pdtName,\n    pdtDesc,\n    pdtPrice,\n    pdtCat,\n    pdtQuantity,\n    pdtAtt1,\n    pdtAtt1Options,\n    pdtAtt2,\n    pdtAtt2Options,\n    pdtCollect,\n    pdtDeliver,\n    pdtPreorder,\n    pdtLeadtime,\n    pdtImages,\n    type,\n  } = props;\n  const classes = useStyles();\n  const history = useHistory();\n  const [state, setState] = useState({\n    name: pdtName,\n    description: typeof pdtDesc !== 'undefined' ? pdtDesc : '',\n    price: pdtPrice,\n    attribute1: typeof pdtAtt1 !== 'undefined' ? pdtAtt1 : '',\n    attribute2: typeof pdtAtt2 !== 'undefined' ? pdtAtt2 : '',\n    addAttribute1:\n      typeof pdtAtt1 !== 'undefined' ? pdtAtt1.length !== 0 : false,\n    addAttribute2:\n      typeof pdtAtt2 !== 'undefined' ? pdtAtt2.length !== 0 : false,\n    canDeliver: typeof pdtDeliver !== 'undefined' ? pdtDeliver : false,\n    canCollect: typeof pdtCollect !== 'undefined' ? pdtCollect : false,\n    category: pdtCat,\n    isPreOrder: pdtPreorder,\n    leadTime: pdtLeadtime - 2, //account for minimum 2 day leadtime\n    // quantity: 0,\n  });\n\n  const [helperText, setHelperText] = useState('');\n  const [quantity, setQuantity] = useState(\n    typeof pdtQuantity !== 'undefined' ? pdtQuantity : [[]]\n  );\n  const { promiseInProgress } = usePromiseTracker();\n\n  //ATTRIBUTE 1 = SIZES, ATTRIBUTE2 = COLOURS\n  //INPUT POSSIBLE COLOURS (ROW)\n  const [attribute1options, setAttribute1] = useState(\n    state.addAttribute1 ? pdtAtt1Options : []\n  );\n  const handleAddAttribute1Chip = (chip) => {\n    setAttribute1((attribute1options) => [...attribute1options, chip]);\n    // console.log(attribute1options.length); //FIX THIS\n    if (attribute1options.length > 0) {\n      //if 1 colour -> increase but if 0 colours to 1 colour can reuse the matrix\n      //Initial matrix = [[]]\n      setQuantity((quantity) => [...quantity, []]);\n      // console.log('ADDING ATTRIBUTE 1 CHIP, QUANTITY: ', (quantity) => [\n      //   ...quantity,\n      //   [],\n      // ]);\n    }\n  };\n  const handleDeleteAttribute1Chip = (chip) => {\n    console.log('Delete properly');\n    const indexOfColor = attribute1options.indexOf(chip);\n    //FIX THIS\n    setQuantity(quantity.filter((qty, index) => index !== indexOfColor));\n    if (attribute1options.length === 1) {\n      //if got 1 colour only then just set to an empty array\n      // setQuantity((quantity[indexOfColor] = []));\n      setQuantity([[]]);\n      // console.log('DELETING ATTRIBUTE 1 CHIP, QUANTITY: ', [[]]);\n    }\n    // console.log(\n    //   'DELETING ATTRIBUTE 1 CHIP, QUANTITY: ',\n    //   quantity.filter((qty, index) => index !== indexOfColor)\n    // );\n    setAttribute1(attribute1options.filter((colour) => colour !== chip));\n  };\n\n  //INPUT POSSIBLE COLOURS (ROW)\n  const [attribute2options, setAttribute2] = useState(\n    state.addAttribute2 ? pdtAtt2Options : []\n  );\n\n  const handleAddAttribute2Chip = (chip) => {\n    setAttribute2((attribute2options) => [...attribute2options, chip]);\n    //FIX THIS\n    // if (attribute2options.length >= 1) {\n    //   const newQuantity = quantity.map((colourRow) => [...colourRow, null]);\n    //   setQuantity(newQuantity);\n    //   console.log('ADDING ATTRIBUTE 2 CHIP, QUANTITY: ', newQuantity);\n    // }\n  };\n  const handleDeleteAttribute2Chip = (chip) => {\n    setAttribute2(attribute2options.filter((size) => size !== chip));\n    const indexOfSize = attribute2options.indexOf(chip);\n    //FIX THIS\n    //if product size from 1 to 0 then dont change\n    const newQuantity = quantity.map((colourRow) =>\n      colourRow.filter((rowElem, index) => index !== indexOfSize)\n    );\n    setQuantity(newQuantity);\n    // console.log('DELETING ATTRIBUTE 2 CHIP, QUANTITY: ', newQuantity);\n  };\n\n  const handleClearAttribute1Chips = () => {\n    setAttribute1([]);\n    setQuantity([[]]);\n  };\n\n  const handleClearAttribute2Chips = () => {\n    let newQuantity = [...quantity];\n    for (let option of attribute2options) {\n      const indexOfSize = attribute2options.indexOf(option);\n      newQuantity = newQuantity.map((colourRow) =>\n        colourRow.filter((rowElem, index) => index !== indexOfSize)\n      );\n    }\n\n    setAttribute2([]);\n    setQuantity(newQuantity);\n  };\n\n  const tableCol =\n    attribute2options.length === 0\n      ? [''].concat(attribute2options)\n      : attribute2options;\n\n  const tableRow =\n    attribute1options.length === 0\n      ? [''].concat(attribute1options)\n      : attribute1options;\n\n  //PRODUCT OPTION CHECKBOXES\n  const handleChange = (event) => {\n    setState({\n      ...state,\n      [event.target.name]: event.target.checked,\n    });\n\n    if (event.target.checked === false) {\n      switch (event.target.name) {\n        case 'addAttribute1':\n          setState({\n            ...state,\n            attribute1: '',\n            [event.target.name]: event.target.checked,\n          });\n          handleClearAttribute1Chips();\n          break;\n        case 'addAttribute2':\n          setState({\n            ...state,\n            attribute2: '',\n            [event.target.name]: event.target.checked,\n          });\n          handleClearAttribute2Chips();\n          break;\n        case 'isPreOrder':\n          setState({\n            ...state,\n            leadTime: 0,\n            [event.target.name]: event.target.checked,\n          });\n          break;\n        default:\n          break;\n      }\n    }\n  };\n\n  //Handle quantity\n  const handleQtyChange = (row, col) => (event) => {\n    const copiedQuantity = [...quantity];\n    const copiedRow = [...copiedQuantity[row]];\n    copiedRow[col] = event.target.value;\n    const newQuantity = copiedQuantity.map((colourRow, rowNum) => {\n      if (rowNum === row) {\n        return copiedRow;\n      } else {\n        return colourRow;\n      }\n    });\n    setQuantity(newQuantity);\n  };\n  //handle quantity (null)\n  const handleNullQty = (row, col, isNull) => {\n    const copiedQuantity = [...quantity];\n    const copiedRow = [...copiedQuantity[row]];\n    isNull ? (copiedRow[col] = null) : copiedRow.splice(col, 1);\n    const newQuantity = copiedQuantity.map((colourRow, rowNum) => {\n      if (rowNum === row) {\n        return copiedRow;\n      } else {\n        return colourRow;\n      }\n    });\n    setQuantity(newQuantity);\n  };\n\n  //Handle input\n  const handleInputChange = (prop) => (event) => {\n    setState({ ...state, [prop]: event.target.value });\n    // console.log(event);\n  };\n\n  const handleCategoryChange = (event, value) => {\n    setState({ ...state, category: value });\n  };\n\n  //ADD IMAGES DROPZONE\n  const [images, setImages] = useState(\n    typeof pdtImages !== 'undefined' ? pdtImages : []\n  );\n  // console.log('IMAGES HERE',   images);\n  const { getRootProps, getInputProps } = useDropzone({\n    accept: 'image/*',\n    onDrop: (acceptedFiles) => {\n      let allFiles = images;\n      acceptedFiles.forEach((file) => allFiles.push(file));\n      setImages(\n        allFiles.map((file) =>\n          typeof file.name === 'string'\n            ? Object.assign(file, {\n                preview: URL.createObjectURL(file),\n              })\n            : file\n        )\n      );\n    },\n  });\n\n  useEffect(\n    () => () => {\n      // Make sure to revoke the data uris to avoid memory leaks\n      images.forEach((file) => URL.revokeObjectURL(file.preview));\n    },\n    [images]\n  );\n\n  const removeImage = (file) => {\n    // console.log(file);\n    setImages(images.filter((savedFile) => savedFile !== file));\n  };\n\n  //DIALOG ACTIONS\n  const handleClose = () => {\n    parentCallback();\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (state.addAttribute2 && attribute2options.length === 0) {\n      setHelperText(\n        'Please input at least one attribute option, or uncheck Add Attribute 1.'\n      );\n    } else if (state.addAttribute1 && attribute1options.length === 0) {\n      setHelperText(\n        'Please input at least one attribute option, or uncheck Add Attribute 2.'\n      );\n    } else if (!(state.canDeliver || state.canCollect)) {\n      setHelperText('Please select at least one form of product collection.');\n    } else if (\n      state.attribute1.length !== 0 &&\n      state.attribute2.length !== 0 &&\n      state.attribute1 === state.attribute2\n    ) {\n      setHelperText('Attribute 1 and Attribute 2 must be different!');\n    } else {\n      // console.log('POSTING', state);\n      const newProduct = new FormData();\n      newProduct.append('name', state.name);\n      if (state.description !== '') {\n        newProduct.append('description', state.description);\n      }\n      newProduct.append('attribute1', state.attribute1);\n      newProduct.append('attribute2', state.attribute2);\n      newProduct.append('canCollect', state.canCollect);\n      newProduct.append('canDeliver', state.canDeliver);\n      newProduct.append('category', state.category);\n      newProduct.append('colours', JSON.stringify(attribute1options));\n      newProduct.append('isPreOrder', state.isPreOrder);\n      newProduct.append('price', state.price);\n      newProduct.append('sizes', JSON.stringify(attribute2options));\n      newProduct.append('quantity', JSON.stringify(quantity));\n      if (state.isPreOrder) {\n        newProduct.append('leadTime', state.leadTime);\n      } else {\n        newProduct.append('leadTime', 0);\n      }\n      let oldImages = [];\n      for (let i = 0; i < images.length; i += 1) {\n        if (typeof images[i] === 'string') {\n          oldImages.push(images[i]);\n        } else if (typeof images[i] === 'object') {\n          newProduct.append('newImages', images[i]);\n        }\n      }\n      newProduct.append('images', JSON.stringify(oldImages));\n      // console.log('REALLY POSTING NOW');\n      // for (var [key, value] of newProduct.entries()) {\n      //   console.log(key);\n      //   console.log(value);\n      // }\n      let res;\n      if (type === 'add') {\n        res = await trackPromise(productService.addProduct(newProduct));\n      } else if (type === 'edit') {\n        res = await trackPromise(productService.updateProduct(_id, newProduct));\n      }\n      if (res.status === 200) {\n        history.go(0);\n        handleClose();\n      } else {\n        if (res.status === 400) {\n          alert(res.data.validation.body.message);\n        } else if (res.status === 413) {\n          alert('Your photos are too large! Maximum of 10 MB total!');\n        } else if (res.status === 401) {\n          alert(\n            `Error code: ${res.status} unauthorized user, error: ${res.data.error}`\n          );\n        } else {\n          alert(`Error code: ${res.status}, error: ${res.data}`);\n        }\n      }\n    }\n  };\n\n  //set initial state of checked, for edit product\n  const newChecked = [];\n  tableRow.map((colour, colourIndex) => {\n    tableCol.map((size, sizeIndex) => {\n      if (quantity[colourIndex][sizeIndex] > 999999) {\n        newChecked.push(`${colour}-${size}`);\n      }\n    });\n  });\n\n  //unlimited quantity toggle\n  const [checked, setChecked] = useState(newChecked);\n  // console.log(checked);\n\n  const handleToggle = (value, colourIndex, sizeIndex) => () => {\n    const currentIndex = checked.indexOf(value);\n    const newChecked = [...checked];\n\n    if (currentIndex === -1) {\n      newChecked.push(value);\n      handleNullQty(colourIndex, sizeIndex, true);\n    } else {\n      newChecked.splice(currentIndex, 1);\n      // handleNullQty(colourIndex, sizeIndex, false);\n    }\n\n    setChecked(newChecked);\n  };\n\n  //for product category:\n  const pdtCategories = [\n    'Accessories',\n    'Apparel',\n    'Food and Beverage',\n    'Bags',\n    'Decor',\n    'Illustrations/Prints/Paintings',\n    'Masks',\n    'Stationery',\n    'Others',\n    'NAF Merch',\n  ];\n\n  return (\n    <>\n      <Dialog\n        open={true}\n        onClose={handleClose}\n        aria-labelledby=\"Add new product\"\n        fullWidth={true}\n        maxWidth=\"md\" //or \"lg\"\n        fullScreen\n        className={classes.root}\n      >\n        <DialogTitle id=\"Add new product\">\n          {type === 'add' ? 'Add New Product' : 'Edit Product'}\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please fill in the following form to add your product:\n          </DialogContentText>\n          <form\n            className={classes.form}\n            autoComplete=\"off\"\n            onSubmit={handleSubmit}\n          >\n            <TextField\n              required\n              id=\"name\"\n              label=\"Product Name\"\n              type=\"text\"\n              fullWidth\n              variant=\"outlined\"\n              color=\"secondary\"\n              className={classes.formSection}\n              onChange={handleInputChange('name')}\n              defaultValue={pdtName}\n            />\n            <TextField\n              id=\"description\"\n              label=\"Product Description\"\n              type=\"text\"\n              fullWidth\n              variant=\"outlined\"\n              color=\"secondary\"\n              multiline\n              rows={5}\n              className={classes.formSection}\n              onChange={handleInputChange('description')}\n              defaultValue={pdtDesc}\n            />\n            <FormControl\n              required\n              variant=\"outlined\"\n              color=\"secondary\"\n              className={classes.formSection}\n            >\n              <InputLabel htmlFor=\"price\">Price</InputLabel>\n              <OutlinedInput\n                id=\"price\"\n                value={state.price}\n                onChange={handleInputChange('price')}\n                startAdornment={\n                  <InputAdornment position=\"start\">$</InputAdornment>\n                }\n                fullWidth\n                labelWidth={45}\n                inputProps={{\n                  min: '0',\n                  step: '0.01',\n                  // pattern: '[0-9]*',\n                }}\n                type=\"number\"\n                defaultValue={pdtPrice}\n              />\n            </FormControl>\n            <FormControl\n              component=\"fieldset\"\n              // variant=\"outlined\"\n              required\n              color=\"secondary\"\n              className={classes.formSection}\n            >\n              <Autocomplete\n                id=\"product-category\"\n                name=\"category\"\n                options={pdtCategories}\n                getOptionLabel={(option) => option}\n                // style={{ width: 300 }}\n                value={state.category}\n                onChange={handleCategoryChange}\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    required\n                    color=\"secondary\"\n                    label=\"Product Category\"\n                    variant=\"outlined\"\n                  />\n                )}\n              />\n            </FormControl>\n            <FormControl\n              component=\"fieldset\"\n              // variant=\"outlined\"\n              color=\"secondary\"\n              className={classes.formSection}\n            >\n              <FormLabel component=\"legend\">Product Options</FormLabel>\n              <FormGroup className={classes.indentedCheckboxes}>\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={state.addAttribute1}\n                      onChange={handleChange}\n                      name=\"addAttribute1\"\n                    />\n                  }\n                  label=\"Add Attribute 1\"\n                />\n                {state.addAttribute1 && (\n                  <div className={classes.secondaryInput}>\n                    <TextField\n                      required\n                      id=\"attribute1\"\n                      label=\"Attribute 1 (e.g. colour, size)\"\n                      type=\"text\"\n                      fullWidth\n                      variant=\"outlined\"\n                      color=\"secondary\"\n                      value={state.attribute1}\n                      className={classes.formSection}\n                      onChange={handleInputChange('attribute1')}\n                    />\n                    <ChipInput\n                      label=\"Attribute 1 Options\"\n                      color=\"secondary\"\n                      variant=\"outlined\"\n                      name=\"attribute1options\"\n                      value={attribute1options}\n                      fullWidth\n                      onAdd={(chip) => handleAddAttribute1Chip(chip)}\n                      onDelete={(chip, index) =>\n                        handleDeleteAttribute1Chip(chip, index)\n                      }\n                    />\n                    <FormHelperText>\n                      Please press Enter after each attribute option\n                    </FormHelperText>\n                  </div>\n                )}\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={state.addAttribute2}\n                      onChange={handleChange}\n                      name=\"addAttribute2\"\n                    />\n                  }\n                  label=\"Add Attribute 2\"\n                />\n                {state.addAttribute2 && (\n                  <div className={classes.secondaryInput}>\n                    <TextField\n                      required\n                      id=\"attribute2\"\n                      label=\"Attribute 2 (e.g. colour, size)\"\n                      type=\"text\"\n                      fullWidth\n                      variant=\"outlined\"\n                      color=\"secondary\"\n                      value={state.attribute2}\n                      className={classes.formSection}\n                      onChange={handleInputChange('attribute2')}\n                    />\n                    <ChipInput\n                      label=\"Attribute 2 Options\"\n                      color=\"secondary\"\n                      variant=\"outlined\"\n                      value={attribute2options}\n                      fullWidth\n                      onAdd={(chip) => handleAddAttribute2Chip(chip)}\n                      onDelete={(chip, index) =>\n                        handleDeleteAttribute2Chip(chip, index)\n                      }\n                    />\n                    <FormHelperText>\n                      Please press Enter after each attribute option\n                    </FormHelperText>\n                  </div>\n                )}\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={state.isPreOrder}\n                      onChange={handleChange}\n                      name=\"isPreOrder\"\n                    />\n                  }\n                  label=\"Pre-Order\"\n                />\n                {state.isPreOrder && (\n                  <div className={classes.secondaryInput}>\n                    <FormControl\n                      required\n                      variant=\"outlined\"\n                      color=\"secondary\"\n                      className={classes.formSection}\n                    >\n                      <InputLabel htmlFor=\"leadTime\">Lead Time</InputLabel>\n                      <OutlinedInput\n                        id=\"leadTime\"\n                        // value={state.leadTime}\n                        onChange={handleInputChange('leadTime')}\n                        endAdornment={\n                          <InputAdornment position=\"end\">days</InputAdornment>\n                        }\n                        labelWidth={80}\n                        type=\"number\"\n                        inputProps={{\n                          min: '1',\n                        }}\n                        defaultValue={state.leadTime}\n                      />\n                      <FormHelperText>\n                        Product lead time indicates the minimum number of days\n                        the order must be placed before collection.\n                      </FormHelperText>\n                    </FormControl>\n                  </div>\n                )}\n              </FormGroup>\n            </FormControl>\n            <div className={classes.quantity}>\n              <FormLabel component=\"legend\">\n                Product Variant Quantities\n              </FormLabel>\n              <List className={classes.root}>\n                {tableRow.map((colour, colourIndex) => {\n                  return tableCol.map((size, sizeIndex) => {\n                    const labelId = `${colour}-${size}`;\n                    // const label =\n                    //   (colour === '' ? '' : `${colour} colour`) +\n                    //   (size === '' ? '' : `${size} size`);\n                    const label =\n                      colour === '' && size === ''\n                        ? 'Original'\n                        : colour.toUpperCase() + ' ' + size.toUpperCase();\n                    return (\n                      <ListItem key={labelId} disableGutters divider>\n                        <ListItemText\n                          id={labelId}\n                          primary={`Variant: ${label}`}\n                          disableTypography\n                          style={{ display: 'inline-block' }}\n                        />\n                        {/* <ListItemSecondaryAction\n                        style={{ display: 'inline-block' }} //this has shitty styling\n                      > */}\n                        <div\n                          style={{ display: 'inline-block', paddingLeft: 15 }}\n                        >\n                          <FormControlLabel\n                            control={\n                              <Checkbox\n                                // edge=\"center\"\n                                onChange={handleToggle(\n                                  `${colour}-${size}`,\n                                  colourIndex,\n                                  sizeIndex\n                                )}\n                                checked={\n                                  checked.indexOf(`${colour}-${size}`) !== -1\n                                }\n                                inputProps={{\n                                  'aria-labelledby': `unlimited quantity for variant ${colour}-${size}`,\n                                }}\n                              />\n                            }\n                            label=\"Unlimited Quantity\"\n                          />\n                          {checked.indexOf(`${colour}-${size}`) === -1 && (\n                            <TextField\n                              required\n                              label=\"Quantity\"\n                              type=\"number\"\n                              inputProps={{ min: '0' }}\n                              size=\"small\"\n                              variant=\"outlined\"\n                              color=\"secondary\"\n                              onChange={handleQtyChange(\n                                colourIndex,\n                                sizeIndex,\n                                false\n                              )}\n                              defaultValue={\n                                quantity[colourIndex][sizeIndex] < 999999\n                                  ? quantity[colourIndex][sizeIndex]\n                                  : ''\n                              }\n                            />\n                          )}\n                        </div>\n                        {/* </ListItemSecondaryAction> */}\n                      </ListItem>\n                    );\n                  });\n                })}\n              </List>\n            </div>\n\n            <FormLabel component=\"legend\" required>\n              Product Collection Options\n            </FormLabel>\n            <FormGroup className={classes.indentedCheckboxes}>\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={state.canCollect}\n                    onChange={handleChange}\n                    name=\"canCollect\"\n                  />\n                }\n                label=\"Allow self-collection\"\n              />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={state.canDeliver}\n                    onChange={handleChange}\n                    name=\"canDeliver\"\n                  />\n                }\n                label=\"Allow delivery\"\n              />\n            </FormGroup>\n\n            <FormControl\n              component=\"fieldset\"\n              // variant=\"outlined\"\n              color=\"secondary\"\n              className={classes.formSection}\n            >\n              <FormLabel component=\"legend\">Product Images</FormLabel>\n              <div {...getRootProps({ className: classes.dropzone })}>\n                <input {...getInputProps()} />\n                <p>\n                  Drag and drop your product images here, or click to select\n                  files (Squared images are preferred)\n                </p>\n              </div>\n              <aside className={classes.thumbsContainer}>\n                {images.map((file) => (\n                  <div className={classes.thumb} key={file.name}>\n                    <IconButton\n                      aria-label=\"remove image\"\n                      color=\"secondary\"\n                      onClick={() => removeImage(file)}\n                      style={{\n                        position: 'absolute',\n                        top: 0,\n                        right: 0,\n                      }}\n                    >\n                      <CloseRoundedIcon />\n                    </IconButton>\n                    <div className={classes.thumbInner}>\n                      {typeof file.preview === 'undefined' ? (\n                        <img src={file} className={classes.img} />\n                      ) : (\n                        <img src={file.preview} className={classes.img} />\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </aside>\n            </FormControl>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"secondary\"\n              disabled={promiseInProgress}\n            >\n              {type === 'add' ? 'Add Product' : 'Update Product'}\n            </Button>\n            <FormHelperText style={{ color: 'red' }}>\n              {helperText}\n            </FormHelperText>\n            <LoadingSpinnerComponent />\n          </form>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleClose}\n            color=\"secondary\"\n            disabled={promiseInProgress}\n          >\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}